(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function n(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=n(u);fetch(u.href,f)}})();var wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function Is(o){if(o.__esModule)return o;var r=o.default;if(typeof r=="function"){var n=function a(){return this instanceof a?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var u=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(n,a,u.get?u:{enumerable:!0,get:function(){return o[a]}})}),n}var bs={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(o,r){(function(n,a){a(r)})(wi,function(n){var a="1.9.4";function u(t){var e,i,s,c;for(i=1,s=arguments.length;i<s;i++){c=arguments[i];for(e in c)t[e]=c[e]}return t}var f=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function p(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var s=i.call(arguments,2);return function(){return t.apply(e,s.length?s.concat(i.call(arguments)):arguments)}}var y=0;function _(t){return"_leaflet_id"in t||(t._leaflet_id=++y),t._leaflet_id}function x(t,e,i){var s,c,m,k;return k=function(){s=!1,c&&(m.apply(i,c),c=!1)},m=function(){s?c=arguments:(t.apply(i,arguments),setTimeout(k,e),s=!0)},m}function C(t,e,i){var s=e[1],c=e[0],m=s-c;return t===s&&i?t:((t-c)%m+m)%m+c}function D(){return!1}function H(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function U(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function tt(t){return U(t).split(/\s+/)}function b(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?f(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function V(t,e,i){var s=[];for(var c in t)s.push(encodeURIComponent(i?c.toUpperCase():c)+"="+encodeURIComponent(t[c]));return(!e||e.indexOf("?")===-1?"?":"&")+s.join("&")}var rt=/\{ *([\w_ -]+) *\}/g;function S(t,e){return t.replace(rt,function(i,s){var c=e[s];if(c===void 0)throw new Error("No value provided for variable "+i);return typeof c=="function"&&(c=c(e)),c})}var E=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function O(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var G=0;function B(t){var e=+new Date,i=Math.max(0,16-(e-G));return G=e+i,window.setTimeout(t,i)}var q=window.requestAnimationFrame||A("RequestAnimationFrame")||B,et=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function j(t,e,i){if(i&&q===B)t.call(e);else return q.call(window,p(t,e))}function it(t){t&&et.call(window,t)}var mt={__proto__:null,extend:u,create:f,bind:p,get lastId(){return y},stamp:_,throttle:x,wrapNum:C,falseFn:D,formatNum:H,trim:U,splitWords:tt,setOptions:b,getParamString:V,template:S,isArray:E,indexOf:O,emptyImageUrl:z,requestFn:q,cancelFn:et,requestAnimFrame:j,cancelAnimFrame:it};function ft(){}ft.extend=function(t){var e=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,s=f(i);s.constructor=e,e.prototype=s;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(e[c]=this[c]);return t.statics&&u(e,t.statics),t.includes&&(oe(t.includes),u.apply(null,[s].concat(t.includes))),u(s,t),delete s.statics,delete s.includes,s.options&&(s.options=i.options?f(i.options):{},u(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,k=s._initHooks.length;m<k;m++)s._initHooks[m].call(this)}},e},ft.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},ft.mergeOptions=function(t){return u(this.prototype.options,t),this},ft.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function oe(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=E(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Rt={on:function(t,e,i){if(typeof t=="object")for(var s in t)this._on(s,t[s],e);else{t=tt(t);for(var c=0,m=t.length;c<m;c++)this._on(t[c],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],e);else{t=tt(t);for(var c=arguments.length===1,m=0,k=t.length;m<k;m++)c?this._off(t[m]):this._off(t[m],e,i)}return this},_on:function(t,e,i,s){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var c={fn:e,ctx:i};s&&(c.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(c)}},_off:function(t,e,i){var s,c,m;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(c=0,m=s.length;c<m;c++)s[c].fn=D;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var k=this._listens(t,e,i);if(k!==!1){var R=s[k];this._firingCount&&(R.fn=D,this._events[t]=s=s.slice()),s.splice(k,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var s=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var c=this._events[t];if(c){this._firingCount=this._firingCount+1||1;for(var m=0,k=c.length;m<k;m++){var R=c[m],$=R.fn;R.once&&this.off(t,$,R.ctx),$.call(R.ctx||this,s)}this._firingCount--}}return i&&this._propagateEvent(s),this},listens:function(t,e,i,s){typeof t!="string"&&console.warn('"string" type argument expected');var c=e;typeof e!="function"&&(s=!!e,c=void 0,i=void 0);var m=this._events&&this._events[t];if(m&&m.length&&this._listens(t,c,i)!==!1)return!0;if(s){for(var k in this._eventParents)if(this._eventParents[k].listens(t,e,i,s))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var s=this._events[t]||[];if(!e)return!!s.length;i===this&&(i=void 0);for(var c=0,m=s.length;c<m;c++)if(s[c].fn===e&&s[c].ctx===i)return c;return!1},once:function(t,e,i){if(typeof t=="object")for(var s in t)this._on(s,t[s],e,!0);else{t=tt(t);for(var c=0,m=t.length;c<m;c++)this._on(t[c],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[_(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[_(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};Rt.addEventListener=Rt.on,Rt.removeEventListener=Rt.clearAllEventListeners=Rt.off,Rt.addOneTimeEventListener=Rt.once,Rt.fireEvent=Rt.fire,Rt.hasEventListeners=Rt.listens;var Qt=ft.extend(Rt);function pt(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var pe=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};pt.prototype={clone:function(){return new pt(this.x,this.y)},add:function(t){return this.clone()._add(ct(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(ct(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new pt(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new pt(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(t){t=ct(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=ct(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=ct(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+H(this.x)+", "+H(this.y)+")"}};function ct(t,e,i){return t instanceof pt?t:E(t)?new pt(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new pt(t.x,t.y):new pt(t,e,i)}function kt(t,e){if(t)for(var i=e?[t,e]:t,s=0,c=i.length;s<c;s++)this.extend(i[s])}kt.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof pt||typeof t[0]=="number"||"x"in t)e=i=ct(t);else if(t=Dt(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return ct((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return ct(this.min.x,this.max.y)},getTopRight:function(){return ct(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof pt?t=ct(t):t=Dt(t),t instanceof kt?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=Dt(t);var e=this.min,i=this.max,s=t.min,c=t.max,m=c.x>=e.x&&s.x<=i.x,k=c.y>=e.y&&s.y<=i.y;return m&&k},overlaps:function(t){t=Dt(t);var e=this.min,i=this.max,s=t.min,c=t.max,m=c.x>e.x&&s.x<i.x,k=c.y>e.y&&s.y<i.y;return m&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,s=Math.abs(e.x-i.x)*t,c=Math.abs(e.y-i.y)*t;return Dt(ct(e.x-s,e.y-c),ct(i.x+s,i.y+c))},equals:function(t){return t?(t=Dt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Dt(t,e){return!t||t instanceof kt?t:new kt(t,e)}function be(t,e){if(t)for(var i=e?[t,e]:t,s=0,c=i.length;s<c;s++)this.extend(i[s])}be.prototype={extend:function(t){var e=this._southWest,i=this._northEast,s,c;if(t instanceof xt)s=t,c=t;else if(t instanceof be){if(s=t._southWest,c=t._northEast,!s||!c)return this}else return t?this.extend(st(t)||Mt(t)):this;return!e&&!i?(this._southWest=new xt(s.lat,s.lng),this._northEast=new xt(c.lat,c.lng)):(e.lat=Math.min(s.lat,e.lat),e.lng=Math.min(s.lng,e.lng),i.lat=Math.max(c.lat,i.lat),i.lng=Math.max(c.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,s=Math.abs(e.lat-i.lat)*t,c=Math.abs(e.lng-i.lng)*t;return new be(new xt(e.lat-s,e.lng-c),new xt(i.lat+s,i.lng+c))},getCenter:function(){return new xt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xt(this.getNorth(),this.getWest())},getSouthEast:function(){return new xt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof xt||"lat"in t?t=st(t):t=Mt(t);var e=this._southWest,i=this._northEast,s,c;return t instanceof be?(s=t.getSouthWest(),c=t.getNorthEast()):s=c=t,s.lat>=e.lat&&c.lat<=i.lat&&s.lng>=e.lng&&c.lng<=i.lng},intersects:function(t){t=Mt(t);var e=this._southWest,i=this._northEast,s=t.getSouthWest(),c=t.getNorthEast(),m=c.lat>=e.lat&&s.lat<=i.lat,k=c.lng>=e.lng&&s.lng<=i.lng;return m&&k},overlaps:function(t){t=Mt(t);var e=this._southWest,i=this._northEast,s=t.getSouthWest(),c=t.getNorthEast(),m=c.lat>e.lat&&s.lat<i.lat,k=c.lng>e.lng&&s.lng<i.lng;return m&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=Mt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Mt(t,e){return t instanceof be?t:new be(t,e)}function xt(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}xt.prototype={equals:function(t,e){if(!t)return!1;t=st(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+H(this.lat,t)+", "+H(this.lng,t)+")"},distanceTo:function(t){return ve.distance(this,st(t))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return Mt([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new xt(this.lat,this.lng,this.alt)}};function st(t,e,i){return t instanceof xt?t:E(t)&&typeof t[0]!="object"?t.length===3?new xt(t[0],t[1],t[2]):t.length===2?new xt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new xt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new xt(t,e,i)}var Nt={latLngToPoint:function(t,e){var i=this.projection.project(t),s=this.scale(e);return this.transformation._transform(i,s)},pointToLatLng:function(t,e){var i=this.scale(e),s=this.transformation.untransform(t,i);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),s=this.transformation.transform(e.min,i),c=this.transformation.transform(e.max,i);return new kt(s,c)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?C(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?C(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new xt(i,e,s)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),s=e.lat-i.lat,c=e.lng-i.lng;if(s===0&&c===0)return t;var m=t.getSouthWest(),k=t.getNorthEast(),R=new xt(m.lat-s,m.lng-c),$=new xt(k.lat-s,k.lng-c);return new be(R,$)}},ve=u({},Nt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,s=t.lat*i,c=e.lat*i,m=Math.sin((e.lat-t.lat)*i/2),k=Math.sin((e.lng-t.lng)*i/2),R=m*m+Math.cos(s)*Math.cos(c)*k*k,$=2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R));return this.R*$}}),en=6378137,le={R:en,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,s=Math.max(Math.min(i,t.lat),-i),c=Math.sin(s*e);return new pt(this.R*t.lng*e,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(t){var e=180/Math.PI;return new xt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=en*Math.PI;return new kt([-t,-t],[t,t])}()};function Lt(t,e,i,s){if(E(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=s}Lt.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new pt((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function gt(t,e,i,s){return new Lt(t,e,i,s)}var me=u({},ve,{code:"EPSG:3857",projection:le,transformation:function(){var t=.5/(Math.PI*le.R);return gt(t,.5,-t,.5)}()}),nn=u({},me,{code:"EPSG:900913"});function Le(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function lr(t,e){var i="",s,c,m,k,R,$;for(s=0,m=t.length;s<m;s++){for(R=t[s],c=0,k=R.length;c<k;c++)$=R[c],i+=(c?"L":"M")+$.x+" "+$.y;i+=e?vt.svg?"z":"x":""}return i||"M0 0"}var Ue=document.documentElement.style,rn="ActiveXObject"in window,vn=rn&&!document.addEventListener,zn="msLaunchUri"in navigator&&!("documentMode"in document),Pn=Ye("webkit"),jt=Ye("android"),Oe=Ye("android 2")||Ye("android 3"),on=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),mn=jt&&Ye("Google")&&on<537&&!("AudioNode"in window),an=!!window.opera,Rn=!zn&&Ye("chrome"),sn=Ye("gecko")&&!Pn&&!an&&!rn,we=!Rn&&Ye("safari"),gn=Ye("phantom"),fr="OTransition"in Ue,Er=navigator.platform.indexOf("Win")===0,$e=rn&&"transition"in Ue,un="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oe,Nn="MozPerspective"in Ue,Zn=!window.L_DISABLE_3D&&($e||un||Nn)&&!fr&&!gn,Ln=typeof orientation<"u"||Ye("mobile"),kr=Ln&&Pn,hr=Ln&&un,ti=!window.PointerEvent&&window.MSPointerEvent,Mi=!!(window.PointerEvent||ti),Mr="ontouchstart"in window||!!window.TouchEvent,Ee=!window.L_NO_TOUCH&&(Mr||Mi),Do=Ln&&an,$n=Ln&&sn,Go=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,io=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",D,e),window.removeEventListener("testPassiveEventSupport",D,e)}catch{}return t}(),oo=function(){return!!document.createElement("canvas").getContext}(),cr=!!(document.createElementNS&&Le("svg").createSVGRect),ao=!!cr&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ho=!cr&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),Si=navigator.platform.indexOf("Mac")===0,so=navigator.platform.indexOf("Linux")===0;function Ye(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var vt={ie:rn,ielt9:vn,edge:zn,webkit:Pn,android:jt,android23:Oe,androidStock:mn,opera:an,chrome:Rn,gecko:sn,safari:we,phantom:gn,opera12:fr,win:Er,ie3d:$e,webkit3d:un,gecko3d:Nn,any3d:Zn,mobile:Ln,mobileWebkit:kr,mobileWebkit3d:hr,msPointer:ti,pointer:Mi,touch:Ee,touchNative:Mr,mobileOpera:Do,mobileGecko:$n,retina:Go,passiveEvents:io,canvas:oo,svg:cr,vml:Ho,inlineSvg:ao,mac:Si,linux:so},Ti=vt.msPointer?"MSPointerDown":"pointerdown",dr=vt.msPointer?"MSPointerMove":"pointermove",ei=vt.msPointer?"MSPointerUp":"pointerup",Fn=vt.msPointer?"MSPointerCancel":"pointercancel",Sr={touchstart:Ti,touchmove:dr,touchend:ei,touchcancel:Fn},ni={touchstart:Tr,touchmove:kn,touchend:kn,touchcancel:kn},En={},Dn=!1;function Wo(t,e,i){return e==="touchstart"&&Uo(),ni[e]?(i=ni[e].bind(this,i),t.addEventListener(Sr[e],i,!1),i):(console.warn("wrong event specified:",e),D)}function uo(t,e,i){if(!Sr[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Sr[e],i,!1)}function qo(t){En[t.pointerId]=t}function lo(t){En[t.pointerId]&&(En[t.pointerId]=t)}function fo(t){delete En[t.pointerId]}function Uo(){Dn||(document.addEventListener(Ti,qo,!0),document.addEventListener(dr,lo,!0),document.addEventListener(ei,fo,!0),document.addEventListener(Fn,fo,!0),Dn=!0)}function kn(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in En)e.touches.push(En[i]);e.changedTouches=[e],t(e)}}function Tr(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&he(e),kn(t,e)}function ho(t){var e={},i,s;for(s in t)i=t[s],e[s]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Ct=200;function Gn(t,e){t.addEventListener("dblclick",e);var i=0,s;function c(m){if(m.detail!==1){s=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var k=Ni(m);if(!(k.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!k.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var R=Date.now();R-i<=Ct?(s++,s===2&&e(ho(m))):s=1,i=R}}}return t.addEventListener("click",c),{dblclick:e,simDblclick:c}}function Yo(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Ci=Ir(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Hn=Ir(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Wn=Hn==="webkitTransition"||Hn==="OTransition"?Hn+"End":"transitionend";function ri(t){return typeof t=="string"?document.getElementById(t):t}function fe(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);i=s?s[e]:null}return i==="auto"?null:i}function Ft(t,e,i){var s=document.createElement(t);return s.className=e||"",i&&i.appendChild(s),s}function ne(t){var e=t.parentNode;e&&e.removeChild(t)}function ii(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function pr(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function vr(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Fe(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=oi(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function Pt(t,e){if(t.classList!==void 0)for(var i=tt(e),s=0,c=i.length;s<c;s++)t.classList.add(i[s]);else if(!Fe(t,e)){var m=oi(t);Ii(t,(m?m+" ":"")+e)}}function se(t,e){t.classList!==void 0?t.classList.remove(e):Ii(t,U((" "+oi(t)+" ").replace(" "+e+" "," ")))}function Ii(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function oi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function De(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Cr(t,e)}function Cr(t,e){var i=!1,s="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(s)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+s+"(opacity="+e+")"}function Ir(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function qn(t,e,i){var s=e||new pt(0,0);t.style[Ci]=(vt.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(i?" scale("+i+")":"")}function Ht(t,e){t._leaflet_pos=e,vt.any3d?qn(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Un(t){return t._leaflet_pos||new pt(0,0)}var Ar,Or,Ai;if("onselectstart"in document)Ar=function(){bt(window,"selectstart",he)},Or=function(){Vt(window,"selectstart",he)};else{var Br=Ir(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ar=function(){if(Br){var t=document.documentElement.style;Ai=t[Br],t[Br]="none"}},Or=function(){Br&&(document.documentElement.style[Br]=Ai,Ai=void 0)}}function ai(){bt(window,"dragstart",he)}function zr(){Vt(window,"dragstart",he)}var Rr,mr;function Oi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(_n(),Rr=t,mr=t.style.outlineStyle,t.style.outlineStyle="none",bt(window,"keydown",_n))}function _n(){Rr&&(Rr.style.outlineStyle=mr,Rr=void 0,mr=void 0,Vt(window,"keydown",_n))}function Bi(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function si(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Xo={__proto__:null,TRANSFORM:Ci,TRANSITION:Hn,TRANSITION_END:Wn,get:ri,getStyle:fe,create:Ft,remove:ne,empty:ii,toFront:pr,toBack:vr,hasClass:Fe,addClass:Pt,removeClass:se,setClass:Ii,getClass:oi,setOpacity:De,testProp:Ir,setTransform:qn,setPosition:Ht,getPosition:Un,get disableTextSelection(){return Ar},get enableTextSelection(){return Or},disableImageDrag:ai,enableImageDrag:zr,preventOutline:Oi,restoreOutline:_n,getSizedParentNode:Bi,getScale:si};function bt(t,e,i,s){if(e&&typeof e=="object")for(var c in e)Yn(t,c,e[c],i);else{e=tt(e);for(var m=0,k=e.length;m<k;m++)Yn(t,e[m],i,s)}return this}var ge="_leaflet_events";function Vt(t,e,i,s){if(arguments.length===1)zi(t),delete t[ge];else if(e&&typeof e=="object")for(var c in e)Nr(t,c,e[c],i);else if(e=tt(e),arguments.length===2)zi(t,function(R){return O(e,R)!==-1});else for(var m=0,k=e.length;m<k;m++)Nr(t,e[m],i,s);return this}function zi(t,e){for(var i in t[ge]){var s=i.split(/\d/)[0];(!e||e(s))&&Nr(t,s,null,null,i)}}var Ri={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yn(t,e,i,s){var c=e+_(i)+(s?"_"+_(s):"");if(t[ge]&&t[ge][c])return this;var m=function(R){return i.call(s||t,R||window.event)},k=m;!vt.touchNative&&vt.pointer&&e.indexOf("touch")===0?m=Wo(t,e,m):vt.touch&&e==="dblclick"?m=Gn(t,m):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Ri[e]||e,m,vt.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(m=function(R){R=R||window.event,$i(t,R)&&k(R)},t.addEventListener(Ri[e],m,!1)):t.addEventListener(e,k,!1):t.attachEvent("on"+e,m),t[ge]=t[ge]||{},t[ge][c]=m}function Nr(t,e,i,s,c){c=c||e+_(i)+(s?"_"+_(s):"");var m=t[ge]&&t[ge][c];if(!m)return this;!vt.touchNative&&vt.pointer&&e.indexOf("touch")===0?uo(t,e,m):vt.touch&&e==="dblclick"?Yo(t,m):"removeEventListener"in t?t.removeEventListener(Ri[e]||e,m,!1):t.detachEvent("on"+e,m),t[ge][c]=null}function Xn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ui(t){return Yn(t,"wheel",Xn),this}function ln(t){return bt(t,"mousedown touchstart dblclick contextmenu",Xn),t._leaflet_disable_click=!0,this}function he(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Vn(t){return he(t),Xn(t),this}function Ni(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function li(t,e){if(!e)return new pt(t.clientX,t.clientY);var i=si(e),s=i.boundingClientRect;return new pt((t.clientX-s.left)/i.x-e.clientLeft,(t.clientY-s.top)/i.y-e.clientTop)}var Zi=vt.linux&&vt.chrome?window.devicePixelRatio:vt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fi(t){return vt.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Zi:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function $i(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var Vo={__proto__:null,on:bt,off:Vt,stopPropagation:Xn,disableScrollPropagation:ui,disableClickPropagation:ln,preventDefault:he,stop:Vn,getPropagationPath:Ni,getMousePosition:li,getWheelDelta:fi,isExternalTarget:$i,addListener:bt,removeListener:Vt},co=Qt.extend({run:function(t,e,i,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Un(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Ht(this._el,i),this.fire("step")},_complete:function(){it(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),At=Qt.extend({options:{crs:me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=b(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(st(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Hn&&vt.any3d&&!vt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),bt(this._proxy,Wn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(st(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=u({animate:i.animate},i.zoom),i.pan=u({animate:i.animate,duration:i.duration},i.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var s=this.getZoomScale(e),c=this.getSize().divideBy(2),m=t instanceof pt?t:this.latLngToContainerPoint(t),k=m.subtract(c).multiplyBy(1-1/s),R=this.containerPointToLatLng(c.add(k));return this.setView(R,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():Mt(t);var i=ct(e.paddingTopLeft||e.padding||[0,0]),s=ct(e.paddingBottomRight||e.padding||[0,0]),c=this.getBoundsZoom(t,!1,i.add(s));if(c=typeof e.maxZoom=="number"?Math.min(e.maxZoom,c):c,c===1/0)return{center:t.getCenter(),zoom:c};var m=s.subtract(i).divideBy(2),k=this.project(t.getSouthWest(),c),R=this.project(t.getNorthEast(),c),$=this.unproject(k.add(R).divideBy(2).add(m),c);return{center:$,zoom:c}},fitBounds:function(t,e){if(t=Mt(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=ct(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new co,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Pt(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!vt.any3d)return this.setView(t,e,i);this._stop();var s=this.project(this.getCenter()),c=this.project(t),m=this.getSize(),k=this._zoom;t=st(t),e=e===void 0?k:e;var R=Math.max(m.x,m.y),$=R*this.getZoomScale(k,e),Y=c.distanceTo(s)||1,ot=1.42,_t=ot*ot;function St(ie){var Io=ie?-1:1,is=ie?$:R,os=$*$-R*R+Io*_t*_t*Y*Y,Ma=2*is*_t*Y,wr=os/Ma,Sa=Math.sqrt(wr*wr+1)-wr,Ta=Sa<1e-9?-18:Math.log(Sa);return Ta}function Se(ie){return(Math.exp(ie)-Math.exp(-ie))/2}function _e(ie){return(Math.exp(ie)+Math.exp(-ie))/2}function Qe(ie){return Se(ie)/_e(ie)}var Te=St(0);function vi(ie){return R*(_e(Te)/_e(Te+ot*ie))}function La(ie){return R*(_e(Te)*Qe(Te+ot*ie)-Se(Te))/_t}function Ea(ie){return 1-Math.pow(1-ie,1.5)}var ns=Date.now(),ka=(St(1)-Te)/ot,rs=i.duration?1e3*i.duration:1e3*ka*.8;function Co(){var ie=(Date.now()-ns)/rs,Io=Ea(ie)*ka;ie<=1?(this._flyToFrame=j(Co,this),this._move(this.unproject(s.add(c.subtract(s).multiplyBy(La(Io)/Y)),k),this.getScaleZoom(R/vi(Io),k),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),Co.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=Mt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),s=this._limitCenter(i,this._zoom,Mt(t));return i.equals(s)||this.panTo(s,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=ct(e.paddingTopLeft||e.padding||[0,0]),s=ct(e.paddingBottomRight||e.padding||[0,0]),c=this.project(this.getCenter()),m=this.project(t),k=this.getPixelBounds(),R=Dt([k.min.add(i),k.max.subtract(s)]),$=R.getSize();if(!R.contains(m)){this._enforcingBounds=!0;var Y=m.subtract(R.getCenter()),ot=R.extend(m).getSize().subtract($);c.x+=Y.x<0?-ot.x:ot.x,c.y+=Y.y<0?-ot.y:ot.y,this.panTo(this.unproject(c),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),s=e.divideBy(2).round(),c=i.divideBy(2).round(),m=s.subtract(c);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=p(this._handleGeolocationResponse,this),i=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,s=new xt(e,i),c=s.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var k=this.getBoundsZoom(c);this.setView(s,m.maxZoom?Math.min(k,m.maxZoom):k)}var R={latlng:s,bounds:c,timestamp:t.timestamp};for(var $ in t.coords)typeof t.coords[$]=="number"&&(R[$]=t.coords[$]);this.fire("locationfound",R)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(it(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)ne(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=Ft("div",i,e||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new be(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=Mt(t),i=ct(i||[0,0]);var s=this.getZoom()||0,c=this.getMinZoom(),m=this.getMaxZoom(),k=t.getNorthWest(),R=t.getSouthEast(),$=this.getSize().subtract(i),Y=Dt(this.project(R,s),this.project(k,s)).getSize(),ot=vt.any3d?this.options.zoomSnap:1,_t=$.x/Y.x,St=$.y/Y.y,Se=e?Math.max(_t,St):Math.min(_t,St);return s=this.getScaleZoom(Se,s),ot&&(s=Math.round(s/(ot/100))*(ot/100),s=e?Math.ceil(s/ot)*ot:Math.floor(s/ot)*ot),Math.max(c,Math.min(m,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new pt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new kt(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var s=i.zoom(t*i.scale(e));return isNaN(s)?1/0:s},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(st(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(ct(t),e)},layerPointToLatLng:function(t){var e=ct(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(st(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(st(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Mt(t))},distance:function(t,e){return this.options.crs.distance(st(t),st(e))},containerPointToLayerPoint:function(t){return ct(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return ct(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(ct(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(st(t)))},mouseEventToContainerPoint:function(t){return li(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ri(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");bt(e,"scroll",this._onScroll,this),this._containerId=_(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt.any3d,Pt(t,"leaflet-container"+(vt.touch?" leaflet-touch":"")+(vt.retina?" leaflet-retina":"")+(vt.ielt9?" leaflet-oldie":"")+(vt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=fe(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ht(this._mapPane,new pt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pt(t.markerPane,"leaflet-zoom-hide"),Pt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){Ht(this._mapPane,new pt(0,0));var s=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var c=this._zoom!==e;this._moveStart(c,i)._move(t,e)._moveEnd(c),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,s){e===void 0&&(e=this._zoom);var c=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?i&&i.pinch&&this.fire("zoom",i):((c||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return it(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Ht(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[_(this._container)]=this;var e=t?Vt:bt;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){it(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],s,c=e==="mouseout"||e==="mouseover",m=t.target||t.srcElement,k=!1;m;){if(s=this._targets[_(m)],s&&(e==="click"||e==="preclick")&&this._draggableMoved(s)){k=!0;break}if(s&&s.listens(e,!0)&&(c&&!$i(m,t)||(i.push(s),c))||m===this._container)break;m=m.parentNode}return!i.length&&!k&&!c&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&Oi(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var s=u({},t);s.type="preclick",this._fireDOMEvent(s,s.type,i)}var c=this._findEventTargets(t,e);if(i){for(var m=[],k=0;k<i.length;k++)i[k].listens(e,!0)&&m.push(i[k]);c=m.concat(c)}if(c.length){e==="contextmenu"&&he(t);var R=c[0],$={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Y=R.getLatLng&&(!R._radius||R._radius<=10);$.containerPoint=Y?this.latLngToContainerPoint(R.getLatLng()):this.mouseEventToContainerPoint(t),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Y?R.getLatLng():this.layerPointToLatLng($.layerPoint)}for(k=0;k<c.length;k++)if(c[k].fire(e,$,!0),$.originalEvent._stopped||c[k].options.bubblingMouseEvents===!1&&O(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Un(this._mapPane)||new pt(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var s=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,e,i){var s=this._getNewPixelOrigin(i,e);return Dt([this.project(t.getSouthWest(),e)._subtract(s),this.project(t.getNorthWest(),e)._subtract(s),this.project(t.getSouthEast(),e)._subtract(s),this.project(t.getNorthEast(),e)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var s=this.project(t,e),c=this.getSize().divideBy(2),m=new kt(s.subtract(c),s.add(c)),k=this._getBoundsOffset(m,i,e);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?t:this.unproject(s.add(k),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),s=new kt(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(s,e))},_getBoundsOffset:function(t,e,i){var s=Dt(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),c=s.min.subtract(t.min),m=s.max.subtract(t.max),k=this._rebound(c.x,-m.x),R=this._rebound(c.y,-m.y);return new pt(k,R)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),s=vt.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=Ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=Ci,s=this._proxy.style[i];qn(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),s===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();qn(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(e),c=this._getCenterOffset(t)._divideBy(1-1/s);return i.animate!==!0&&!this.getSize().contains(c)?!1:(j(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,s){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Fi(t,e){return new At(t,e)}var Xe=ft.extend({options:{position:"topright"},initialize:function(t){b(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),s=t._controlCorners[i];return Pt(e,"leaflet-control"),i.indexOf("bottom")!==-1?s.insertBefore(e,s.firstChild):s.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Jn=function(t){return new Xe(t)};At.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=Ft("div",e+"control-container",this._container);function s(c,m){var k=e+c+" "+e+m;t[c+m]=Ft("div",k,i)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ne(this._controlCorners[t]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var po=Xe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,s){return i<s?-1:s<i?1:0}},initialize:function(t,e,i){b(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in e)this._addLayer(e[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Xe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(_(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Ft("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ln(e),ui(e);var s=this._section=Ft("section",t+"-list");i&&(this._map.on("click",this.collapse,this),bt(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var c=this._layersLink=Ft("a",t+"-toggle",e);c.href="#",c.title="Layers",c.setAttribute("role","button"),bt(c,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){he(m),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=Ft("div",t+"-base",s),this._separator=Ft("div",t+"-separator",s),this._overlaysList=Ft("div",t+"-overlays",s),e.appendChild(s)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&_(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(p(function(s,c){return this.options.sortFunction(s.layer,c.layer,s.name,c.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ii(this._baseLayersList),ii(this._overlaysList),this._layerControlInputs=[];var t,e,i,s,c=0;for(i=0;i<this._layers.length;i++)s=this._layers[i],this._addItem(s),e=e||s.overlay,t=t||!s.overlay,c+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&c>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(_(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=i,s.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=i):s=this._createRadioElement("leaflet-base-layers_"+_(this),i),this._layerControlInputs.push(s),s.layerId=_(t.layer),bt(s,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+t.name;var m=document.createElement("span");e.appendChild(m),m.appendChild(s),m.appendChild(c);var k=t.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,s=[],c=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)e=t[m],i=this._getLayer(e.layerId).layer,e.checked?s.push(i):e.checked||c.push(i);for(m=0;m<c.length;m++)this._map.hasLayer(c[m])&&this._map.removeLayer(c[m]);for(m=0;m<s.length;m++)this._map.hasLayer(s[m])||this._map.addLayer(s[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,s=this._map.getZoom(),c=t.length-1;c>=0;c--)e=t[c],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&s<i.options.minZoom||i.options.maxZoom!==void 0&&s>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,bt(t,"click",he),this.expand();var e=this;setTimeout(function(){Vt(t,"click",he),e._preventClick=!1})}}),Jo=function(t,e,i){return new po(t,e,i)},Di=Xe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=Ft("div",e+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,s,c){var m=Ft("a",i,s);return m.innerHTML=t,m.href="#",m.title=e,m.setAttribute("role","button"),m.setAttribute("aria-label",e),ln(m),bt(m,"click",Vn),bt(m,"click",c,this),bt(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";se(this._zoomInButton,e),se(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Pt(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Pt(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});At.mergeOptions({zoomControl:!0}),At.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Di,this.addControl(this.zoomControl))});var Ko=function(t){return new Di(t)},vo=Xe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=Ft("div",e),s=this.options;return this._addScales(s,e+"-line",i),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=Ft("div",e,i)),t.imperial&&(this._iScale=Ft("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,s,c;e>5280?(i=e/5280,s=this._getRoundNum(i),this._updateScale(this._iScale,s+" mi",s/i)):(c=this._getRoundNum(e),this._updateScale(this._iScale,c+" ft",c/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),mo=function(t){return new vo(t)},go='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Zr=Xe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(vt.inlineSvg?go+" ":"")+"Leaflet</a>"},initialize:function(t){b(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ft("div","leaflet-control-attribution"),ln(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});At.mergeOptions({attributionControl:!0}),At.addInitHook(function(){this.options.attributionControl&&new Zr().addTo(this)});var Qo=function(t){return new Zr(t)};Xe.Layers=po,Xe.Zoom=Di,Xe.Scale=vo,Xe.Attribution=Zr,Jn.layers=Jo,Jn.zoom=Ko,Jn.scale=mo,Jn.attribution=Qo;var fn=ft.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(t,e){return t.addHandler(e,this),this};var jo={Events:Rt},_o=vt.touch?"touchstart mousedown":"mousedown",yn=Qt.extend({options:{clickTolerance:3},initialize:function(t,e,i,s){b(this,s),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(bt(this._dragStartTarget,_o,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yn._dragging===this&&this.finishDrag(!0),Vt(this._dragStartTarget,_o,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Fe(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){yn._dragging===this&&this.finishDrag();return}if(!(yn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(yn._dragging=this,this._preventOutline&&Oi(this._element),ai(),Ar(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=Bi(this._element);this._startPoint=new pt(e.clientX,e.clientY),this._startPos=Un(this._element),this._parentScale=si(i);var s=t.type==="mousedown";bt(document,s?"mousemove":"touchmove",this._onMove,this),bt(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new pt(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,he(t),this._moved||(this.fire("dragstart"),this._moved=!0,Pt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Ht(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){se(document.body,"leaflet-dragging"),this._lastTarget&&(se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vt(document,"mousemove touchmove",this._onMove,this),Vt(document,"mouseup touchend touchcancel",this._onUp,this),zr(),Or();var e=this._moved&&this._moving;this._moving=!1,yn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function yo(t,e,i){var s,c=[1,4,2,8],m,k,R,$,Y,ot,_t,St;for(m=0,ot=t.length;m<ot;m++)t[m]._code=bn(t[m],e);for(R=0;R<4;R++){for(_t=c[R],s=[],m=0,ot=t.length,k=ot-1;m<ot;k=m++)$=t[m],Y=t[k],$._code&_t?Y._code&_t||(St=hi(Y,$,_t,e,i),St._code=bn(St,e),s.push(St)):(Y._code&_t&&(St=hi(Y,$,_t,e,i),St._code=bn(St,e),s.push(St)),s.push($));t=s}return t}function bo(t,e){var i,s,c,m,k,R,$,Y,ot;if(!t||t.length===0)throw new Error("latlngs not passed");xe(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var _t=st([0,0]),St=Mt(t),Se=St.getNorthWest().distanceTo(St.getSouthWest())*St.getNorthEast().distanceTo(St.getNorthWest());Se<1700&&(_t=Gi(t));var _e=t.length,Qe=[];for(i=0;i<_e;i++){var Te=st(t[i]);Qe.push(e.project(st([Te.lat-_t.lat,Te.lng-_t.lng])))}for(R=$=Y=0,i=0,s=_e-1;i<_e;s=i++)c=Qe[i],m=Qe[s],k=c.y*m.x-m.y*c.x,$+=(c.x+m.x)*k,Y+=(c.y+m.y)*k,R+=k*3;R===0?ot=Qe[0]:ot=[$/R,Y/R];var vi=e.unproject(ct(ot));return st([vi.lat+_t.lat,vi.lng+_t.lng])}function Gi(t){for(var e=0,i=0,s=0,c=0;c<t.length;c++){var m=st(t[c]);e+=m.lat,i+=m.lng,s++}return st([e/s,i/s])}var wo={__proto__:null,clipPolygon:yo,polygonCenter:bo,centroid:Gi};function $r(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=ta(t,i),t=Po(t,i),t}function xo(t,e,i){return Math.sqrt(wn(t,e,i,!0))}function gr(t,e,i){return wn(t,e,i)}function Po(t,e){var i=t.length,s=typeof Uint8Array!=void 0+""?Uint8Array:Array,c=new s(i);c[0]=c[i-1]=1,Be(t,c,e,0,i-1);var m,k=[];for(m=0;m<i;m++)c[m]&&k.push(t[m]);return k}function Be(t,e,i,s,c){var m=0,k,R,$;for(R=s+1;R<=c-1;R++)$=wn(t[R],t[s],t[c],!0),$>m&&(k=R,m=$);m>i&&(e[k]=1,Be(t,e,i,s,k),Be(t,e,i,k,c))}function ta(t,e){for(var i=[t[0]],s=1,c=0,m=t.length;s<m;s++)ea(t[s],t[c])>e&&(i.push(t[s]),c=s);return c<m-1&&i.push(t[m-1]),i}var Lo;function Eo(t,e,i,s,c){var m=s?Lo:bn(t,i),k=bn(e,i),R,$,Y;for(Lo=k;;){if(!(m|k))return[t,e];if(m&k)return!1;R=m||k,$=hi(t,e,R,i,c),Y=bn($,i),R===m?(t=$,m=Y):(e=$,k=Y)}}function hi(t,e,i,s,c){var m=e.x-t.x,k=e.y-t.y,R=s.min,$=s.max,Y,ot;return i&8?(Y=t.x+m*($.y-t.y)/k,ot=$.y):i&4?(Y=t.x+m*(R.y-t.y)/k,ot=R.y):i&2?(Y=$.x,ot=t.y+k*($.x-t.x)/m):i&1&&(Y=R.x,ot=t.y+k*(R.x-t.x)/m),new pt(Y,ot,c)}function bn(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function ea(t,e){var i=e.x-t.x,s=e.y-t.y;return i*i+s*s}function wn(t,e,i,s){var c=e.x,m=e.y,k=i.x-c,R=i.y-m,$=k*k+R*R,Y;return $>0&&(Y=((t.x-c)*k+(t.y-m)*R)/$,Y>1?(c=i.x,m=i.y):Y>0&&(c+=k*Y,m+=R*Y)),k=t.x-c,R=t.y-m,s?k*k+R*R:new pt(c,m)}function xe(t){return!E(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function ci(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xe(t)}function _r(t,e){var i,s,c,m,k,R,$,Y;if(!t||t.length===0)throw new Error("latlngs not passed");xe(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ot=st([0,0]),_t=Mt(t),St=_t.getNorthWest().distanceTo(_t.getSouthWest())*_t.getNorthEast().distanceTo(_t.getNorthWest());St<1700&&(ot=Gi(t));var Se=t.length,_e=[];for(i=0;i<Se;i++){var Qe=st(t[i]);_e.push(e.project(st([Qe.lat-ot.lat,Qe.lng-ot.lng])))}for(i=0,s=0;i<Se-1;i++)s+=_e[i].distanceTo(_e[i+1])/2;if(s===0)Y=_e[0];else for(i=0,m=0;i<Se-1;i++)if(k=_e[i],R=_e[i+1],c=k.distanceTo(R),m+=c,m>s){$=(m-s)/c,Y=[R.x-$*(R.x-k.x),R.y-$*(R.y-k.y)];break}var Te=e.unproject(ct(Y));return st([Te.lat+ot.lat,Te.lng+ot.lng])}var ko={__proto__:null,simplify:$r,pointToSegmentDistance:xo,closestPointOnSegment:gr,clipSegment:Eo,_getEdgeIntersection:hi,_getBitCode:bn,_sqClosestPointOnSegment:wn,isFlat:xe,_flat:ci,polylineCenter:_r},Fr={project:function(t){return new pt(t.lng,t.lat)},unproject:function(t){return new xt(t.y,t.x)},bounds:new kt([-180,-90],[180,90])},Hi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new kt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,s=t.lat*e,c=this.R_MINOR/i,m=Math.sqrt(1-c*c),k=m*Math.sin(s),R=Math.tan(Math.PI/4-s/2)/Math.pow((1-k)/(1+k),m/2);return s=-i*Math.log(Math.max(R,1e-10)),new pt(t.lng*e*i,s)},unproject:function(t){for(var e=180/Math.PI,i=this.R,s=this.R_MINOR/i,c=Math.sqrt(1-s*s),m=Math.exp(-t.y/i),k=Math.PI/2-2*Math.atan(m),R=0,$=.1,Y;R<15&&Math.abs($)>1e-7;R++)Y=c*Math.sin(k),Y=Math.pow((1-Y)/(1+Y),c/2),$=Math.PI/2-2*Math.atan(m*Y)-k,k+=$;return new xt(k*e,t.x*e/i)}},Mo={__proto__:null,LonLat:Fr,Mercator:Hi,SphericalMercator:le},di=u({},ve,{code:"EPSG:3395",projection:Hi,transformation:function(){var t=.5/(Math.PI*Hi.R);return gt(t,.5,-t,.5)}()}),Ge=u({},ve,{code:"EPSG:4326",projection:Fr,transformation:gt(1/180,1,-1/180,.5)}),na=u({},Nt,{projection:Fr,transformation:gt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,s=e.lat-t.lat;return Math.sqrt(i*i+s*s)},infinite:!0});Nt.Earth=ve,Nt.EPSG3395=di,Nt.EPSG3857=me,Nt.EPSG900913=nn,Nt.EPSG4326=Ge,Nt.Simple=na;var He=Qt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[_(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[_(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});At.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=_(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=_(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return _(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?E(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[_(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=_(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var s in this._zoomBoundLayers){var c=this._zoomBoundLayers[s].options;t=c.minZoom===void 0?t:Math.min(t,c.minZoom),e=c.maxZoom===void 0?e:Math.max(e,c.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xn=He.extend({initialize:function(t,e){b(this,e),this._layers={};var i,s;if(t)for(i=0,s=t.length;i<s;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,s;for(i in this._layers)s=this._layers[i],s[t]&&s[t].apply(s,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return _(t)}}),ra=function(t,e){return new xn(t,e)},ke=xn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),xn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),xn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new be;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),yr=function(t,e){return new ke(t,e)},ue=ft.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){b(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,e){var i=this.options,s=i[e+"Size"];typeof s=="number"&&(s=[s,s]);var c=ct(s),m=ct(e==="shadow"&&i.shadowAnchor||i.iconAnchor||c&&c.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),c&&(t.style.width=c.x+"px",t.style.height=c.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return vt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Kn(t){return new ue(t)}var Qn=ue.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Qn.imagePath!="string"&&(Qn.imagePath=this._detectIconPath()),(this.options.imagePath||Qn.imagePath)+ue.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,s,c){var m=s.exec(i);return m&&m[c]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ft("div","leaflet-default-icon-path",document.body),e=fe(t,"background-image")||fe(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Dr=fn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new yn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,s=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,m=Un(e._icon),k=i.getPixelBounds(),R=i.getPixelOrigin(),$=Dt(k.min._subtract(R).add(c),k.max._subtract(R).subtract(c));if(!$.contains(m)){var Y=ct((Math.max($.max.x,m.x)-$.max.x)/(k.max.x-$.max.x)-(Math.min($.min.x,m.x)-$.min.x)/(k.min.x-$.min.x),(Math.max($.max.y,m.y)-$.max.y)/(k.max.y-$.max.y)-(Math.min($.min.y,m.y)-$.min.y)/(k.min.y-$.min.y)).multiplyBy(s);i.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),Ht(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=j(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(it(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,s=Un(e._icon),c=e._map.layerPointToLatLng(s);i&&Ht(i,s),e._latlng=c,t.latlng=c,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){it(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Gr=He.extend({options:{icon:new Qn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){b(this,e),this._latlng=st(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=st(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),s=!1;i!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),Pt(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bt(i,"focus",this._panOnFocus,this);var c=t.icon.createShadow(this._shadow),m=!1;c!==this._shadow&&(this._removeShadow(),m=!0),c&&(Pt(c,e),c.alt=""),this._shadow=c,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vt(this._icon,"focus",this._panOnFocus,this),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Ht(this._icon,t),this._shadow&&Ht(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Dr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Dr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&De(this._icon,t),this._shadow&&De(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?ct(e.iconSize):ct(0,0),s=e.iconAnchor?ct(e.iconAnchor):ct(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:i.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pi(t,e){return new Gr(t,e)}var Ve=He.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return b(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Me=Ve.extend({options:{fill:!0,radius:10},initialize:function(t,e){b(this,e),this._latlng=st(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=st(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Ve.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),s=[t+i,e+i];this._pxBounds=new kt(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Mn(t,e){return new Me(t,e)}var Hr=Me.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=u({},i,{radius:e})),b(this,e),this._latlng=st(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new be(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ve.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,s=i.options.crs;if(s.distance===ve.distance){var c=Math.PI/180,m=this._mRadius/ve.R/c,k=i.project([e+m,t]),R=i.project([e-m,t]),$=k.add(R).divideBy(2),Y=i.unproject($).lat,ot=Math.acos((Math.cos(m*c)-Math.sin(e*c)*Math.sin(Y*c))/(Math.cos(e*c)*Math.cos(Y*c)))/c;(isNaN(ot)||ot===0)&&(ot=m/Math.cos(Math.PI/180*e)),this._point=$.subtract(i.getPixelOrigin()),this._radius=isNaN(ot)?0:$.x-i.project([Y,t-ot]).x,this._radiusY=$.y-k.y}else{var _t=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(_t).x}this._updateBounds()}});function Wr(t,e,i){return new Hr(t,e,i)}var ze=Ve.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){b(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,s=wn,c,m,k=0,R=this._parts.length;k<R;k++)for(var $=this._parts[k],Y=1,ot=$.length;Y<ot;Y++){c=$[Y-1],m=$[Y];var _t=s(t,c,m,!0);_t<e&&(e=_t,i=s(t,c,m))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _r(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=st(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new be,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return xe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=xe(t),s=0,c=t.length;s<c;s++)i?(e[s]=st(t[s]),this._bounds.extend(e[s])):e[s]=this._convertLatLngs(t[s]);return e},_project:function(){var t=new kt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new pt(t,t);this._rawPxBounds&&(this._pxBounds=new kt([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var s=t[0]instanceof xt,c=t.length,m,k;if(s){for(k=[],m=0;m<c;m++)k[m]=this._map.latLngToLayerPoint(t[m]),i.extend(k[m]);e.push(k)}else for(m=0;m<c;m++)this._projectLatlngs(t[m],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,s,c,m,k,R,$;for(i=0,c=0,m=this._rings.length;i<m;i++)for($=this._rings[i],s=0,k=$.length;s<k-1;s++)R=Eo($[s],$[s+1],t,s,!0),R&&(e[c]=e[c]||[],e[c].push(R[0]),(R[1]!==$[s+1]||s===k-2)&&(e[c].push(R[1]),c++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,s=t.length;i<s;i++)t[i]=$r(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,s,c,m,k,R,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,m=this._parts.length;i<m;i++)for(R=this._parts[i],s=0,k=R.length,c=k-1;s<k;c=s++)if(!(!e&&s===0)&&xo(t,R[c],R[s])<=$)return!0;return!1}});function Wi(t,e){return new ze(t,e)}ze._flat=ci;var hn=ze.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=ze.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof xt&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){ze.prototype._setLatLngs.call(this,t),xe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new pt(e,e);if(t=new kt(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,c=this._rings.length,m;s<c;s++)m=yo(this._rings[s],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,s,c,m,k,R,$,Y;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,$=this._parts.length;m<$;m++)for(i=this._parts[m],k=0,Y=i.length,R=Y-1;k<Y;R=k++)s=i[k],c=i[R],s.y>t.y!=c.y>t.y&&t.x<(c.x-s.x)*(t.y-s.y)/(c.y-s.y)+s.x&&(e=!e);return e||ze.prototype._containsPoint.call(this,t,!0)}});function So(t,e){return new hn(t,e)}var Je=ke.extend({initialize:function(t,e){b(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=E(t)?t:t.features,i,s,c;if(e){for(i=0,s=e.length;i<s;i++)c=e[i],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var k=Ke(t,m);return k?(k.feature=tr(t),k.defaultOptions=k.options,this.resetStyle(k),m.onEachFeature&&m.onEachFeature(t,k),this.addLayer(k)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function Ke(t,e){var i=t.type==="Feature"?t.geometry:t,s=i?i.coordinates:null,c=[],m=e&&e.pointToLayer,k=e&&e.coordsToLatLng||Ui,R,$,Y,ot;if(!s&&!i)return null;switch(i.type){case"Point":return R=k(s),qi(m,t,R,e);case"MultiPoint":for(Y=0,ot=s.length;Y<ot;Y++)R=k(s[Y]),c.push(qi(m,t,R,e));return new ke(c);case"LineString":case"MultiLineString":return $=qr(s,i.type==="LineString"?0:1,k),new ze($,e);case"Polygon":case"MultiPolygon":return $=qr(s,i.type==="Polygon"?1:2,k),new hn($,e);case"GeometryCollection":for(Y=0,ot=i.geometries.length;Y<ot;Y++){var _t=Ke({geometry:i.geometries[Y],type:"Feature",properties:t.properties},e);_t&&c.push(_t)}return new ke(c);case"FeatureCollection":for(Y=0,ot=i.features.length;Y<ot;Y++){var St=Ke(i.features[Y],e);St&&c.push(St)}return new ke(c);default:throw new Error("Invalid GeoJSON object.")}}function qi(t,e,i,s){return t?t(e,i):new Gr(i,s&&s.markersInheritOptions&&s)}function Ui(t){return new xt(t[1],t[0],t[2])}function qr(t,e,i){for(var s=[],c=0,m=t.length,k;c<m;c++)k=e?qr(t[c],e-1,i):(i||Ui)(t[c]),s.push(k);return s}function Ur(t,e){return t=st(t),t.alt!==void 0?[H(t.lng,e),H(t.lat,e),H(t.alt,e)]:[H(t.lng,e),H(t.lat,e)]}function jn(t,e,i,s){for(var c=[],m=0,k=t.length;m<k;m++)c.push(e?jn(t[m],xe(t[m])?0:e-1,i,s):Ur(t[m],s));return!e&&i&&c.length>0&&c.push(c[0].slice()),c}function cn(t,e){return t.feature?u({},t.feature,{geometry:e}):tr(e)}function tr(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var h={toGeoJSON:function(t){return cn(this,{type:"Point",coordinates:Ur(this.getLatLng(),t)})}};Gr.include(h),Hr.include(h),Me.include(h),ze.include({toGeoJSON:function(t){var e=!xe(this._latlngs),i=jn(this._latlngs,e?1:0,!1,t);return cn(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),hn.include({toGeoJSON:function(t){var e=!xe(this._latlngs),i=e&&!xe(this._latlngs[0]),s=jn(this._latlngs,i?2:e?1:0,!0,t);return e||(s=[s]),cn(this,{type:(i?"Multi":"")+"Polygon",coordinates:s})}}),xn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),cn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",s=[];return this.eachLayer(function(c){if(c.toGeoJSON){var m=c.toGeoJSON(t);if(i)s.push(m.geometry);else{var k=tr(m);k.type==="FeatureCollection"?s.push.apply(s,k.features):s.push(k)}}}),i?cn(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function g(t,e){return new Je(t,e)}var P=g,F=He.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=Mt(e),b(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&pr(this._image),this},bringToBack:function(){return this._map&&vr(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Mt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:Ft("img");if(Pt(e,"leaflet-image-layer"),this._zoomAnimated&&Pt(e,"leaflet-zoom-animated"),this.options.className&&Pt(e,this.options.className),e.onselectstart=D,e.onmousemove=D,e.onload=p(this.fire,this,"load"),e.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;qn(this._image,i,e)},_reset:function(){var t=this._image,e=new kt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Ht(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){De(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),nt=function(t,e,i){return new F(t,e,i)},J=F.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:Ft("video");if(Pt(e,"leaflet-image-layer"),this._zoomAnimated&&Pt(e,"leaflet-zoom-animated"),this.options.className&&Pt(e,this.options.className),e.onselectstart=D,e.onmousemove=D,e.onloadeddata=p(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),s=[],c=0;c<i.length;c++)s.push(i[c].src);this._url=i.length>0?s:[e.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var k=Ft("source");k.src=this._url[m],e.appendChild(k)}}});function ut(t,e,i){return new J(t,e,i)}var lt=F.extend({_initImage:function(){var t=this._image=this._url;Pt(t,"leaflet-image-layer"),this._zoomAnimated&&Pt(t,"leaflet-zoom-animated"),this.options.className&&Pt(t,this.options.className),t.onselectstart=D,t.onmousemove=D}});function wt(t,e,i){return new lt(t,e,i)}var Et=He.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof xt||E(t))?(this._latlng=st(t),b(this,e)):(b(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&De(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&De(this._container,1),this.bringToFront(),this.options.interactive&&(Pt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(De(this._container,0),this._removeTimeout=setTimeout(p(ne,void 0,this._container),200)):ne(this._container),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=st(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pr(this._container),this},bringToBack:function(){return this._map&&vr(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof ke){e=null;var i=this._source._layers;for(var s in i)if(i[s]._map){e=i[s];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=ct(this.options.offset),i=this._getAnchor();this._zoomAnimated?Ht(this._container,t.add(i)):e=e.add(t).add(i);var s=this._containerBottom=-e.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=s+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});At.include({_initOverlay:function(t,e,i,s){var c=e;return c instanceof t||(c=new t(s).setContent(e)),i&&c.setLatLng(i),c}}),He.include({_initOverlay:function(t,e,i,s){var c=i;return c instanceof t?(b(c,s),c._source=this):(c=e&&!s?e:new t(s,this),c.setContent(i)),c}});var Zt=Et.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Et.prototype.openOn.call(this,t)},onAdd:function(t){Et.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ve||this._source.on("preclick",Xn))},onRemove:function(t){Et.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ve||this._source.off("preclick",Xn))},getEvents:function(){var t=Et.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=Ft("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=Ft("div",t+"-content-wrapper",e);if(this._contentNode=Ft("div",t+"-content",i),ln(e),ui(this._contentNode),bt(e,"contextmenu",Xn),this._tipContainer=Ft("div",t+"-tip-container",e),this._tip=Ft("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=Ft("a",t+"-close-button",e);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',bt(s,"click",function(c){he(c),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var s=t.offsetHeight,c=this.options.maxHeight,m="leaflet-popup-scrolled";c&&s>c?(e.height=c+"px",Pt(t,m)):se(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Ht(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(fe(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,s=this._containerWidth,c=new pt(this._containerLeft,-i-this._containerBottom);c._add(Un(this._container));var m=t.layerPointToContainerPoint(c),k=ct(this.options.autoPanPadding),R=ct(this.options.autoPanPaddingTopLeft||k),$=ct(this.options.autoPanPaddingBottomRight||k),Y=t.getSize(),ot=0,_t=0;m.x+s+$.x>Y.x&&(ot=m.x+s-Y.x+$.x),m.x-ot-R.x<0&&(ot=m.x-R.x),m.y+i+$.y>Y.y&&(_t=m.y+i-Y.y+$.y),m.y-_t-R.y<0&&(_t=m.y-R.y),(ot||_t)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([ot,_t]))}},_getAnchor:function(){return ct(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),re=function(t,e){return new Zt(t,e)};At.mergeOptions({closePopupOnClick:!0}),At.include({openPopup:function(t,e,i){return this._initOverlay(Zt,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),He.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Zt,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof ke||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Vn(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Ve)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var te=Et.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Et.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Et.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Et.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,s=this._map,c=this._container,m=s.latLngToContainerPoint(s.getCenter()),k=s.layerPointToContainerPoint(t),R=this.options.direction,$=c.offsetWidth,Y=c.offsetHeight,ot=ct(this.options.offset),_t=this._getAnchor();R==="top"?(e=$/2,i=Y):R==="bottom"?(e=$/2,i=0):R==="center"?(e=$/2,i=Y/2):R==="right"?(e=0,i=Y/2):R==="left"?(e=$,i=Y/2):k.x<m.x?(R="right",e=0,i=Y/2):(R="left",e=$+(ot.x+_t.x)*2,i=Y/2),t=t.subtract(ct(e,i,!0)).add(ot).add(_t),se(c,"leaflet-tooltip-right"),se(c,"leaflet-tooltip-left"),se(c,"leaflet-tooltip-top"),se(c,"leaflet-tooltip-bottom"),Pt(c,"leaflet-tooltip-"+R),Ht(c,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&De(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return ct(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ce=function(t,e){return new te(t,e)};At.include({openTooltip:function(t,e,i){return this._initOverlay(te,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),He.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(te,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof ke||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(bt(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),bt(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,s;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(e)}});var de=ue.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(ii(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var s=ct(i.bgPos);e.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Sn(t){return new de(t)}ue.Default=Qn;var Re=He.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){b(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ne(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof pt?t:new pt(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),s=0,c=e.length,m;s<c;s++)m=e[s].style.zIndex,e[s]!==this._container&&m&&(i=t(i,+m));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!vt.ielt9){De(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var s in this._tiles){var c=this._tiles[s];if(!(!c.current||!c.loaded)){var m=Math.min(1,(t-c.loaded)/200);De(c.el,m),m<1?e=!0:(c.active?i=!0:this._onOpaqueTile(c),c.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(it(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:D,_initContainer:function(){this._container||(this._container=Ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(ne(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var s=this._levels[t],c=this._map;return s||(s=this._levels[t]={},s.el=Ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=c.project(c.unproject(c.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,c.getCenter(),c.getZoom()),D(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:D,_onRemoveLevel:D,_onCreateLevel:D,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var s=e.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ne(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,s){var c=Math.floor(t/2),m=Math.floor(e/2),k=i-1,R=new pt(+c,+m);R.z=+k;var $=this._tileCoordsToKey(R),Y=this._tiles[$];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),k>s?this._retainParent(c,m,k,s):!1)},_retainChildren:function(t,e,i,s){for(var c=2*t;c<2*t+2;c++)for(var m=2*e;m<2*e+2;m++){var k=new pt(c,m);k.z=i+1;var R=this._tileCoordsToKey(k),$=this._tiles[R];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);i+1<s&&this._retainChildren(c,m,i+1,s)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,s){var c=Math.round(e);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var m=this.options.updateWhenZooming&&c!==this._tileZoom;(!s||m)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var s=this._map.getZoomScale(i,t.zoom),c=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(e,i)).round();vt.any3d?qn(t.el,c,s):Ht(t.el,c)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),s=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],s).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],s).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],s).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],s).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),s=e.getZoomScale(i,this._tileZoom),c=e.project(t,this._tileZoom).floor(),m=e.getSize().divideBy(s*2);return new kt(c.subtract(m),c.add(m))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),c=this._pxBoundsToTileRange(s),m=c.getCenter(),k=[],R=this.options.keepBuffer,$=new kt(c.getBottomLeft().subtract([R,-R]),c.getTopRight().add([R,-R]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ot=this._tiles[Y].coords;(ot.z!==this._tileZoom||!$.contains(new pt(ot.x,ot.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var _t=c.min.y;_t<=c.max.y;_t++)for(var St=c.min.x;St<=c.max.x;St++){var Se=new pt(St,_t);if(Se.z=this._tileZoom,!!this._isValidTile(Se)){var _e=this._tiles[this._tileCoordsToKey(Se)];_e?_e.current=!0:k.push(Se)}}if(k.sort(function(Te,vi){return Te.distanceTo(m)-vi.distanceTo(m)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qe=document.createDocumentFragment();for(St=0;St<k.length;St++)this._addTile(k[St],Qe);this._level.el.appendChild(Qe)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return Mt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),s=t.scaleBy(i),c=s.add(i),m=e.unproject(s,t.z),k=e.unproject(c,t.z);return[m,k]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new be(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new pt(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(ne(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Pt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=D,t.onmousemove=D,vt.ielt9&&this.options.opacity<1&&De(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),s=this._tileCoordsToKey(t),c=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(c),this.createTile.length<2&&j(p(this._tileReady,this,t,null,c)),Ht(c,i),this._tiles[s]={el:c,coords:t,current:!0},e.appendChild(c),this.fire("tileloadstart",{tile:c,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var s=this._tileCoordsToKey(t);i=this._tiles[s],i&&(i.loaded=+new Date,this._map._fadeAnimated?(De(i.el,0),it(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(Pt(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),vt.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new pt(this._wrapX?C(t.x,this._wrapX):t.x,this._wrapY?C(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new kt(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Tn(t){return new Re(t)}var Cn=Re.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=b(this,e),e.detectRetina&&vt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return bt(i,"load",p(this._tileOnLoad,this,e,i)),bt(i,"error",p(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:vt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return S(this._url,u(e,this.options))},_tileOnLoad:function(t,e){vt.ielt9?setTimeout(p(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var s=this.options.errorTileUrl;s&&e.getAttribute("src")!==s&&(e.src=s),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,s=this.options.zoomOffset;return i&&(t=e-t),t+s},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=D,e.onerror=D,!e.complete)){e.src=z;var i=this._tiles[t].coords;ne(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",z),Re.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===z))return Re.prototype._tileReady.call(this,t,e,i)}});function Yr(t,e){return new Cn(t,e)}var Xr=Cn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=u({},this.defaultWmsParams);for(var s in e)s in this.options||(i[s]=e[s]);e=b(this,e);var c=e.detectRetina&&vt.retina?2:1,m=this.getTileSize();i.width=m.x*c,i.height=m.y*c,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Cn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,s=Dt(i.project(e[0]),i.project(e[1])),c=s.min,m=s.max,k=(this._wmsVersion>=1.3&&this._crs===Ge?[c.y,c.x,m.y,m.x]:[c.x,c.y,m.x,m.y]).join(","),R=Cn.prototype.getTileUrl.call(this,t);return R+V(this.wmsParams,R,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function Ka(t,e){return new Xr(t,e)}Cn.WMS=Xr,Yr.wms=Ka;var er=He.extend({options:{padding:.1},initialize:function(t){b(this,t),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,e),m=s.multiplyBy(-i).add(c).subtract(this._map._getNewPixelOrigin(t,e));vt.any3d?qn(this._container,m,i):Ht(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new kt(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ga=er.extend({options:{tolerance:0},getEvents:function(){var t=er.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){er.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");bt(t,"mousemove",this._onMouseMove,this),bt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),bt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){it(this._redrawRequest),delete this._ctx,ne(this._container),Vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),s=vt.retina?2:1;Ht(e,t.min),e.width=s*i.x,e.height=s*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",vt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){er.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[_(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,s=e.prev;i?i.prev=s:this._drawLast=s,s?s.next=i:this._drawFirst=i,delete t._order,delete this._layers[_(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],s,c;for(c=0;c<e.length;c++){if(s=Number(e[c]),isNaN(s))return;i.push(s)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new kt,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,s,c,m,k=t._parts,R=k.length,$=this._ctx;if(R){for($.beginPath(),i=0;i<R;i++){for(s=0,c=k[i].length;s<c;s++)m=k[i][s],$[s?"lineTo":"moveTo"](m.x,m.y);e&&$.closePath()}this._fillStroke($,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,s=Math.max(Math.round(t._radius),1),c=(Math.max(Math.round(t._radiusY),1)||s)/s;c!==1&&(i.save(),i.scale(1,c)),i.beginPath(),i.arc(e.x,e.y/c,s,0,Math.PI*2,!1),c!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,s,c=this._drawFirst;c;c=c.next)i=c.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(s=i);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(se(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,s,c=this._drawFirst;c;c=c.next)i=c.layer,i.options.interactive&&i._containsPoint(e)&&(s=i);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(Pt(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,s=e.prev;if(i)i.prev=s;else return;s?s.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,s=e.prev;if(s)s.next=i;else return;i?i.prev=s:s&&(this._drawLast=s),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function _a(t){return vt.canvas?new ga(t):null}var Yi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Qa={_initContainer:function(){this._container=Ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(er.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Yi("shape");Pt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Yi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ne(e),t.removeInteractiveTarget(e),delete this._layers[_(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,s=t.options,c=t._container;c.stroked=!!s.stroke,c.filled=!!s.fill,s.stroke?(e||(e=t._stroke=Yi("stroke")),c.appendChild(e),e.weight=s.weight+"px",e.color=s.color,e.opacity=s.opacity,s.dashArray?e.dashStyle=E(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=s.lineCap.replace("butt","flat"),e.joinstyle=s.lineJoin):e&&(c.removeChild(e),t._stroke=null),s.fill?(i||(i=t._fill=Yi("fill")),c.appendChild(i),i.color=s.fillColor||s.color,i.opacity=s.fillOpacity):i&&(c.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),s=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+s+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pr(t._container)},_bringToBack:function(t){vr(t._container)}},To=vt.vml?Yi:Le,Xi=er.extend({_initContainer:function(){this._container=To("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=To("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),Vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){er.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Ht(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=To("path");t.options.className&&Pt(e,t.options.className),t.options.interactive&&Pt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[_(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ne(t._path),t.removeInteractiveTarget(t._path),delete this._layers[_(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,lr(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||i,c="a"+i+","+s+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+c+i*2+",0 "+c+-i*2+",0 ";this._setPath(t,m)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pr(t._path)},_bringToBack:function(t){vr(t._path)}});vt.vml&&Xi.include(Qa);function ya(t){return vt.svg||vt.vml?new Xi(t):null}At.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&_a(t)||ya(t)}});var ba=hn.extend({initialize:function(t,e){hn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Mt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ja(t,e){return new ba(t,e)}Xi.create=To,Xi.pointsToPath=lr,Je.geometryToLayer=Ke,Je.coordsToLatLng=Ui,Je.coordsToLatLngs=qr,Je.latLngToCoords=Ur,Je.latLngsToCoords=jn,Je.getFeature=cn,Je.asFeature=tr,At.mergeOptions({boxZoom:!0});var wa=fn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ar(),ai(),this._startPoint=this._map.mouseEventToContainerPoint(t),bt(document,{contextmenu:Vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ft("div","leaflet-zoom-box",this._container),Pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new kt(this._point,this._startPoint),i=e.getSize();Ht(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(ne(this._box),se(this._container,"leaflet-crosshair")),Or(),zr(),Vt(document,{contextmenu:Vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var e=new be(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});At.addInitHook("addHandler","boxZoom",wa),At.mergeOptions({doubleClickZoom:!0});var ia=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),s=e.options.zoomDelta,c=t.originalEvent.shiftKey?i-s:i+s;e.options.doubleClickZoom==="center"?e.setZoom(c):e.setZoomAround(t.containerPoint,c)}});At.addInitHook("addHandler","doubleClickZoom",ia),At.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var oa=fn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new yn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){se(this._map._container,"leaflet-grab"),se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=Mt(this._map.options.maxBounds);this._offsetLimit=Dt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,s=this._draggable._newPos.x,c=(s-e+i)%t+e-i,m=(s+e+i)%t-e-i,k=Math.abs(c+i)<Math.abs(m+i)?c:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(t){var e=this._map,i=e.options,s=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),s)e.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,k=i.easeLinearity,R=c.multiplyBy(k/m),$=R.distanceTo([0,0]),Y=Math.min(i.inertiaMaxSpeed,$),ot=R.multiplyBy(Y/$),_t=Y/(i.inertiaDeceleration*k),St=ot.multiplyBy(-_t/2).round();!St.x&&!St.y?e.fire("moveend"):(St=e._limitOffset(St,e.options.maxBounds),j(function(){e.panBy(St,{duration:_t,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});At.addInitHook("addHandler","dragging",oa),At.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xa=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),bt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,s=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(s,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,s,c;for(s=0,c=i.left.length;s<c;s++)e[i.left[s]]=[-1*t,0];for(s=0,c=i.right.length;s<c;s++)e[i.right[s]]=[t,0];for(s=0,c=i.down.length;s<c;s++)e[i.down[s]]=[0,t];for(s=0,c=i.up.length;s<c;s++)e[i.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,s,c;for(s=0,c=i.zoomIn.length;s<c;s++)e[i.zoomIn[s]]=t;for(s=0,c=i.zoomOut.length;s<c;s++)e[i.zoomOut[s]]=-t},_addHooks:function(){bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,s;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(s=this._panKeys[e],t.shiftKey&&(s=ct(s).multiplyBy(3)),i.options.maxBounds&&(s=i._limitOffset(ct(s),i.options.maxBounds)),i.options.worldCopyJump){var c=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(s)));i.panTo(c)}else i.panBy(s)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Vn(t)}}});At.addInitHook("addHandler","keyboard",xa),At.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var aa=fn.extend({addHooks:function(){bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=fi(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),s),Vn(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,m=i?Math.ceil(c/i)*i:c,k=t._limitZoom(e+(this._delta>0?m:-m))-e;this._delta=0,this._startTime=null,k&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+k):t.setZoomAround(this._lastMousePos,e+k))}});At.addInitHook("addHandler","scrollWheelZoom",aa);var ts=600;At.mergeOptions({tapHold:vt.touchNative&&vt.safari&&vt.mobile,tapTolerance:15});var Pa=fn.extend({addHooks:function(){bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new pt(e.clientX,e.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(bt(document,"touchend",he),bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),ts),bt(document,"touchend touchcancel contextmenu",this._cancel,this),bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Vt(document,"touchend",he),Vt(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Vt(document,"touchend touchcancel contextmenu",this._cancel,this),Vt(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new pt(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});At.addInitHook("addHandler","tapHold",Pa),At.mergeOptions({touchZoom:vt.touch,bounceAtZoomLimits:!0});var br=fn.extend({addHooks:function(){Pt(this._map._container,"leaflet-touch-zoom"),bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(s)._divideBy(2))),this._startDist=i.distanceTo(s),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),bt(document,"touchmove",this._onTouchMove,this),bt(document,"touchend touchcancel",this._onTouchEnd,this),he(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]),c=i.distanceTo(s)/this._startDist;if(this._zoom=e.getScaleZoom(c,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&c<1||this._zoom>e.getMaxZoom()&&c>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var m=i._add(s)._divideBy(2)._subtract(this._centerPoint);if(c===1&&m.x===0&&m.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),it(this._animRequest);var k=p(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(k,this,!0),he(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,it(this._animRequest),Vt(document,"touchmove",this._onTouchMove,this),Vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});At.addInitHook("addHandler","touchZoom",br),At.BoxZoom=wa,At.DoubleClickZoom=ia,At.Drag=oa,At.Keyboard=xa,At.ScrollWheelZoom=aa,At.TapHold=Pa,At.TouchZoom=br,n.Bounds=kt,n.Browser=vt,n.CRS=Nt,n.Canvas=ga,n.Circle=Hr,n.CircleMarker=Me,n.Class=ft,n.Control=Xe,n.DivIcon=de,n.DivOverlay=Et,n.DomEvent=Vo,n.DomUtil=Xo,n.Draggable=yn,n.Evented=Qt,n.FeatureGroup=ke,n.GeoJSON=Je,n.GridLayer=Re,n.Handler=fn,n.Icon=ue,n.ImageOverlay=F,n.LatLng=xt,n.LatLngBounds=be,n.Layer=He,n.LayerGroup=xn,n.LineUtil=ko,n.Map=At,n.Marker=Gr,n.Mixin=jo,n.Path=Ve,n.Point=pt,n.PolyUtil=wo,n.Polygon=hn,n.Polyline=ze,n.Popup=Zt,n.PosAnimation=co,n.Projection=Mo,n.Rectangle=ba,n.Renderer=er,n.SVG=Xi,n.SVGOverlay=lt,n.TileLayer=Cn,n.Tooltip=te,n.Transformation=Lt,n.Util=mt,n.VideoOverlay=J,n.bind=p,n.bounds=Dt,n.canvas=_a,n.circle=Wr,n.circleMarker=Mn,n.control=Jn,n.divIcon=Sn,n.extend=u,n.featureGroup=yr,n.geoJSON=g,n.geoJson=P,n.gridLayer=Tn,n.icon=Kn,n.imageOverlay=nt,n.latLng=st,n.latLngBounds=Mt,n.layerGroup=ra,n.map=Fi,n.marker=pi,n.point=ct,n.polygon=So,n.polyline=Wi,n.popup=re,n.rectangle=ja,n.setOptions=b,n.stamp=_,n.svg=ya,n.svgOverlay=wt,n.tileLayer=Yr,n.tooltip=ce,n.transformation=gt,n.version=a,n.videoOverlay=ut;var es=window.L;n.noConflict=function(){return window.L=es,this},window.L=n})})(bs,bs.exports);var pn=bs.exports,We=63710088e-1,As={centimeters:We*100,centimetres:We*100,degrees:We/111325,feet:We*3.28084,inches:We*39.37,kilometers:We/1e3,kilometres:We/1e3,meters:We,metres:We,miles:We/1609.344,millimeters:We*1e3,millimetres:We*1e3,nauticalmiles:We/1852,radians:1,yards:We*1.0936},qf={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/We,yards:1.0936133},ws={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function In(o,r,n){n===void 0&&(n={});var a={type:"Feature"};return(n.id===0||n.id)&&(a.id=n.id),n.bbox&&(a.bbox=n.bbox),a.properties=r||{},a.geometry=o,a}function Uf(o,r,n){switch(o){case"Point":return Pe(r).geometry;case"LineString":return or(r).geometry;case"Polygon":return eo(r).geometry;case"MultiPoint":return Yu(r).geometry;case"MultiLineString":return Os(r).geometry;case"MultiPolygon":return Bs(r).geometry;default:throw new Error(o+" is invalid")}}function Pe(o,r,n){if(n===void 0&&(n={}),!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ra(o[0])||!Ra(o[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:o};return In(a,r,n)}function Yf(o,r,n){return n===void 0&&(n={}),sr(o.map(function(a){return Pe(a,r)}),n)}function eo(o,r,n){n===void 0&&(n={});for(var a=0,u=o;a<u.length;a++){var f=u[a];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var p=0;p<f[f.length-1].length;p++)if(f[f.length-1][p]!==f[0][p])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:o};return In(y,r,n)}function Xf(o,r,n){return n===void 0&&(n={}),sr(o.map(function(a){return eo(a,r)}),n)}function or(o,r,n){if(n===void 0&&(n={}),o.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:o};return In(a,r,n)}function Vf(o,r,n){return n===void 0&&(n={}),sr(o.map(function(a){return or(a,r)}),n)}function sr(o,r){r===void 0&&(r={});var n={type:"FeatureCollection"};return r.id&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.features=o,n}function Os(o,r,n){n===void 0&&(n={});var a={type:"MultiLineString",coordinates:o};return In(a,r,n)}function Yu(o,r,n){n===void 0&&(n={});var a={type:"MultiPoint",coordinates:o};return In(a,r,n)}function Bs(o,r,n){n===void 0&&(n={});var a={type:"MultiPolygon",coordinates:o};return In(a,r,n)}function Jf(o,r,n){n===void 0&&(n={});var a={type:"GeometryCollection",geometries:o};return In(a,r,n)}function Kf(o,r){if(r===void 0&&(r=0),r&&!(r>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,r||0);return Math.round(o*n)/n}function zs(o,r){r===void 0&&(r="kilometers");var n=As[r];if(!n)throw new Error(r+" units is invalid");return o*n}function Da(o,r){r===void 0&&(r="kilometers");var n=As[r];if(!n)throw new Error(r+" units is invalid");return o/n}function Qf(o,r){return za(Da(o,r))}function jf(o){var r=o%360;return r<0&&(r+=360),r}function za(o){var r=o%(2*Math.PI);return r*180/Math.PI}function Pi(o){var r=o%360;return r*Math.PI/180}function th(o,r,n){if(r===void 0&&(r="kilometers"),n===void 0&&(n="kilometers"),!(o>=0))throw new Error("length must be a positive number");return zs(Da(o,r),n)}function eh(o,r,n){if(r===void 0&&(r="meters"),n===void 0&&(n="kilometers"),!(o>=0))throw new Error("area must be a positive number");var a=ws[r];if(!a)throw new Error("invalid original units");var u=ws[n];if(!u)throw new Error("invalid final units");return o/a*u}function Ra(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)}function Ga(o){return!!o&&o.constructor===Object}function nh(o){if(!o)throw new Error("bbox is required");if(!Array.isArray(o))throw new Error("bbox must be an Array");if(o.length!==4&&o.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");o.forEach(function(r){if(!Ra(r))throw new Error("bbox must only contain numbers")})}function rh(o){if(!o)throw new Error("id is required");if(["string","number"].indexOf(typeof o)===-1)throw new Error("id must be a number or a string")}const ih=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:ws,bearingToAzimuth:jf,convertArea:eh,convertLength:th,degreesToRadians:Pi,earthRadius:We,factors:As,feature:In,featureCollection:sr,geometry:Uf,geometryCollection:Jf,isNumber:Ra,isObject:Ga,lengthToDegrees:Qf,lengthToRadians:Da,lineString:or,lineStrings:Vf,multiLineString:Os,multiPoint:Yu,multiPolygon:Bs,point:Pe,points:Yf,polygon:eo,polygons:Xf,radiansToDegrees:za,radiansToLength:zs,round:Kf,unitsFactors:qf,validateBBox:nh,validateId:rh},Symbol.toStringTag,{value:"Module"}));function no(o,r,n){if(o!==null)for(var a,u,f,p,y,_,x,C=0,D=0,H,U=o.type,tt=U==="FeatureCollection",b=U==="Feature",V=tt?o.features.length:1,rt=0;rt<V;rt++){x=tt?o.features[rt].geometry:b?o.geometry:o,H=x?x.type==="GeometryCollection":!1,y=H?x.geometries.length:1;for(var S=0;S<y;S++){var E=0,O=0;if(p=H?x.geometries[S]:x,p!==null){_=p.coordinates;var z=p.type;switch(C=n&&(z==="Polygon"||z==="MultiPolygon")?1:0,z){case null:break;case"Point":if(r(_,D,rt,E,O)===!1)return!1;D++,E++;break;case"LineString":case"MultiPoint":for(a=0;a<_.length;a++){if(r(_[a],D,rt,E,O)===!1)return!1;D++,z==="MultiPoint"&&E++}z==="LineString"&&E++;break;case"Polygon":case"MultiLineString":for(a=0;a<_.length;a++){for(u=0;u<_[a].length-C;u++){if(r(_[a][u],D,rt,E,O)===!1)return!1;D++}z==="MultiLineString"&&E++,z==="Polygon"&&O++}z==="Polygon"&&E++;break;case"MultiPolygon":for(a=0;a<_.length;a++){for(O=0,u=0;u<_[a].length;u++){for(f=0;f<_[a][u].length-C;f++){if(r(_[a][u][f],D,rt,E,O)===!1)return!1;D++}O++}E++}break;case"GeometryCollection":for(a=0;a<p.geometries.length;a++)if(no(p.geometries[a],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oh(o,r,n,a){var u=n;return no(o,function(f,p,y,_,x){p===0&&n===void 0?u=f:u=r(u,f,p,y,_,x)},a),u}function Xu(o,r){var n;switch(o.type){case"FeatureCollection":for(n=0;n<o.features.length&&r(o.features[n].properties,n)!==!1;n++);break;case"Feature":r(o.properties,0);break}}function ah(o,r,n){var a=n;return Xu(o,function(u,f){f===0&&n===void 0?a=u:a=r(a,u,f)}),a}function Qi(o,r){if(o.type==="Feature")r(o,0);else if(o.type==="FeatureCollection")for(var n=0;n<o.features.length&&r(o.features[n],n)!==!1;n++);}function Vu(o,r,n){var a=n;return Qi(o,function(u,f){f===0&&n===void 0?a=u:a=r(a,u,f)}),a}function sh(o){var r=[];return no(o,function(n){r.push(n)}),r}function Rs(o,r){var n,a,u,f,p,y,_,x,C,D,H=0,U=o.type==="FeatureCollection",tt=o.type==="Feature",b=U?o.features.length:1;for(n=0;n<b;n++){for(y=U?o.features[n].geometry:tt?o.geometry:o,x=U?o.features[n].properties:tt?o.properties:{},C=U?o.features[n].bbox:tt?o.bbox:void 0,D=U?o.features[n].id:tt?o.id:void 0,_=y?y.type==="GeometryCollection":!1,p=_?y.geometries.length:1,u=0;u<p;u++){if(f=_?y.geometries[u]:y,f===null){if(r(null,H,x,C,D)===!1)return!1;continue}switch(f.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(f,H,x,C,D)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<f.geometries.length;a++)if(r(f.geometries[a],H,x,C,D)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}H++}}function Ju(o,r,n){var a=n;return Rs(o,function(u,f,p,y,_){f===0&&n===void 0?a=u:a=r(a,u,f,p,y,_)}),a}function Kr(o,r){Rs(o,function(n,a,u,f,p){var y=n===null?null:n.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return r(In(n,u,{bbox:f,id:p}),a,0)===!1?!1:void 0}var _;switch(y){case"MultiPoint":_="Point";break;case"MultiLineString":_="LineString";break;case"MultiPolygon":_="Polygon";break}for(var x=0;x<n.coordinates.length;x++){var C=n.coordinates[x],D={type:_,coordinates:C};if(r(In(D,u),a,x)===!1)return!1}})}function uh(o,r,n){var a=n;return Kr(o,function(u,f,p){f===0&&p===0&&n===void 0?a=u:a=r(a,u,f,p)}),a}function Ku(o,r){Kr(o,function(n,a,u){var f=0;if(n.geometry){var p=n.geometry.type;if(!(p==="Point"||p==="MultiPoint")){var y,_=0,x=0,C=0;if(no(n,function(D,H,U,tt,b){if(y===void 0||a>_||tt>x||b>C){y=D,_=a,x=tt,C=b,f=0;return}var V=or([y,D],n.properties);if(r(V,a,u,b,f)===!1)return!1;f++,y=D})===!1)return!1}}})}function lh(o,r,n){var a=n,u=!1;return Ku(o,function(f,p,y,_,x){u===!1&&n===void 0?a=f:a=r(a,f,p,y,_,x),u=!0}),a}function Qu(o,r){if(!o)throw new Error("geojson is required");Kr(o,function(n,a,u){if(n.geometry!==null){var f=n.geometry.type,p=n.geometry.coordinates;switch(f){case"LineString":if(r(n,a,u,0,0)===!1)return!1;break;case"Polygon":for(var y=0;y<p.length;y++)if(r(or(p[y],n.properties),a,u,y)===!1)return!1;break}}})}function fh(o,r,n){var a=n;return Qu(o,function(u,f,p,y){f===0&&n===void 0?a=u:a=r(a,u,f,p,y)}),a}function hh(o,r){if(r=r||{},!Ga(r))throw new Error("options is invalid");var n=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.segmentIndex||0,p=r.properties,y;switch(o.type){case"FeatureCollection":n<0&&(n=o.features.length+n),p=p||o.features[n].properties,y=o.features[n].geometry;break;case"Feature":p=p||o.properties,y=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=o;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var _=y.coordinates;switch(y.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=_.length+f-1),or([_[f],_[f+1]],p,r);case"Polygon":return u<0&&(u=_.length+u),f<0&&(f=_[u].length+f-1),or([_[u][f],_[u][f+1]],p,r);case"MultiLineString":return a<0&&(a=_.length+a),f<0&&(f=_[a].length+f-1),or([_[a][f],_[a][f+1]],p,r);case"MultiPolygon":return a<0&&(a=_.length+a),u<0&&(u=_[a].length+u),f<0&&(f=_[a][u].length-f-1),or([_[a][u][f],_[a][u][f+1]],p,r)}throw new Error("geojson is invalid")}function ch(o,r){if(r=r||{},!Ga(r))throw new Error("options is invalid");var n=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,f=r.coordIndex||0,p=r.properties,y;switch(o.type){case"FeatureCollection":n<0&&(n=o.features.length+n),p=p||o.features[n].properties,y=o.features[n].geometry;break;case"Feature":p=p||o.properties,y=o.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=o;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var _=y.coordinates;switch(y.type){case"Point":return Pe(_,p,r);case"MultiPoint":return a<0&&(a=_.length+a),Pe(_[a],p,r);case"LineString":return f<0&&(f=_.length+f),Pe(_[f],p,r);case"Polygon":return u<0&&(u=_.length+u),f<0&&(f=_[u].length+f),Pe(_[u][f],p,r);case"MultiLineString":return a<0&&(a=_.length+a),f<0&&(f=_[a].length+f),Pe(_[a][f],p,r);case"MultiPolygon":return a<0&&(a=_.length+a),u<0&&(u=_[a].length+u),f<0&&(f=_[a][u].length-f),Pe(_[a][u][f],p,r)}throw new Error("geojson is invalid")}const dh=Object.freeze(Object.defineProperty({__proto__:null,coordAll:sh,coordEach:no,coordReduce:oh,featureEach:Qi,featureReduce:Vu,findPoint:ch,findSegment:hh,flattenEach:Kr,flattenReduce:uh,geomEach:Rs,geomReduce:Ju,lineEach:Qu,lineReduce:fh,propEach:Xu,propReduce:ah,segmentEach:Ku,segmentReduce:lh},Symbol.toStringTag,{value:"Module"}));function je(o){var r=[1/0,1/0,-1/0,-1/0];return no(o,function(n){r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}je.default=je;const ph=Object.freeze(Object.defineProperty({__proto__:null,default:je},Symbol.toStringTag,{value:"Module"}));function da(o){if(!o)throw new Error("coord is required");if(!Array.isArray(o)){if(o.type==="Feature"&&o.geometry!==null&&o.geometry.type==="Point")return o.geometry.coordinates;if(o.type==="Point")return o.coordinates}if(Array.isArray(o)&&o.length>=2&&!Array.isArray(o[0])&&!Array.isArray(o[1]))return o;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function No(o){if(Array.isArray(o))return o;if(o.type==="Feature"){if(o.geometry!==null)return o.geometry.coordinates}else if(o.coordinates)return o.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ur(o){return o.type==="Feature"?o.geometry:o}function vh(o,r){return o.type==="FeatureCollection"?"FeatureCollection":o.type==="GeometryCollection"?"GeometryCollection":o.type==="Feature"&&o.geometry!==null?o.geometry.type:o.type}function Ae(o,r,n){if(n===void 0&&(n={}),!o)throw new Error("point is required");if(!r)throw new Error("polygon is required");var a=da(o),u=ur(r),f=u.type,p=r.bbox,y=u.coordinates;if(p&&mh(a,p)===!1)return!1;f==="Polygon"&&(y=[y]);for(var _=!1,x=0;x<y.length&&!_;x++)if(gu(a,y[x][0],n.ignoreBoundary)){for(var C=!1,D=1;D<y[x].length&&!C;)gu(a,y[x][D],!n.ignoreBoundary)&&(C=!0),D++;C||(_=!0)}return _}function gu(o,r,n){var a=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var u=0,f=r.length-1;u<r.length;f=u++){var p=r[u][0],y=r[u][1],_=r[f][0],x=r[f][1],C=o[1]*(p-_)+y*(_-o[0])+x*(o[0]-p)===0&&(p-o[0])*(_-o[0])<=0&&(y-o[1])*(x-o[1])<=0;if(C)return!n;var D=y>o[1]!=x>o[1]&&o[0]<(_-p)*(o[1]-y)/(x-y)+p;D&&(a=!a)}return a}function mh(o,r){return r[0]<=o[0]&&r[1]<=o[1]&&r[2]>=o[0]&&r[3]>=o[1]}function Qr(o,r,n){n===void 0&&(n={});var a=da(o),u=da(r),f=Pi(u[1]-a[1]),p=Pi(u[0]-a[0]),y=Pi(a[1]),_=Pi(u[1]),x=Math.pow(Math.sin(f/2),2)+Math.pow(Math.sin(p/2),2)*Math.cos(y)*Math.cos(_);return zs(2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x)),n.units)}function ju(o){if(!o)throw new Error("geojson is required");switch(o.type){case"Feature":return tl(o);case"FeatureCollection":return gh(o);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ns(o);default:throw new Error("unknown GeoJSON type")}}function tl(o){var r={type:"Feature"};return Object.keys(o).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:r[n]=o[n]}}),r.properties=el(o.properties),r.geometry=Ns(o.geometry),r}function el(o){var r={};return o&&Object.keys(o).forEach(function(n){var a=o[n];typeof a=="object"?a===null?r[n]=null:Array.isArray(a)?r[n]=a.map(function(u){return u}):r[n]=el(a):r[n]=a}),r}function gh(o){var r={type:"FeatureCollection"};return Object.keys(o).forEach(function(n){switch(n){case"type":case"features":return;default:r[n]=o[n]}}),r.features=o.features.map(function(n){return tl(n)}),r}function Ns(o){var r={type:o.type};return o.bbox&&(r.bbox=o.bbox),o.type==="GeometryCollection"?(r.geometries=o.geometries.map(function(n){return Ns(n)}),r):(r.coordinates=nl(o.coordinates),r)}function nl(o){var r=o;return typeof r[0]!="object"?r.slice():r.map(function(n){return nl(n)})}function Ro(o,r){if(r=r||{},!Ga(r))throw new Error("options is invalid");var n=r.mutate;if(!o)throw new Error("geojson is required");return(n===!1||n===void 0)&&(o=ju(o)),no(o,function(a){var u=a[0],f=a[1];a[0]=f,a[1]=u}),o}function _h(o,r,n,a){a===void 0&&(a={});var u=da(o),f=Pi(u[0]),p=Pi(u[1]),y=Pi(n),_=Da(r,a.units),x=Math.asin(Math.sin(p)*Math.cos(_)+Math.cos(p)*Math.sin(_)*Math.cos(y)),C=f+Math.atan2(Math.sin(y)*Math.sin(_)*Math.cos(p),Math.cos(_)-Math.sin(p)*Math.sin(x)),D=za(C),H=za(x);return Pe([D,H],a.properties)}function fa(o,r,n){n===void 0&&(n={});for(var a=n.steps||64,u=n.properties?n.properties:!Array.isArray(o)&&o.type==="Feature"&&o.properties?o.properties:{},f=[],p=0;p<a;p++)f.push(_h(o,r,p*-360/a,n).geometry.coordinates);return f.push(f[0]),eo([f],u)}function ma(o,r){r===void 0&&(r={});var n=je(o),a=(n[0]+n[2])/2,u=(n[1]+n[3])/2;return Pe([a,u],r.properties,r)}function _u(o){if(!o)throw new Error("geojson is required");var r=[];return Kr(o,function(n){yh(n,r)}),sr(r)}function yh(o,r){var n=[],a=o.geometry;if(a!==null){switch(a.type){case"Polygon":n=No(a);break;case"LineString":n=[No(a)]}n.forEach(function(u){var f=bh(u,o.properties);f.forEach(function(p){p.id=r.length,r.push(p)})})}}function bh(o,r){var n=[];return o.reduce(function(a,u){var f=or([a,u],r);return f.bbox=wh(a,u),n.push(f),u}),n}function wh(o,r){var n=o[0],a=o[1],u=r[0],f=r[1],p=n<u?n:u,y=a<f?a:f,_=n>u?n:u,x=a>f?a:f;return[p,y,_,x]}var Zs={exports:{}},rl={exports:{}};(function(o,r){(function(n,a){o.exports=a()})(wi,function(){function n(S,E,O,z,A){(function G(B,q,et,j,it){for(;j>et;){if(j-et>600){var mt=j-et+1,ft=q-et+1,oe=Math.log(mt),Rt=.5*Math.exp(2*oe/3),Qt=.5*Math.sqrt(oe*Rt*(mt-Rt)/mt)*(ft-mt/2<0?-1:1),pt=Math.max(et,Math.floor(q-ft*Rt/mt+Qt)),pe=Math.min(j,Math.floor(q+(mt-ft)*Rt/mt+Qt));G(B,q,pt,pe,it)}var ct=B[q],kt=et,Dt=j;for(a(B,et,q),it(B[j],ct)>0&&a(B,et,j);kt<Dt;){for(a(B,kt,Dt),kt++,Dt--;it(B[kt],ct)<0;)kt++;for(;it(B[Dt],ct)>0;)Dt--}it(B[et],ct)===0?a(B,et,Dt):a(B,++Dt,j),Dt<=q&&(et=Dt+1),q<=Dt&&(j=Dt-1)}})(S,E,O||0,z||S.length-1,A||u)}function a(S,E,O){var z=S[E];S[E]=S[O],S[O]=z}function u(S,E){return S<E?-1:S>E?1:0}var f=function(S){S===void 0&&(S=9),this._maxEntries=Math.max(4,S),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function p(S,E,O){if(!O)return E.indexOf(S);for(var z=0;z<E.length;z++)if(O(S,E[z]))return z;return-1}function y(S,E){_(S,0,S.children.length,E,S)}function _(S,E,O,z,A){A||(A=V(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var G=E;G<O;G++){var B=S.children[G];x(A,S.leaf?z(B):B)}return A}function x(S,E){return S.minX=Math.min(S.minX,E.minX),S.minY=Math.min(S.minY,E.minY),S.maxX=Math.max(S.maxX,E.maxX),S.maxY=Math.max(S.maxY,E.maxY),S}function C(S,E){return S.minX-E.minX}function D(S,E){return S.minY-E.minY}function H(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function U(S){return S.maxX-S.minX+(S.maxY-S.minY)}function tt(S,E){return S.minX<=E.minX&&S.minY<=E.minY&&E.maxX<=S.maxX&&E.maxY<=S.maxY}function b(S,E){return E.minX<=S.maxX&&E.minY<=S.maxY&&E.maxX>=S.minX&&E.maxY>=S.minY}function V(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function rt(S,E,O,z,A){for(var G=[E,O];G.length;)if(!((O=G.pop())-(E=G.pop())<=z)){var B=E+Math.ceil((O-E)/z/2)*z;n(S,B,E,O,A),G.push(E,B,B,O)}}return f.prototype.all=function(){return this._all(this.data,[])},f.prototype.search=function(S){var E=this.data,O=[];if(!b(S,E))return O;for(var z=this.toBBox,A=[];E;){for(var G=0;G<E.children.length;G++){var B=E.children[G],q=E.leaf?z(B):B;b(S,q)&&(E.leaf?O.push(B):tt(S,q)?this._all(B,O):A.push(B))}E=A.pop()}return O},f.prototype.collides=function(S){var E=this.data;if(!b(S,E))return!1;for(var O=[];E;){for(var z=0;z<E.children.length;z++){var A=E.children[z],G=E.leaf?this.toBBox(A):A;if(b(S,G)){if(E.leaf||tt(S,G))return!0;O.push(A)}}E=O.pop()}return!1},f.prototype.load=function(S){if(!S||!S.length)return this;if(S.length<this._minEntries){for(var E=0;E<S.length;E++)this.insert(S[E]);return this}var O=this._build(S.slice(),0,S.length-1,0);if(this.data.children.length)if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var z=this.data;this.data=O,O=z}this._insert(O,this.data.height-O.height-1,!0)}else this.data=O;return this},f.prototype.insert=function(S){return S&&this._insert(S,this.data.height-1),this},f.prototype.clear=function(){return this.data=V([]),this},f.prototype.remove=function(S,E){if(!S)return this;for(var O,z,A,G=this.data,B=this.toBBox(S),q=[],et=[];G||q.length;){if(G||(G=q.pop(),z=q[q.length-1],O=et.pop(),A=!0),G.leaf){var j=p(S,G.children,E);if(j!==-1)return G.children.splice(j,1),q.push(G),this._condense(q),this}A||G.leaf||!tt(G,B)?z?(O++,G=z.children[O],A=!1):G=null:(q.push(G),et.push(O),O=0,z=G,G=G.children[0])}return this},f.prototype.toBBox=function(S){return S},f.prototype.compareMinX=function(S,E){return S.minX-E.minX},f.prototype.compareMinY=function(S,E){return S.minY-E.minY},f.prototype.toJSON=function(){return this.data},f.prototype.fromJSON=function(S){return this.data=S,this},f.prototype._all=function(S,E){for(var O=[];S;)S.leaf?E.push.apply(E,S.children):O.push.apply(O,S.children),S=O.pop();return E},f.prototype._build=function(S,E,O,z){var A,G=O-E+1,B=this._maxEntries;if(G<=B)return y(A=V(S.slice(E,O+1)),this.toBBox),A;z||(z=Math.ceil(Math.log(G)/Math.log(B)),B=Math.ceil(G/Math.pow(B,z-1))),(A=V([])).leaf=!1,A.height=z;var q=Math.ceil(G/B),et=q*Math.ceil(Math.sqrt(B));rt(S,E,O,et,this.compareMinX);for(var j=E;j<=O;j+=et){var it=Math.min(j+et-1,O);rt(S,j,it,q,this.compareMinY);for(var mt=j;mt<=it;mt+=q){var ft=Math.min(mt+q-1,it);A.children.push(this._build(S,mt,ft,z-1))}}return y(A,this.toBBox),A},f.prototype._chooseSubtree=function(S,E,O,z){for(;z.push(E),!E.leaf&&z.length-1!==O;){for(var A=1/0,G=1/0,B=void 0,q=0;q<E.children.length;q++){var et=E.children[q],j=H(et),it=(mt=S,ft=et,(Math.max(ft.maxX,mt.maxX)-Math.min(ft.minX,mt.minX))*(Math.max(ft.maxY,mt.maxY)-Math.min(ft.minY,mt.minY))-j);it<G?(G=it,A=j<A?j:A,B=et):it===G&&j<A&&(A=j,B=et)}E=B||E.children[0]}var mt,ft;return E},f.prototype._insert=function(S,E,O){var z=O?S:this.toBBox(S),A=[],G=this._chooseSubtree(z,this.data,E,A);for(G.children.push(S),x(G,z);E>=0&&A[E].children.length>this._maxEntries;)this._split(A,E),E--;this._adjustParentBBoxes(z,A,E)},f.prototype._split=function(S,E){var O=S[E],z=O.children.length,A=this._minEntries;this._chooseSplitAxis(O,A,z);var G=this._chooseSplitIndex(O,A,z),B=V(O.children.splice(G,O.children.length-G));B.height=O.height,B.leaf=O.leaf,y(O,this.toBBox),y(B,this.toBBox),E?S[E-1].children.push(B):this._splitRoot(O,B)},f.prototype._splitRoot=function(S,E){this.data=V([S,E]),this.data.height=S.height+1,this.data.leaf=!1,y(this.data,this.toBBox)},f.prototype._chooseSplitIndex=function(S,E,O){for(var z,A,G,B,q,et,j,it=1/0,mt=1/0,ft=E;ft<=O-E;ft++){var oe=_(S,0,ft,this.toBBox),Rt=_(S,ft,O,this.toBBox),Qt=(A=oe,G=Rt,B=void 0,q=void 0,et=void 0,j=void 0,B=Math.max(A.minX,G.minX),q=Math.max(A.minY,G.minY),et=Math.min(A.maxX,G.maxX),j=Math.min(A.maxY,G.maxY),Math.max(0,et-B)*Math.max(0,j-q)),pt=H(oe)+H(Rt);Qt<it?(it=Qt,z=ft,mt=pt<mt?pt:mt):Qt===it&&pt<mt&&(mt=pt,z=ft)}return z||O-E},f.prototype._chooseSplitAxis=function(S,E,O){var z=S.leaf?this.compareMinX:C,A=S.leaf?this.compareMinY:D;this._allDistMargin(S,E,O,z)<this._allDistMargin(S,E,O,A)&&S.children.sort(z)},f.prototype._allDistMargin=function(S,E,O,z){S.children.sort(z);for(var A=this.toBBox,G=_(S,0,E,A),B=_(S,O-E,O,A),q=U(G)+U(B),et=E;et<O-E;et++){var j=S.children[et];x(G,S.leaf?A(j):j),q+=U(G)}for(var it=O-E-1;it>=E;it--){var mt=S.children[it];x(B,S.leaf?A(mt):mt),q+=U(B)}return q},f.prototype._adjustParentBBoxes=function(S,E,O){for(var z=O;z>=0;z--)x(E[z],S)},f.prototype._condense=function(S){for(var E=S.length-1,O=void 0;E>=0;E--)S[E].children.length===0?E>0?(O=S[E-1].children).splice(O.indexOf(S[E]),1):this.clear():y(S[E],this.toBBox)},f})})(rl);var xh=rl.exports;const Ph=Is(ih),Lh=Is(dh),Eh=Is(ph);var xr=xh,il=Ph,ol=Lh,zo=Eh.default,kh=ol.featureEach;ol.coordEach;il.polygon;var yu=il.featureCollection;function al(o){var r=new xr(o);return r.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:zo(n),xr.prototype.insert.call(this,n)},r.load=function(n){var a=[];return Array.isArray(n)?n.forEach(function(u){if(u.type!=="Feature")throw new Error("invalid features");u.bbox=u.bbox?u.bbox:zo(u),a.push(u)}):kh(n,function(u){if(u.type!=="Feature")throw new Error("invalid features");u.bbox=u.bbox?u.bbox:zo(u),a.push(u)}),xr.prototype.load.call(this,a)},r.remove=function(n,a){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:zo(n),xr.prototype.remove.call(this,n,a)},r.clear=function(){return xr.prototype.clear.call(this)},r.search=function(n){var a=xr.prototype.search.call(this,this.toBBox(n));return yu(a)},r.collides=function(n){return xr.prototype.collides.call(this,this.toBBox(n))},r.all=function(){var n=xr.prototype.all.call(this);return yu(n)},r.toJSON=function(){return xr.prototype.toJSON.call(this)},r.fromJSON=function(n){return xr.prototype.fromJSON.call(this,n)},r.toBBox=function(n){var a;if(n.bbox)a=n.bbox;else if(Array.isArray(n)&&n.length===4)a=n;else if(Array.isArray(n)&&n.length===6)a=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")a=zo(n);else if(n.type==="FeatureCollection")a=zo(n);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},r}Zs.exports=al;Zs.exports.default=al;var Mh=Zs.exports;const Sh=Cs(Mh);function $s(o,r){var n={},a=[];if(o.type==="LineString"&&(o=In(o)),r.type==="LineString"&&(r=In(r)),o.type==="Feature"&&r.type==="Feature"&&o.geometry!==null&&r.geometry!==null&&o.geometry.type==="LineString"&&r.geometry.type==="LineString"&&o.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var u=bu(o,r);return u&&a.push(u),sr(a)}var f=Sh();return f.load(_u(r)),Qi(_u(o),function(p){Qi(f.search(p),function(y){var _=bu(p,y);if(_){var x=No(_).join(",");n[x]||(n[x]=!0,a.push(_))}})}),sr(a)}function bu(o,r){var n=No(o),a=No(r);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var u=n[0][0],f=n[0][1],p=n[1][0],y=n[1][1],_=a[0][0],x=a[0][1],C=a[1][0],D=a[1][1],H=(D-x)*(p-u)-(C-_)*(y-f),U=(C-_)*(f-x)-(D-x)*(u-_),tt=(p-u)*(f-x)-(y-f)*(u-_);if(H===0)return null;var b=U/H,V=tt/H;if(b>=0&&b<=1&&V>=0&&V<=1){var rt=u+b*(p-u),S=f+b*(y-f);return Pe([rt,S])}return null}var wu=6378137;function Th(o){return Ju(o,function(r,n){return r+Ch(n)},0)}function Ch(o){var r=0,n;switch(o.type){case"Polygon":return xu(o.coordinates);case"MultiPolygon":for(n=0;n<o.coordinates.length;n++)r+=xu(o.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function xu(o){var r=0;if(o&&o.length>0){r+=Math.abs(Pu(o[0]));for(var n=1;n<o.length;n++)r-=Math.abs(Pu(o[n]))}return r}function Pu(o){var r,n,a,u,f,p,y,_=0,x=o.length;if(x>2){for(y=0;y<x;y++)y===x-2?(u=x-2,f=x-1,p=0):y===x-1?(u=x-1,f=0,p=1):(u=y,f=y+1,p=y+2),r=o[u],n=o[f],a=o[p],_+=(gs(a[0])-gs(r[0]))*Math.sin(gs(n[1]));_=_*wu*wu/2}return _}function gs(o){return o*Math.PI/180}function jr(o,r,n){n===void 0&&(n={});for(var a=da(o),u=No(r),f=0;f<u.length-1;f++){var p=!1;if(n.ignoreEndVertices&&(f===0&&(p="start"),f===u.length-2&&(p="end"),f===0&&f+1===u.length-1&&(p="both")),Ih(u[f],u[f+1],a,p,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function Ih(o,r,n,a,u){var f=n[0],p=n[1],y=o[0],_=o[1],x=r[0],C=r[1],D=n[0]-y,H=n[1]-_,U=x-y,tt=C-_,b=D*tt-H*U;if(u!==null){if(Math.abs(b)>u)return!1}else if(b!==0)return!1;if(a){if(a==="start")return Math.abs(U)>=Math.abs(tt)?U>0?y<f&&f<=x:x<=f&&f<y:tt>0?_<p&&p<=C:C<=p&&p<_;if(a==="end")return Math.abs(U)>=Math.abs(tt)?U>0?y<=f&&f<x:x<f&&f<=y:tt>0?_<=p&&p<C:C<p&&p<=_;if(a==="both")return Math.abs(U)>=Math.abs(tt)?U>0?y<f&&f<x:x<f&&f<y:tt>0?_<p&&p<C:C<p&&p<_}else return Math.abs(U)>=Math.abs(tt)?U>0?y<=f&&f<=x:x<=f&&f<=y:tt>0?_<=p&&p<=C:C<=p&&p<=_;return!1}function Ah(o,r){var n=ur(o),a=ur(r),u=n.type,f=a.type;switch(u){case"Point":switch(f){case"MultiPoint":return Oh(n,a);case"LineString":return jr(n,a,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Ae(n,a,{ignoreBoundary:!0});default:throw new Error("feature2 "+f+" geometry not supported")}case"MultiPoint":switch(f){case"MultiPoint":return Bh(n,a);case"LineString":return zh(n,a);case"Polygon":case"MultiPolygon":return Rh(n,a);default:throw new Error("feature2 "+f+" geometry not supported")}case"LineString":switch(f){case"LineString":return Nh(n,a);case"Polygon":case"MultiPolygon":return Zh(n,a);default:throw new Error("feature2 "+f+" geometry not supported")}case"Polygon":switch(f){case"Polygon":case"MultiPolygon":return $h(n,a);default:throw new Error("feature2 "+f+" geometry not supported")}default:throw new Error("feature1 "+u+" geometry not supported")}}function Oh(o,r){var n,a=!1;for(n=0;n<r.coordinates.length;n++)if(ul(r.coordinates[n],o.coordinates)){a=!0;break}return a}function Bh(o,r){for(var n=0;n<o.coordinates.length;n++){for(var a=!1,u=0;u<r.coordinates.length;u++)ul(o.coordinates[n],r.coordinates[u])&&(a=!0);if(!a)return!1}return!0}function zh(o,r){for(var n=!1,a=0;a<o.coordinates.length;a++){if(!jr(o.coordinates[a],r))return!1;n||(n=jr(o.coordinates[a],r,{ignoreEndVertices:!0}))}return n}function Rh(o,r){for(var n=!0,a=!1,u=0;u<o.coordinates.length;u++){if(a=Ae(o.coordinates[1],r),!a){n=!1;break}a=Ae(o.coordinates[1],r,{ignoreBoundary:!0})}return n&&a}function Nh(o,r){for(var n=0;n<o.coordinates.length;n++)if(!jr(o.coordinates[n],r))return!1;return!0}function Zh(o,r){var n=je(r),a=je(o);if(!sl(n,a))return!1;for(var u=!1,f=0;f<o.coordinates.length-1;f++){if(!Ae(o.coordinates[f],r))return!1;if(u||(u=Ae(o.coordinates[f],r,{ignoreBoundary:!0})),!u){var p=Fh(o.coordinates[f],o.coordinates[f+1]);u=Ae(p,r,{ignoreBoundary:!0})}}return u}function $h(o,r){var n=je(o),a=je(r);if(!sl(a,n))return!1;for(var u=0;u<o.coordinates[0].length;u++)if(!Ae(o.coordinates[0][u],r))return!1;return!0}function sl(o,r){return!(o[0]>r[0]||o[2]<r[2]||o[1]>r[1]||o[3]<r[3])}function ul(o,r){return o[0]===r[0]&&o[1]===r[1]}function Fh(o,r){return[(o[0]+r[0])/2,(o[1]+r[1])/2]}function xs(o,r){r===void 0&&(r={});var n=ur(o);switch(!r.properties&&o.type==="Feature"&&(r.properties=o.properties),n.type){case"Polygon":return Dh(n,r);case"MultiPolygon":return Gh(n,r);default:throw new Error("invalid poly")}}function Dh(o,r){r===void 0&&(r={});var n=ur(o),a=n.coordinates,u=r.properties?r.properties:o.type==="Feature"?o.properties:{};return ll(a,u)}function Gh(o,r){r===void 0&&(r={});var n=ur(o),a=n.coordinates,u=r.properties?r.properties:o.type==="Feature"?o.properties:{},f=[];return a.forEach(function(p){f.push(ll(p,u))}),sr(f)}function ll(o,r){return o.length>1?Os(o,r):or(o[0],r)}function Hh(o,r){var n=!0;return Kr(o,function(a){Kr(r,function(u){if(n===!1)return!1;n=Wh(a.geometry,u.geometry)})}),n}function Wh(o,r){switch(o.type){case"Point":switch(r.type){case"Point":return!Xh(o.coordinates,r.coordinates);case"LineString":return!Lu(r,o);case"Polygon":return!Ae(o,r)}break;case"LineString":switch(r.type){case"Point":return!Lu(o,r);case"LineString":return!qh(o,r);case"Polygon":return!Eu(r,o)}break;case"Polygon":switch(r.type){case"Point":return!Ae(r,o);case"LineString":return!Eu(o,r);case"Polygon":return!Uh(r,o)}}return!1}function Lu(o,r){for(var n=0;n<o.coordinates.length-1;n++)if(Yh(o.coordinates[n],o.coordinates[n+1],r.coordinates))return!0;return!1}function qh(o,r){var n=$s(o,r);return n.features.length>0}function Eu(o,r){for(var n=0,a=r.coordinates;n<a.length;n++){var u=a[n];if(Ae(u,o))return!0}var f=$s(r,xs(o));return f.features.length>0}function Uh(o,r){for(var n=0,a=o.coordinates[0];n<a.length;n++){var u=a[n];if(Ae(u,r))return!0}for(var f=0,p=r.coordinates[0];f<p.length;f++){var y=p[f];if(Ae(y,o))return!0}var _=$s(xs(o),xs(r));return _.features.length>0}function Yh(o,r,n){var a=n[0]-o[0],u=n[1]-o[1],f=r[0]-o[0],p=r[1]-o[1],y=a*p-u*f;return y!==0?!1:Math.abs(f)>=Math.abs(p)?f>0?o[0]<=n[0]&&n[0]<=r[0]:r[0]<=n[0]&&n[0]<=o[0]:p>0?o[1]<=n[1]&&n[1]<=r[1]:r[1]<=n[1]&&n[1]<=o[1]}function Xh(o,r){return o[0]===r[0]&&o[1]===r[1]}function Vh(o,r){var n=ur(o),a=ur(r),u=n.type,f=a.type,p=n.coordinates,y=a.coordinates;switch(u){case"Point":switch(f){case"Point":return Fs(p,y);default:throw new Error("feature2 "+f+" geometry not supported")}case"MultiPoint":switch(f){case"Point":return Jh(n,a);case"MultiPoint":return Kh(n,a);default:throw new Error("feature2 "+f+" geometry not supported")}case"LineString":switch(f){case"Point":return jr(a,n,{ignoreEndVertices:!0});case"LineString":return tc(n,a);case"MultiPoint":return Qh(n,a);default:throw new Error("feature2 "+f+" geometry not supported")}case"Polygon":switch(f){case"Point":return Ae(a,n,{ignoreBoundary:!0});case"LineString":return ec(n,a);case"Polygon":return nc(n,a);case"MultiPoint":return jh(n,a);default:throw new Error("feature2 "+f+" geometry not supported")}default:throw new Error("feature1 "+u+" geometry not supported")}}function Jh(o,r){var n,a=!1;for(n=0;n<o.coordinates.length;n++)if(Fs(o.coordinates[n],r.coordinates)){a=!0;break}return a}function Kh(o,r){for(var n=0,a=r.coordinates;n<a.length;n++){for(var u=a[n],f=!1,p=0,y=o.coordinates;p<y.length;p++){var _=y[p];if(Fs(u,_)){f=!0;break}}if(!f)return!1}return!0}function Qh(o,r){for(var n=!1,a=0,u=r.coordinates;a<u.length;a++){var f=u[a];if(jr(f,o,{ignoreEndVertices:!0})&&(n=!0),!jr(f,o))return!1}return!!n}function jh(o,r){for(var n=0,a=r.coordinates;n<a.length;n++){var u=a[n];if(!Ae(u,o,{ignoreBoundary:!0}))return!1}return!0}function tc(o,r){for(var n=!1,a=0,u=r.coordinates;a<u.length;a++){var f=u[a];if(jr({type:"Point",coordinates:f},o,{ignoreEndVertices:!0})&&(n=!0),!jr({type:"Point",coordinates:f},o,{ignoreEndVertices:!1}))return!1}return n}function ec(o,r){var n=!1,a=0,u=je(o),f=je(r);if(!fl(u,f))return!1;for(a;a<r.coordinates.length-1;a++){var p=rc(r.coordinates[a],r.coordinates[a+1]);if(Ae({type:"Point",coordinates:p},o,{ignoreBoundary:!0})){n=!0;break}}return n}function nc(o,r){if(o.type==="Feature"&&o.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var n=je(o),a=je(r);if(!fl(n,a))return!1;for(var u=ur(r).coordinates,f=0,p=u;f<p.length;f++)for(var y=p[f],_=0,x=y;_<x.length;_++){var C=x[_];if(!Ae(C,o))return!1}return!0}function fl(o,r){return!(o[0]>r[0]||o[2]<r[2]||o[1]>r[1]||o[3]<r[3])}function Fs(o,r){return o[0]===r[0]&&o[1]===r[1]}function rc(o,r){return[(o[0]+r[0])/2,(o[1]+r[1])/2]}function ic(o,r){var n=!1;return Kr(o,function(a){Kr(r,function(u){if(n===!0)return!0;n=!Hh(a.geometry,u.geometry)})}),n}function Ds(o,r){if(!o)throw new Error("geojson is required");if(o.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(r==null)throw new Error("filter is required");var n=[];return Qi(o,function(a){hl(a.properties,r)&&n.push(a)}),sr(n)}function hl(o,r){if(o===void 0)return!1;var n=typeof r;if(n==="number"||n==="string")return Object.prototype.hasOwnProperty.call(o,r);if(Array.isArray(r)){for(var a=0;a<r.length;a++)if(!hl(o,r[a]))return!1;return!0}else return oc(o,r)}function oc(o,r){for(var n=Object.keys(r),a=0;a<n.length;a++){var u=n[a];if(o[u]!==r[u])return!1}return!0}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ac(o,r){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,p;return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(x){return function(C){return _([x,C])}}function _(x){if(a)throw new TypeError("Generator is already executing.");for(;n;)try{if(a=1,u&&(f=x[0]&2?u.return:x[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,x[1])).done)return f;switch(u=0,f&&(x=[x[0]&2,f.value]),x[0]){case 0:case 1:f=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,u=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!f||x[1]>f[0]&&x[1]<f[3])){n.label=x[1];break}if(x[0]===6&&n.label<f[1]){n.label=f[1],f=x;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(x);break}f[2]&&n.ops.pop(),n.trys.pop();continue}x=r.call(o,n)}catch(C){x=[6,C],u=0}finally{a=f=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}var Ei=function(){function o(r,n){this.next=null,this.key=r,this.data=n,this.left=null,this.right=null}return o}();function sc(o,r){return o>r?1:o<r?-1:0}function xi(o,r,n){for(var a=new Ei(null,null),u=a,f=a;;){var p=n(o,r.key);if(p<0){if(r.left===null)break;if(n(o,r.left.key)<0){var y=r.left;if(r.left=y.right,y.right=r,r=y,r.left===null)break}f.left=r,f=r,r=r.left}else if(p>0){if(r.right===null)break;if(n(o,r.right.key)>0){var y=r.right;if(r.right=y.left,y.left=r,r=y,r.right===null)break}u.right=r,u=r,r=r.right}else break}return u.right=r.left,f.left=r.right,r.left=a.right,r.right=a.left,r}function _s(o,r,n,a){var u=new Ei(o,r);if(n===null)return u.left=u.right=null,u;n=xi(o,n,a);var f=a(o,n.key);return f<0?(u.left=n.left,u.right=n,n.left=null):f>=0&&(u.right=n.right,u.left=n,n.right=null),u}function ku(o,r,n){var a=null,u=null;if(r){r=xi(o,r,n);var f=n(r.key,o);f===0?(a=r.left,u=r.right):f<0?(u=r.right,r.right=null,a=r):(a=r.left,r.left=null,u=r)}return{left:a,right:u}}function uc(o,r,n){return r===null?o:(o===null||(r=xi(o.key,r,n),r.left=o),r)}function Ps(o,r,n,a,u){if(o){a(""+r+(n?"└── ":"├── ")+u(o)+`
`);var f=r+(n?"    ":"│   ");o.left&&Ps(o.left,f,!1,a,u),o.right&&Ps(o.right,f,!0,a,u)}}var Gs=function(){function o(r){r===void 0&&(r=sc),this._root=null,this._size=0,this._comparator=r}return o.prototype.insert=function(r,n){return this._size++,this._root=_s(r,n,this._root,this._comparator)},o.prototype.add=function(r,n){var a=new Ei(r,n);this._root===null&&(a.left=a.right=null,this._size++,this._root=a);var u=this._comparator,f=xi(r,this._root,u),p=u(r,f.key);return p===0?this._root=f:(p<0?(a.left=f.left,a.right=f,f.left=null):p>0&&(a.right=f.right,a.left=f,f.right=null),this._size++,this._root=a),this._root},o.prototype.remove=function(r){this._root=this._remove(r,this._root,this._comparator)},o.prototype._remove=function(r,n,a){var u;if(n===null)return null;n=xi(r,n,a);var f=a(r,n.key);return f===0?(n.left===null?u=n.right:(u=xi(r,n.left,a),u.right=n.right),this._size--,u):n},o.prototype.pop=function(){var r=this._root;if(r){for(;r.left;)r=r.left;return this._root=xi(r.key,this._root,this._comparator),this._root=this._remove(r.key,this._root,this._comparator),{key:r.key,data:r.data}}return null},o.prototype.findStatic=function(r){for(var n=this._root,a=this._comparator;n;){var u=a(r,n.key);if(u===0)return n;u<0?n=n.left:n=n.right}return null},o.prototype.find=function(r){return this._root&&(this._root=xi(r,this._root,this._comparator),this._comparator(r,this._root.key)!==0)?null:this._root},o.prototype.contains=function(r){for(var n=this._root,a=this._comparator;n;){var u=a(r,n.key);if(u===0)return!0;u<0?n=n.left:n=n.right}return!1},o.prototype.forEach=function(r,n){for(var a=this._root,u=[],f=!1;!f;)a!==null?(u.push(a),a=a.left):u.length!==0?(a=u.pop(),r.call(n,a),a=a.right):f=!0;return this},o.prototype.range=function(r,n,a,u){for(var f=[],p=this._comparator,y=this._root,_;f.length!==0||y;)if(y)f.push(y),y=y.left;else{if(y=f.pop(),_=p(y.key,n),_>0)break;if(p(y.key,r)>=0&&a.call(u,y))return this;y=y.right}return this},o.prototype.keys=function(){var r=[];return this.forEach(function(n){var a=n.key;return r.push(a)}),r},o.prototype.values=function(){var r=[];return this.forEach(function(n){var a=n.data;return r.push(a)}),r},o.prototype.min=function(){return this._root?this.minNode(this._root).key:null},o.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},o.prototype.minNode=function(r){if(r===void 0&&(r=this._root),r)for(;r.left;)r=r.left;return r},o.prototype.maxNode=function(r){if(r===void 0&&(r=this._root),r)for(;r.right;)r=r.right;return r},o.prototype.at=function(r){for(var n=this._root,a=!1,u=0,f=[];!a;)if(n)f.push(n),n=n.left;else if(f.length>0){if(n=f.pop(),u===r)return n;u++,n=n.right}else a=!0;return null},o.prototype.next=function(r){var n=this._root,a=null;if(r.right){for(a=r.right;a.left;)a=a.left;return a}for(var u=this._comparator;n;){var f=u(r.key,n.key);if(f===0)break;f<0?(a=n,n=n.left):n=n.right}return a},o.prototype.prev=function(r){var n=this._root,a=null;if(r.left!==null){for(a=r.left;a.right;)a=a.right;return a}for(var u=this._comparator;n;){var f=u(r.key,n.key);if(f===0)break;f<0?n=n.left:(a=n,n=n.right)}return a},o.prototype.clear=function(){return this._root=null,this._size=0,this},o.prototype.toList=function(){return fc(this._root)},o.prototype.load=function(r,n,a){n===void 0&&(n=[]),a===void 0&&(a=!1);var u=r.length,f=this._comparator;if(a&&ks(r,n,0,u-1,f),this._root===null)this._root=Ls(r,n,0,u),this._size=u;else{var p=hc(this.toList(),lc(r,n),f);u=this._size+u,this._root=Es({head:p},0,u)}return this},o.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(o.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),o.prototype.toString=function(r){r===void 0&&(r=function(a){return String(a.key)});var n=[];return Ps(this._root,"",!0,function(a){return n.push(a)},r),n.join("")},o.prototype.update=function(r,n,a){var u=this._comparator,f=ku(r,this._root,u),p=f.left,y=f.right;u(r,n)<0?y=_s(n,a,y,u):p=_s(n,a,p,u),this._root=uc(p,y,u)},o.prototype.split=function(r){return ku(r,this._root,this._comparator)},o.prototype[Symbol.iterator]=function(){var r,n,a;return ac(this,function(u){switch(u.label){case 0:r=this._root,n=[],a=!1,u.label=1;case 1:return a?[3,6]:r===null?[3,2]:(n.push(r),r=r.left,[3,5]);case 2:return n.length===0?[3,4]:(r=n.pop(),[4,r]);case 3:return u.sent(),r=r.right,[3,5];case 4:a=!0,u.label=5;case 5:return[3,1];case 6:return[2]}})},o}();function Ls(o,r,n,a){var u=a-n;if(u>0){var f=n+Math.floor(u/2),p=o[f],y=r[f],_=new Ei(p,y);return _.left=Ls(o,r,n,f),_.right=Ls(o,r,f+1,a),_}return null}function lc(o,r){for(var n=new Ei(null,null),a=n,u=0;u<o.length;u++)a=a.next=new Ei(o[u],r[u]);return a.next=null,n.next}function fc(o){for(var r=o,n=[],a=!1,u=new Ei(null,null),f=u;!a;)r?(n.push(r),r=r.left):n.length>0?(r=f=f.next=n.pop(),r=r.right):a=!0;return f.next=null,u.next}function Es(o,r,n){var a=n-r;if(a>0){var u=r+Math.floor(a/2),f=Es(o,r,u),p=o.head;return p.left=f,o.head=o.head.next,p.right=Es(o,u+1,n),p}return null}function hc(o,r,n){for(var a=new Ei(null,null),u=a,f=o,p=r;f!==null&&p!==null;)n(f.key,p.key)<0?(u.next=f,f=f.next):(u.next=p,p=p.next),u=u.next;return f!==null?u.next=f:p!==null&&(u.next=p),a.next}function ks(o,r,n,a,u){if(!(n>=a)){for(var f=o[n+a>>1],p=n-1,y=a+1;;){do p++;while(u(o[p],f)<0);do y--;while(u(o[y],f)>0);if(p>=y)break;var _=o[p];o[p]=o[y],o[y]=_,_=r[p],r[p]=r[y],r[y]=_}ks(o,r,n,y,u),ks(o,r,y+1,a,u)}}function On(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function Mu(o,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}function tn(o,r,n){return r&&Mu(o.prototype,r),n&&Mu(o,n),o}var la=function(r,n){return r.ll.x<=n.x&&n.x<=r.ur.x&&r.ll.y<=n.y&&n.y<=r.ur.y},Ms=function(r,n){if(n.ur.x<r.ll.x||r.ur.x<n.ll.x||n.ur.y<r.ll.y||r.ur.y<n.ll.y)return null;var a=r.ll.x<n.ll.x?n.ll.x:r.ll.x,u=r.ur.x<n.ur.x?r.ur.x:n.ur.x,f=r.ll.y<n.ll.y?n.ll.y:r.ll.y,p=r.ur.y<n.ur.y?r.ur.y:n.ur.y;return{ll:{x:a,y:f},ur:{x:u,y:p}}},Li=Number.EPSILON;Li===void 0&&(Li=Math.pow(2,-52));var cc=Li*Li,Ss=function(r,n){if(-Li<r&&r<Li&&-Li<n&&n<Li)return 0;var a=r-n;return a*a<cc*r*n?0:r<n?-1:1},dc=function(){function o(){On(this,o),this.reset()}return tn(o,[{key:"reset",value:function(){this.xRounder=new Su,this.yRounder=new Su}},{key:"round",value:function(n,a){return{x:this.xRounder.round(n),y:this.yRounder.round(a)}}}]),o}(),Su=function(){function o(){On(this,o),this.tree=new Gs,this.round(0)}return tn(o,[{key:"round",value:function(n){var a=this.tree.add(n),u=this.tree.prev(a);if(u!==null&&Ss(a.key,u.key)===0)return this.tree.remove(n),u.key;var f=this.tree.next(a);return f!==null&&Ss(a.key,f.key)===0?(this.tree.remove(n),f.key):n}}]),o}(),pa=new dc,ha=function(r,n){return r.x*n.y-r.y*n.x},cl=function(r,n){return r.x*n.x+r.y*n.y},Tu=function(r,n,a){var u={x:n.x-r.x,y:n.y-r.y},f={x:a.x-r.x,y:a.y-r.y},p=ha(u,f);return Ss(p,0)},Na=function(r){return Math.sqrt(cl(r,r))},pc=function(r,n,a){var u={x:n.x-r.x,y:n.y-r.y},f={x:a.x-r.x,y:a.y-r.y};return ha(f,u)/Na(f)/Na(u)},vc=function(r,n,a){var u={x:n.x-r.x,y:n.y-r.y},f={x:a.x-r.x,y:a.y-r.y};return cl(f,u)/Na(f)/Na(u)},Cu=function(r,n,a){return n.y===0?null:{x:r.x+n.x/n.y*(a-r.y),y:a}},Iu=function(r,n,a){return n.x===0?null:{x:a,y:r.y+n.y/n.x*(a-r.x)}},mc=function(r,n,a,u){if(n.x===0)return Iu(a,u,r.x);if(u.x===0)return Iu(r,n,a.x);if(n.y===0)return Cu(a,u,r.y);if(u.y===0)return Cu(r,n,a.y);var f=ha(n,u);if(f==0)return null;var p={x:a.x-r.x,y:a.y-r.y},y=ha(p,n)/f,_=ha(p,u)/f,x=r.x+_*n.x,C=a.x+y*u.x,D=r.y+_*n.y,H=a.y+y*u.y,U=(x+C)/2,tt=(D+H)/2;return{x:U,y:tt}},Pr=function(){tn(o,null,[{key:"compare",value:function(n,a){var u=o.comparePoints(n.point,a.point);return u!==0?u:(n.point!==a.point&&n.link(a),n.isLeft!==a.isLeft?n.isLeft?1:-1:Za.compare(n.segment,a.segment))}},{key:"comparePoints",value:function(n,a){return n.x<a.x?-1:n.x>a.x?1:n.y<a.y?-1:n.y>a.y?1:0}}]);function o(r,n){On(this,o),r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=n}return tn(o,[{key:"link",value:function(n){if(n.point===this.point)throw new Error("Tried to link already linked events");for(var a=n.point.events,u=0,f=a.length;u<f;u++){var p=a[u];this.point.events.push(p),p.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var n=this.point.events.length,a=0;a<n;a++){var u=this.point.events[a];if(u.segment.consumedBy===void 0)for(var f=a+1;f<n;f++){var p=this.point.events[f];p.consumedBy===void 0&&u.otherSE.point.events===p.otherSE.point.events&&u.segment.consume(p.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var n=[],a=0,u=this.point.events.length;a<u;a++){var f=this.point.events[a];f!==this&&!f.segment.ringOut&&f.segment.isInResult()&&n.push(f)}return n}},{key:"getLeftmostComparator",value:function(n){var a=this,u=new Map,f=function(y){var _=y.otherSE;u.set(y,{sine:pc(a.point,n.point,_.point),cosine:vc(a.point,n.point,_.point)})};return function(p,y){u.has(p)||f(p),u.has(y)||f(y);var _=u.get(p),x=_.sine,C=_.cosine,D=u.get(y),H=D.sine,U=D.cosine;return x>=0&&H>=0?C<U?1:C>U?-1:0:x<0&&H<0?C<U?-1:C>U?1:0:H<x?-1:H>x?1:0}}}]),o}(),gc=0,Za=function(){tn(o,null,[{key:"compare",value:function(n,a){var u=n.leftSE.point.x,f=a.leftSE.point.x,p=n.rightSE.point.x,y=a.rightSE.point.x;if(y<u)return 1;if(p<f)return-1;var _=n.leftSE.point.y,x=a.leftSE.point.y,C=n.rightSE.point.y,D=a.rightSE.point.y;if(u<f){if(x<_&&x<C)return 1;if(x>_&&x>C)return-1;var H=n.comparePoint(a.leftSE.point);if(H<0)return 1;if(H>0)return-1;var U=a.comparePoint(n.rightSE.point);return U!==0?U:-1}if(u>f){if(_<x&&_<D)return-1;if(_>x&&_>D)return 1;var tt=a.comparePoint(n.leftSE.point);if(tt!==0)return tt;var b=n.comparePoint(a.rightSE.point);return b<0?1:b>0?-1:1}if(_<x)return-1;if(_>x)return 1;if(p<y){var V=a.comparePoint(n.rightSE.point);if(V!==0)return V}if(p>y){var rt=n.comparePoint(a.rightSE.point);if(rt<0)return 1;if(rt>0)return-1}if(p!==y){var S=C-_,E=p-u,O=D-x,z=y-f;if(S>E&&O<z)return 1;if(S<E&&O>z)return-1}return p>y?1:p<y||C<D?-1:C>D?1:n.id<a.id?-1:n.id>a.id?1:0}}]);function o(r,n,a,u){On(this,o),this.id=++gc,this.leftSE=r,r.segment=this,r.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=r,this.rings=a,this.windings=u}return tn(o,[{key:"replaceRightSE",value:function(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var n=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<a?n:a},ur:{x:this.rightSE.point.x,y:n>a?n:a}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y}},{key:"comparePoint",value:function(n){if(this.isAnEndpoint(n))return 0;var a=this.leftSE.point,u=this.rightSE.point,f=this.vector();if(a.x===u.x)return n.x===a.x?0:n.x<a.x?1:-1;var p=(n.y-a.y)/f.y,y=a.x+p*f.x;if(n.x===y)return 0;var _=(n.x-a.x)/f.x,x=a.y+_*f.y;return n.y===x?0:n.y<x?-1:1}},{key:"getIntersection",value:function(n){var a=this.bbox(),u=n.bbox(),f=Ms(a,u);if(f===null)return null;var p=this.leftSE.point,y=this.rightSE.point,_=n.leftSE.point,x=n.rightSE.point,C=la(a,_)&&this.comparePoint(_)===0,D=la(u,p)&&n.comparePoint(p)===0,H=la(a,x)&&this.comparePoint(x)===0,U=la(u,y)&&n.comparePoint(y)===0;if(D&&C)return U&&!H?y:!U&&H?x:null;if(D)return H&&p.x===x.x&&p.y===x.y?null:p;if(C)return U&&y.x===_.x&&y.y===_.y?null:_;if(U&&H)return null;if(U)return y;if(H)return x;var tt=mc(p,this.vector(),_,n.vector());return tt===null||!la(f,tt)?null:pa.round(tt.x,tt.y)}},{key:"split",value:function(n){var a=[],u=n.events!==void 0,f=new Pr(n,!0),p=new Pr(n,!1),y=this.rightSE;this.replaceRightSE(p),a.push(p),a.push(f);var _=new o(f,y,this.rings.slice(),this.windings.slice());return Pr.comparePoints(_.leftSE.point,_.rightSE.point)>0&&_.swapEvents(),Pr.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(f.checkForConsuming(),p.checkForConsuming()),a}},{key:"swapEvents",value:function(){var n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}},{key:"consume",value:function(n){for(var a=this,u=n;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;var f=o.compare(a,u);if(f!==0){if(f>0){var p=a;a=u,u=p}if(a.prev===u){var y=a;a=u,u=y}for(var _=0,x=u.rings.length;_<x;_++){var C=u.rings[_],D=u.windings[_],H=a.rings.indexOf(C);H===-1?(a.rings.push(C),a.windings.push(D)):a.windings[H]+=D}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};for(var a=this._afterState.rings,u=this._afterState.windings,f=this._afterState.multiPolys,p=0,y=this.rings.length;p<y;p++){var _=this.rings[p],x=this.windings[p],C=a.indexOf(_);C===-1?(a.push(_),u.push(x)):u[C]+=x}for(var D=[],H=[],U=0,tt=a.length;U<tt;U++)if(u[U]!==0){var b=a[U],V=b.poly;if(H.indexOf(V)===-1)if(b.isExterior)D.push(V);else{H.indexOf(V)===-1&&H.push(V);var rt=D.indexOf(b.poly);rt!==-1&&D.splice(rt,1)}}for(var S=0,E=D.length;S<E;S++){var O=D[S].multiPoly;f.indexOf(O)===-1&&f.push(O)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var n=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(ar.type){case"union":{var u=n.length===0,f=a.length===0;this._isInResult=u!==f;break}case"intersection":{var p,y;n.length<a.length?(p=n.length,y=a.length):(p=a.length,y=n.length),this._isInResult=y===ar.numMultiPolys&&p<y;break}case"xor":{var _=Math.abs(n.length-a.length);this._isInResult=_%2===1;break}case"difference":{var x=function(D){return D.length===1&&D[0].isSubject};this._isInResult=x(n)!==x(a);break}default:throw new Error("Unrecognized operation type found ".concat(ar.type))}return this._isInResult}}],[{key:"fromRing",value:function(n,a,u){var f,p,y,_=Pr.comparePoints(n,a);if(_<0)f=n,p=a,y=1;else if(_>0)f=a,p=n,y=-1;else throw new Error("Tried to create degenerate segment at [".concat(n.x,", ").concat(n.y,"]"));var x=new Pr(f,!0),C=new Pr(p,!1);return new o(x,C,[u],[y])}}]),o}(),Au=function(){function o(r,n,a){if(On(this,o),!Array.isArray(r)||r.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=a,this.segments=[],typeof r[0][0]!="number"||typeof r[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=pa.round(r[0][0],r[0][1]);this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};for(var f=u,p=1,y=r.length;p<y;p++){if(typeof r[p][0]!="number"||typeof r[p][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var _=pa.round(r[p][0],r[p][1]);_.x===f.x&&_.y===f.y||(this.segments.push(Za.fromRing(f,_,this)),_.x<this.bbox.ll.x&&(this.bbox.ll.x=_.x),_.y<this.bbox.ll.y&&(this.bbox.ll.y=_.y),_.x>this.bbox.ur.x&&(this.bbox.ur.x=_.x),_.y>this.bbox.ur.y&&(this.bbox.ur.y=_.y),f=_)}(u.x!==f.x||u.y!==f.y)&&this.segments.push(Za.fromRing(f,u,this))}return tn(o,[{key:"getSweepEvents",value:function(){for(var n=[],a=0,u=this.segments.length;a<u;a++){var f=this.segments[a];n.push(f.leftSE),n.push(f.rightSE)}return n}}]),o}(),_c=function(){function o(r,n){if(On(this,o),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Au(r[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var a=1,u=r.length;a<u;a++){var f=new Au(r[a],this,!1);f.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=f.bbox.ll.x),f.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=f.bbox.ll.y),f.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=f.bbox.ur.x),f.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=f.bbox.ur.y),this.interiorRings.push(f)}this.multiPoly=n}return tn(o,[{key:"getSweepEvents",value:function(){for(var n=this.exteriorRing.getSweepEvents(),a=0,u=this.interiorRings.length;a<u;a++)for(var f=this.interiorRings[a].getSweepEvents(),p=0,y=f.length;p<y;p++)n.push(f[p]);return n}}]),o}(),Ou=function(){function o(r,n){if(On(this,o),!Array.isArray(r))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof r[0][0][0]=="number"&&(r=[r])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var a=0,u=r.length;a<u;a++){var f=new _c(r[a],this);f.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=f.bbox.ll.x),f.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=f.bbox.ll.y),f.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=f.bbox.ur.x),f.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=f.bbox.ur.y),this.polys.push(f)}this.isSubject=n}return tn(o,[{key:"getSweepEvents",value:function(){for(var n=[],a=0,u=this.polys.length;a<u;a++)for(var f=this.polys[a].getSweepEvents(),p=0,y=f.length;p<y;p++)n.push(f[p]);return n}}]),o}(),yc=function(){tn(o,null,[{key:"factory",value:function(n){for(var a=[],u=0,f=n.length;u<f;u++){var p=n[u];if(!(!p.isInResult()||p.ringOut)){for(var y=null,_=p.leftSE,x=p.rightSE,C=[_],D=_.point,H=[];y=_,_=x,C.push(_),_.point!==D;)for(;;){var U=_.getAvailableLinkedEvents();if(U.length===0){var tt=C[0].point,b=C[C.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(tt.x,",")+" ".concat(tt.y,"]. Last matching segment found ends at")+" [".concat(b.x,", ").concat(b.y,"]."))}if(U.length===1){x=U[0].otherSE;break}for(var V=null,rt=0,S=H.length;rt<S;rt++)if(H[rt].point===_.point){V=rt;break}if(V!==null){var E=H.splice(V)[0],O=C.splice(E.index);O.unshift(O[0].otherSE),a.push(new o(O.reverse()));continue}H.push({index:C.length,point:_.point});var z=_.getLeftmostComparator(y);x=U.sort(z)[0].otherSE;break}a.push(new o(C))}}return a}}]);function o(r){On(this,o),this.events=r;for(var n=0,a=r.length;n<a;n++)r[n].segment.ringOut=this;this.poly=null}return tn(o,[{key:"getGeom",value:function(){for(var n=this.events[0].point,a=[n],u=1,f=this.events.length-1;u<f;u++){var p=this.events[u].point,y=this.events[u+1].point;Tu(p,n,y)!==0&&(a.push(p),n=p)}if(a.length===1)return null;var _=a[0],x=a[1];Tu(_,n,x)===0&&a.shift(),a.push(a[0]);for(var C=this.isExteriorRing()?1:-1,D=this.isExteriorRing()?0:a.length-1,H=this.isExteriorRing()?a.length:-1,U=[],tt=D;tt!=H;tt+=C)U.push([a[tt].x,a[tt].y]);return U}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var n=this.events[0],a=1,u=this.events.length;a<u;a++){var f=this.events[a];Pr.compare(n,f)>0&&(n=f)}for(var p=n.segment.prevInResult(),y=p?p.prevInResult():null;;){if(!p)return null;if(!y)return p.ringOut;if(y.ringOut!==p.ringOut)return y.ringOut.enclosingRing()!==p.ringOut?p.ringOut:p.ringOut.enclosingRing();p=y.prevInResult(),y=p?p.prevInResult():null}}}]),o}(),Bu=function(){function o(r){On(this,o),this.exteriorRing=r,r.poly=this,this.interiorRings=[]}return tn(o,[{key:"addInterior",value:function(n){this.interiorRings.push(n),n.poly=this}},{key:"getGeom",value:function(){var n=[this.exteriorRing.getGeom()];if(n[0]===null)return null;for(var a=0,u=this.interiorRings.length;a<u;a++){var f=this.interiorRings[a].getGeom();f!==null&&n.push(f)}return n}}]),o}(),bc=function(){function o(r){On(this,o),this.rings=r,this.polys=this._composePolys(r)}return tn(o,[{key:"getGeom",value:function(){for(var n=[],a=0,u=this.polys.length;a<u;a++){var f=this.polys[a].getGeom();f!==null&&n.push(f)}return n}},{key:"_composePolys",value:function(n){for(var a=[],u=0,f=n.length;u<f;u++){var p=n[u];if(!p.poly)if(p.isExteriorRing())a.push(new Bu(p));else{var y=p.enclosingRing();y.poly||a.push(new Bu(y)),y.poly.addInterior(p)}}return a}}]),o}(),wc=function(){function o(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Za.compare;On(this,o),this.queue=r,this.tree=new Gs(n),this.segments=[]}return tn(o,[{key:"process",value:function(n){var a=n.segment,u=[];if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(a),u;var f=n.isLeft?this.tree.insert(a):this.tree.find(a);if(!f)throw new Error("Unable to find segment #".concat(a.id," ")+"[".concat(a.leftSE.point.x,", ").concat(a.leftSE.point.y,"] -> ")+"[".concat(a.rightSE.point.x,", ").concat(a.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var p=f,y=f,_=void 0,x=void 0;_===void 0;)p=this.tree.prev(p),p===null?_=null:p.key.consumedBy===void 0&&(_=p.key);for(;x===void 0;)y=this.tree.next(y),y===null?x=null:y.key.consumedBy===void 0&&(x=y.key);if(n.isLeft){var C=null;if(_){var D=_.getIntersection(a);if(D!==null&&(a.isAnEndpoint(D)||(C=D),!_.isAnEndpoint(D)))for(var H=this._splitSafely(_,D),U=0,tt=H.length;U<tt;U++)u.push(H[U])}var b=null;if(x){var V=x.getIntersection(a);if(V!==null&&(a.isAnEndpoint(V)||(b=V),!x.isAnEndpoint(V)))for(var rt=this._splitSafely(x,V),S=0,E=rt.length;S<E;S++)u.push(rt[S])}if(C!==null||b!==null){var O=null;if(C===null)O=b;else if(b===null)O=C;else{var z=Pr.comparePoints(C,b);O=z<=0?C:b}this.queue.remove(a.rightSE),u.push(a.rightSE);for(var A=a.split(O),G=0,B=A.length;G<B;G++)u.push(A[G])}u.length>0?(this.tree.remove(a),u.push(n)):(this.segments.push(a),a.prev=_)}else{if(_&&x){var q=_.getIntersection(x);if(q!==null){if(!_.isAnEndpoint(q))for(var et=this._splitSafely(_,q),j=0,it=et.length;j<it;j++)u.push(et[j]);if(!x.isAnEndpoint(q))for(var mt=this._splitSafely(x,q),ft=0,oe=mt.length;ft<oe;ft++)u.push(mt[ft])}}this.tree.remove(a)}return u}},{key:"_splitSafely",value:function(n,a){this.tree.remove(n);var u=n.rightSE;this.queue.remove(u);var f=n.split(a);return f.push(u),n.consumedBy===void 0&&this.tree.insert(n),f}}]),o}(),zu=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,xc=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Pc=function(){function o(){On(this,o)}return tn(o,[{key:"run",value:function(n,a,u){ar.type=n,pa.reset();for(var f=[new Ou(a,!0)],p=0,y=u.length;p<y;p++)f.push(new Ou(u[p],!1));if(ar.numMultiPolys=f.length,ar.type==="difference")for(var _=f[0],x=1;x<f.length;)Ms(f[x].bbox,_.bbox)!==null?x++:f.splice(x,1);if(ar.type==="intersection"){for(var C=0,D=f.length;C<D;C++)for(var H=f[C],U=C+1,tt=f.length;U<tt;U++)if(Ms(H.bbox,f[U].bbox)===null)return[]}for(var b=new Gs(Pr.compare),V=0,rt=f.length;V<rt;V++)for(var S=f[V].getSweepEvents(),E=0,O=S.length;E<O;E++)if(b.insert(S[E]),b.size>zu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var z=new wc(b),A=b.size,G=b.pop();G;){var B=G.key;if(b.size===A){var q=B.segment;throw new Error("Unable to pop() ".concat(B.isLeft?"left":"right"," SweepEvent ")+"[".concat(B.point.x,", ").concat(B.point.y,"] from segment #").concat(q.id," ")+"[".concat(q.leftSE.point.x,", ").concat(q.leftSE.point.y,"] -> ")+"[".concat(q.rightSE.point.x,", ").concat(q.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(b.size>zu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(z.segments.length>xc)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var et=z.process(B),j=0,it=et.length;j<it;j++){var mt=et[j];mt.consumedBy===void 0&&b.insert(mt)}A=b.size,G=b.pop()}pa.reset();var ft=yc.factory(z.segments),oe=new bc(ft);return oe.getGeom()}}]),o}(),ar=new Pc,Lc=function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),u=1;u<n;u++)a[u-1]=arguments[u];return ar.run("union",r,a)},Ec=function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),u=1;u<n;u++)a[u-1]=arguments[u];return ar.run("intersection",r,a)},kc=function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),u=1;u<n;u++)a[u-1]=arguments[u];return ar.run("xor",r,a)},Mc=function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),u=1;u<n;u++)a[u-1]=arguments[u];return ar.run("difference",r,a)},Sc={union:Lc,intersection:Ec,xor:kc,difference:Mc};const Tc=Sc;function Ru(o,r,n){n===void 0&&(n={});var a=ur(o),u=ur(r),f=Tc.intersection(a.coordinates,u.coordinates);return f.length===0?null:f.length===1?eo(f[0],n.properties):Bs(f,n.properties)}function Cc(o,r,n){n===void 0&&(n={});var a=JSON.stringify(n.properties||{}),u=o[0],f=o[1],p=o[2],y=o[3],_=(f+y)/2,x=(u+p)/2,C=r*2/Qr([u,_],[p,_],n),D=C*(p-u),H=r*2/Qr([x,f],[x,y],n),U=H*(y-f),tt=D/2,b=tt*2,V=Math.sqrt(3)/2*U,rt=p-u,S=y-f,E=3/4*b,O=V,z=(rt-b)/(b-tt/2),A=Math.floor(z),G=(A*E-tt/2-rt)/2-tt/2+E/2,B=Math.floor((S-V)/V),q=(S-B*V)/2,et=B*V-S>V/2;et&&(q-=V/4);for(var j=[],it=[],mt=0;mt<6;mt++){var ft=2*Math.PI/6*mt;j.push(Math.cos(ft)),it.push(Math.sin(ft))}for(var oe=[],Rt=0;Rt<=A;Rt++)for(var Qt=0;Qt<=B;Qt++){var pt=Rt%2===1;if(!(Qt===0&&pt)&&!(Qt===0&&et)){var pe=Rt*E+u-G,ct=Qt*O+f+q;if(pt&&(ct-=V/2),n.triangles===!0)Ac([pe,ct],D/2,U/2,JSON.parse(a),j,it).forEach(function(Dt){n.mask?Ru(n.mask,Dt)&&oe.push(Dt):oe.push(Dt)});else{var kt=Ic([pe,ct],D/2,U/2,JSON.parse(a),j,it);n.mask?Ru(n.mask,kt)&&oe.push(kt):oe.push(kt)}}}return sr(oe)}function Ic(o,r,n,a,u,f){for(var p=[],y=0;y<6;y++){var _=o[0]+r*u[y],x=o[1]+n*f[y];p.push([_,x])}return p.push(p[0].slice()),eo([p],a)}function Ac(o,r,n,a,u,f){for(var p=[],y=0;y<6;y++){var _=[];_.push(o),_.push([o[0]+r*u[y],o[1]+n*f[y]]),_.push([o[0]+r*u[(y+1)%6],o[1]+n*f[(y+1)%6]]),_.push(o),p.push(eo([_],a))}return p}var dl={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(o,r){(function(n,a){o.exports=a()})(wi,function(){for(var n=function(l,d,v){return d===void 0&&(d=0),v===void 0&&(v=1),l<d?d:l>v?v:l},a=n,u=function(l){l._clipped=!1,l._unclipped=l.slice(0);for(var d=0;d<=3;d++)d<3?((l[d]<0||l[d]>255)&&(l._clipped=!0),l[d]=a(l[d],0,255)):d===3&&(l[d]=a(l[d],0,1));return l},f={},p=0,y=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];p<y.length;p+=1){var _=y[p];f["[object "+_+"]"]=_.toLowerCase()}var x=function(l){return f[Object.prototype.toString.call(l)]||"object"},C=x,D=function(l,d){return d===void 0&&(d=null),l.length>=3?Array.prototype.slice.call(l):C(l[0])=="object"&&d?d.split("").filter(function(v){return l[0][v]!==void 0}).map(function(v){return l[0][v]}):l[0]},H=x,U=function(l){if(l.length<2)return null;var d=l.length-1;return H(l[d])=="string"?l[d].toLowerCase():null},tt=Math.PI,b={clip_rgb:u,limit:n,type:x,unpack:D,last:U,PI:tt,TWOPI:tt*2,PITHIRD:tt/3,DEG2RAD:tt/180,RAD2DEG:180/tt},V={format:{},autodetect:[]},rt=b.last,S=b.clip_rgb,E=b.type,O=V,z=function(){for(var d=[],v=arguments.length;v--;)d[v]=arguments[v];var w=this;if(E(d[0])==="object"&&d[0].constructor&&d[0].constructor===this.constructor)return d[0];var T=rt(d),I=!1;if(!T){I=!0,O.sorted||(O.autodetect=O.autodetect.sort(function(X,at){return at.p-X.p}),O.sorted=!0);for(var M=0,N=O.autodetect;M<N.length;M+=1){var Z=N[M];if(T=Z.test.apply(Z,d),T)break}}if(O.format[T]){var W=O.format[T].apply(null,I?d:d.slice(0,-1));w._rgb=S(W)}else throw new Error("unknown format: "+d);w._rgb.length===3&&w._rgb.push(1)};z.prototype.toString=function(){return E(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var A=z,G=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(G.Color,[null].concat(l)))};G.Color=A,G.version="2.4.2";var B=G,q=b.unpack,et=Math.max,j=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=q(l,"rgb"),w=v[0],T=v[1],I=v[2];w=w/255,T=T/255,I=I/255;var M=1-et(w,et(T,I)),N=M<1?1/(1-M):0,Z=(1-w-M)*N,W=(1-T-M)*N,X=(1-I-M)*N;return[Z,W,X,M]},it=j,mt=b.unpack,ft=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=mt(l,"cmyk");var v=l[0],w=l[1],T=l[2],I=l[3],M=l.length>4?l[4]:1;return I===1?[0,0,0,M]:[v>=1?0:255*(1-v)*(1-I),w>=1?0:255*(1-w)*(1-I),T>=1?0:255*(1-T)*(1-I),M]},oe=ft,Rt=B,Qt=A,pt=V,pe=b.unpack,ct=b.type,kt=it;Qt.prototype.cmyk=function(){return kt(this._rgb)},Rt.cmyk=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Qt,[null].concat(l,["cmyk"])))},pt.format.cmyk=oe,pt.autodetect.push({p:2,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=pe(l,"cmyk"),ct(l)==="array"&&l.length===4)return"cmyk"}});var Dt=b.unpack,be=b.last,Mt=function(l){return Math.round(l*100)/100},xt=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Dt(l,"hsla"),w=be(l)||"lsa";return v[0]=Mt(v[0]||0),v[1]=Mt(v[1]*100)+"%",v[2]=Mt(v[2]*100)+"%",w==="hsla"||v.length>3&&v[3]<1?(v[3]=v.length>3?v[3]:1,w="hsla"):v.length=3,w+"("+v.join(",")+")"},st=xt,Nt=b.unpack,ve=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=Nt(l,"rgba");var v=l[0],w=l[1],T=l[2];v/=255,w/=255,T/=255;var I=Math.min(v,w,T),M=Math.max(v,w,T),N=(M+I)/2,Z,W;return M===I?(Z=0,W=Number.NaN):Z=N<.5?(M-I)/(M+I):(M-I)/(2-M-I),v==M?W=(w-T)/(M-I):w==M?W=2+(T-v)/(M-I):T==M&&(W=4+(v-w)/(M-I)),W*=60,W<0&&(W+=360),l.length>3&&l[3]!==void 0?[W,Z,N,l[3]]:[W,Z,N]},en=ve,le=b.unpack,Lt=b.last,gt=st,me=en,nn=Math.round,Le=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=le(l,"rgba"),w=Lt(l)||"rgb";return w.substr(0,3)=="hsl"?gt(me(v),w):(v[0]=nn(v[0]),v[1]=nn(v[1]),v[2]=nn(v[2]),(w==="rgba"||v.length>3&&v[3]<1)&&(v[3]=v.length>3?v[3]:1,w="rgba"),w+"("+v.slice(0,w==="rgb"?3:4).join(",")+")")},lr=Le,Ue=b.unpack,rn=Math.round,vn=function(){for(var l,d=[],v=arguments.length;v--;)d[v]=arguments[v];d=Ue(d,"hsl");var w=d[0],T=d[1],I=d[2],M,N,Z;if(T===0)M=N=Z=I*255;else{var W=[0,0,0],X=[0,0,0],at=I<.5?I*(1+T):I+T-I*T,K=2*I-at,dt=w/360;W[0]=dt+1/3,W[1]=dt,W[2]=dt-1/3;for(var ht=0;ht<3;ht++)W[ht]<0&&(W[ht]+=1),W[ht]>1&&(W[ht]-=1),6*W[ht]<1?X[ht]=K+(at-K)*6*W[ht]:2*W[ht]<1?X[ht]=at:3*W[ht]<2?X[ht]=K+(at-K)*(2/3-W[ht])*6:X[ht]=K;l=[rn(X[0]*255),rn(X[1]*255),rn(X[2]*255)],M=l[0],N=l[1],Z=l[2]}return d.length>3?[M,N,Z,d[3]]:[M,N,Z,1]},zn=vn,Pn=zn,jt=V,Oe=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,on=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,mn=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,an=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Rn=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,sn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,we=Math.round,gn=function(l){l=l.toLowerCase().trim();var d;if(jt.format.named)try{return jt.format.named(l)}catch{}if(d=l.match(Oe)){for(var v=d.slice(1,4),w=0;w<3;w++)v[w]=+v[w];return v[3]=1,v}if(d=l.match(on)){for(var T=d.slice(1,5),I=0;I<4;I++)T[I]=+T[I];return T}if(d=l.match(mn)){for(var M=d.slice(1,4),N=0;N<3;N++)M[N]=we(M[N]*2.55);return M[3]=1,M}if(d=l.match(an)){for(var Z=d.slice(1,5),W=0;W<3;W++)Z[W]=we(Z[W]*2.55);return Z[3]=+Z[3],Z}if(d=l.match(Rn)){var X=d.slice(1,4);X[1]*=.01,X[2]*=.01;var at=Pn(X);return at[3]=1,at}if(d=l.match(sn)){var K=d.slice(1,4);K[1]*=.01,K[2]*=.01;var dt=Pn(K);return dt[3]=+d[4],dt}};gn.test=function(l){return Oe.test(l)||on.test(l)||mn.test(l)||an.test(l)||Rn.test(l)||sn.test(l)};var fr=gn,Er=B,$e=A,un=V,Nn=b.type,Zn=lr,Ln=fr;$e.prototype.css=function(l){return Zn(this._rgb,l)},Er.css=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply($e,[null].concat(l,["css"])))},un.format.css=Ln,un.autodetect.push({p:5,test:function(l){for(var d=[],v=arguments.length-1;v-- >0;)d[v]=arguments[v+1];if(!d.length&&Nn(l)==="string"&&Ln.test(l))return"css"}});var kr=A,hr=B,ti=V,Mi=b.unpack;ti.format.gl=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Mi(l,"rgba");return v[0]*=255,v[1]*=255,v[2]*=255,v},hr.gl=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(kr,[null].concat(l,["gl"])))},kr.prototype.gl=function(){var l=this._rgb;return[l[0]/255,l[1]/255,l[2]/255,l[3]]};var Mr=b.unpack,Ee=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Mr(l,"rgb"),w=v[0],T=v[1],I=v[2],M=Math.min(w,T,I),N=Math.max(w,T,I),Z=N-M,W=Z*100/255,X=M/(255-Z)*100,at;return Z===0?at=Number.NaN:(w===N&&(at=(T-I)/Z),T===N&&(at=2+(I-w)/Z),I===N&&(at=4+(w-T)/Z),at*=60,at<0&&(at+=360)),[at,W,X]},Do=Ee,$n=b.unpack,Go=Math.floor,io=function(){for(var l,d,v,w,T,I,M=[],N=arguments.length;N--;)M[N]=arguments[N];M=$n(M,"hcg");var Z=M[0],W=M[1],X=M[2],at,K,dt;X=X*255;var ht=W*255;if(W===0)at=K=dt=X;else{Z===360&&(Z=0),Z>360&&(Z-=360),Z<0&&(Z+=360),Z/=60;var Ot=Go(Z),$t=Z-Ot,Wt=X*(1-W),Yt=Wt+ht*(1-$t),Ne=Wt+ht*$t,Ie=Wt+ht;switch(Ot){case 0:l=[Ie,Ne,Wt],at=l[0],K=l[1],dt=l[2];break;case 1:d=[Yt,Ie,Wt],at=d[0],K=d[1],dt=d[2];break;case 2:v=[Wt,Ie,Ne],at=v[0],K=v[1],dt=v[2];break;case 3:w=[Wt,Yt,Ie],at=w[0],K=w[1],dt=w[2];break;case 4:T=[Ne,Wt,Ie],at=T[0],K=T[1],dt=T[2];break;case 5:I=[Ie,Wt,Yt],at=I[0],K=I[1],dt=I[2];break}}return[at,K,dt,M.length>3?M[3]:1]},oo=io,cr=b.unpack,ao=b.type,Ho=B,Si=A,so=V,Ye=Do;Si.prototype.hcg=function(){return Ye(this._rgb)},Ho.hcg=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Si,[null].concat(l,["hcg"])))},so.format.hcg=oo,so.autodetect.push({p:1,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=cr(l,"hcg"),ao(l)==="array"&&l.length===3)return"hcg"}});var vt=b.unpack,Ti=b.last,dr=Math.round,ei=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=vt(l,"rgba"),w=v[0],T=v[1],I=v[2],M=v[3],N=Ti(l)||"auto";M===void 0&&(M=1),N==="auto"&&(N=M<1?"rgba":"rgb"),w=dr(w),T=dr(T),I=dr(I);var Z=w<<16|T<<8|I,W="000000"+Z.toString(16);W=W.substr(W.length-6);var X="0"+dr(M*255).toString(16);switch(X=X.substr(X.length-2),N.toLowerCase()){case"rgba":return"#"+W+X;case"argb":return"#"+X+W;default:return"#"+W}},Fn=ei,Sr=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ni=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,En=function(l){if(l.match(Sr)){(l.length===4||l.length===7)&&(l=l.substr(1)),l.length===3&&(l=l.split(""),l=l[0]+l[0]+l[1]+l[1]+l[2]+l[2]);var d=parseInt(l,16),v=d>>16,w=d>>8&255,T=d&255;return[v,w,T,1]}if(l.match(ni)){(l.length===5||l.length===9)&&(l=l.substr(1)),l.length===4&&(l=l.split(""),l=l[0]+l[0]+l[1]+l[1]+l[2]+l[2]+l[3]+l[3]);var I=parseInt(l,16),M=I>>24&255,N=I>>16&255,Z=I>>8&255,W=Math.round((I&255)/255*100)/100;return[M,N,Z,W]}throw new Error("unknown hex color: "+l)},Dn=En,Wo=B,uo=A,qo=b.type,lo=V,fo=Fn;uo.prototype.hex=function(l){return fo(this._rgb,l)},Wo.hex=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(uo,[null].concat(l,["hex"])))},lo.format.hex=Dn,lo.autodetect.push({p:4,test:function(l){for(var d=[],v=arguments.length-1;v-- >0;)d[v]=arguments[v+1];if(!d.length&&qo(l)==="string"&&[3,4,5,6,7,8,9].indexOf(l.length)>=0)return"hex"}});var Uo=b.unpack,kn=b.TWOPI,Tr=Math.min,ho=Math.sqrt,Ct=Math.acos,Gn=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Uo(l,"rgb"),w=v[0],T=v[1],I=v[2];w/=255,T/=255,I/=255;var M,N=Tr(w,T,I),Z=(w+T+I)/3,W=Z>0?1-N/Z:0;return W===0?M=NaN:(M=(w-T+(w-I))/2,M/=ho((w-T)*(w-T)+(w-I)*(T-I)),M=Ct(M),I>T&&(M=kn-M),M/=kn),[M*360,W,Z]},Yo=Gn,Ci=b.unpack,Hn=b.limit,Wn=b.TWOPI,ri=b.PITHIRD,fe=Math.cos,Ft=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=Ci(l,"hsi");var v=l[0],w=l[1],T=l[2],I,M,N;return isNaN(v)&&(v=0),isNaN(w)&&(w=0),v>360&&(v-=360),v<0&&(v+=360),v/=360,v<1/3?(N=(1-w)/3,I=(1+w*fe(Wn*v)/fe(ri-Wn*v))/3,M=1-(N+I)):v<2/3?(v-=1/3,I=(1-w)/3,M=(1+w*fe(Wn*v)/fe(ri-Wn*v))/3,N=1-(I+M)):(v-=2/3,M=(1-w)/3,N=(1+w*fe(Wn*v)/fe(ri-Wn*v))/3,I=1-(M+N)),I=Hn(T*I*3),M=Hn(T*M*3),N=Hn(T*N*3),[I*255,M*255,N*255,l.length>3?l[3]:1]},ne=Ft,ii=b.unpack,pr=b.type,vr=B,Fe=A,Pt=V,se=Yo;Fe.prototype.hsi=function(){return se(this._rgb)},vr.hsi=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Fe,[null].concat(l,["hsi"])))},Pt.format.hsi=ne,Pt.autodetect.push({p:2,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=ii(l,"hsi"),pr(l)==="array"&&l.length===3)return"hsi"}});var Ii=b.unpack,oi=b.type,De=B,Cr=A,Ir=V,qn=en;Cr.prototype.hsl=function(){return qn(this._rgb)},De.hsl=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Cr,[null].concat(l,["hsl"])))},Ir.format.hsl=zn,Ir.autodetect.push({p:2,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=Ii(l,"hsl"),oi(l)==="array"&&l.length===3)return"hsl"}});var Ht=b.unpack,Un=Math.min,Ar=Math.max,Or=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=Ht(l,"rgb");var v=l[0],w=l[1],T=l[2],I=Un(v,w,T),M=Ar(v,w,T),N=M-I,Z,W,X;return X=M/255,M===0?(Z=Number.NaN,W=0):(W=N/M,v===M&&(Z=(w-T)/N),w===M&&(Z=2+(T-v)/N),T===M&&(Z=4+(v-w)/N),Z*=60,Z<0&&(Z+=360)),[Z,W,X]},Ai=Or,Br=b.unpack,ai=Math.floor,zr=function(){for(var l,d,v,w,T,I,M=[],N=arguments.length;N--;)M[N]=arguments[N];M=Br(M,"hsv");var Z=M[0],W=M[1],X=M[2],at,K,dt;if(X*=255,W===0)at=K=dt=X;else{Z===360&&(Z=0),Z>360&&(Z-=360),Z<0&&(Z+=360),Z/=60;var ht=ai(Z),Ot=Z-ht,$t=X*(1-W),Wt=X*(1-W*Ot),Yt=X*(1-W*(1-Ot));switch(ht){case 0:l=[X,Yt,$t],at=l[0],K=l[1],dt=l[2];break;case 1:d=[Wt,X,$t],at=d[0],K=d[1],dt=d[2];break;case 2:v=[$t,X,Yt],at=v[0],K=v[1],dt=v[2];break;case 3:w=[$t,Wt,X],at=w[0],K=w[1],dt=w[2];break;case 4:T=[Yt,$t,X],at=T[0],K=T[1],dt=T[2];break;case 5:I=[X,$t,Wt],at=I[0],K=I[1],dt=I[2];break}}return[at,K,dt,M.length>3?M[3]:1]},Rr=zr,mr=b.unpack,Oi=b.type,_n=B,Bi=A,si=V,Xo=Ai;Bi.prototype.hsv=function(){return Xo(this._rgb)},_n.hsv=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Bi,[null].concat(l,["hsv"])))},si.format.hsv=Rr,si.autodetect.push({p:2,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=mr(l,"hsv"),Oi(l)==="array"&&l.length===3)return"hsv"}});var bt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ge=bt,Vt=b.unpack,zi=Math.pow,Ri=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Vt(l,"rgb"),w=v[0],T=v[1],I=v[2],M=Xn(w,T,I),N=M[0],Z=M[1],W=M[2],X=116*Z-16;return[X<0?0:X,500*(N-Z),200*(Z-W)]},Yn=function(l){return(l/=255)<=.04045?l/12.92:zi((l+.055)/1.055,2.4)},Nr=function(l){return l>ge.t3?zi(l,1/3):l/ge.t2+ge.t0},Xn=function(l,d,v){l=Yn(l),d=Yn(d),v=Yn(v);var w=Nr((.4124564*l+.3575761*d+.1804375*v)/ge.Xn),T=Nr((.2126729*l+.7151522*d+.072175*v)/ge.Yn),I=Nr((.0193339*l+.119192*d+.9503041*v)/ge.Zn);return[w,T,I]},ui=Ri,ln=bt,he=b.unpack,Vn=Math.pow,Ni=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=he(l,"lab");var v=l[0],w=l[1],T=l[2],I,M,N,Z,W,X;return M=(v+16)/116,I=isNaN(w)?M:M+w/500,N=isNaN(T)?M:M-T/200,M=ln.Yn*Zi(M),I=ln.Xn*Zi(I),N=ln.Zn*Zi(N),Z=li(3.2404542*I-1.5371385*M-.4985314*N),W=li(-.969266*I+1.8760108*M+.041556*N),X=li(.0556434*I-.2040259*M+1.0572252*N),[Z,W,X,l.length>3?l[3]:1]},li=function(l){return 255*(l<=.00304?12.92*l:1.055*Vn(l,1/2.4)-.055)},Zi=function(l){return l>ln.t1?l*l*l:ln.t2*(l-ln.t0)},fi=Ni,$i=b.unpack,Vo=b.type,co=B,At=A,Fi=V,Xe=ui;At.prototype.lab=function(){return Xe(this._rgb)},co.lab=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(At,[null].concat(l,["lab"])))},Fi.format.lab=fi,Fi.autodetect.push({p:2,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=$i(l,"lab"),Vo(l)==="array"&&l.length===3)return"lab"}});var Jn=b.unpack,po=b.RAD2DEG,Jo=Math.sqrt,Di=Math.atan2,Ko=Math.round,vo=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Jn(l,"lab"),w=v[0],T=v[1],I=v[2],M=Jo(T*T+I*I),N=(Di(I,T)*po+360)%360;return Ko(M*1e4)===0&&(N=Number.NaN),[w,M,N]},mo=vo,go=b.unpack,Zr=ui,Qo=mo,fn=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=go(l,"rgb"),w=v[0],T=v[1],I=v[2],M=Zr(w,T,I),N=M[0],Z=M[1],W=M[2];return Qo(N,Z,W)},jo=fn,_o=b.unpack,yn=b.DEG2RAD,yo=Math.sin,bo=Math.cos,Gi=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=_o(l,"lch"),w=v[0],T=v[1],I=v[2];return isNaN(I)&&(I=0),I=I*yn,[w,bo(I)*T,yo(I)*T]},wo=Gi,$r=b.unpack,xo=wo,gr=fi,Po=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=$r(l,"lch");var v=l[0],w=l[1],T=l[2],I=xo(v,w,T),M=I[0],N=I[1],Z=I[2],W=gr(M,N,Z),X=W[0],at=W[1],K=W[2];return[X,at,K,l.length>3?l[3]:1]},Be=Po,ta=b.unpack,Lo=Be,Eo=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=ta(l,"hcl").reverse();return Lo.apply(void 0,v)},hi=Eo,bn=b.unpack,ea=b.type,wn=B,xe=A,ci=V,_r=jo;xe.prototype.lch=function(){return _r(this._rgb)},xe.prototype.hcl=function(){return _r(this._rgb).reverse()},wn.lch=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(xe,[null].concat(l,["lch"])))},wn.hcl=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(xe,[null].concat(l,["hcl"])))},ci.format.lch=Be,ci.format.hcl=hi,["lch","hcl"].forEach(function(l){return ci.autodetect.push({p:2,test:function(){for(var d=[],v=arguments.length;v--;)d[v]=arguments[v];if(d=bn(d,l),ea(d)==="array"&&d.length===3)return l}})});var ko={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Fr=ko,Hi=A,Mo=V,di=b.type,Ge=Fr,na=Dn,He=Fn;Hi.prototype.name=function(){for(var l=He(this._rgb,"rgb"),d=0,v=Object.keys(Ge);d<v.length;d+=1){var w=v[d];if(Ge[w]===l)return w.toLowerCase()}return l},Mo.format.named=function(l){if(l=l.toLowerCase(),Ge[l])return na(Ge[l]);throw new Error("unknown color name: "+l)},Mo.autodetect.push({p:5,test:function(l){for(var d=[],v=arguments.length-1;v-- >0;)d[v]=arguments[v+1];if(!d.length&&di(l)==="string"&&Ge[l.toLowerCase()])return"named"}});var xn=b.unpack,ra=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=xn(l,"rgb"),w=v[0],T=v[1],I=v[2];return(w<<16)+(T<<8)+I},ke=ra,yr=b.type,ue=function(l){if(yr(l)=="number"&&l>=0&&l<=16777215){var d=l>>16,v=l>>8&255,w=l&255;return[d,v,w,1]}throw new Error("unknown num color: "+l)},Kn=ue,Qn=B,Dr=A,Gr=V,pi=b.type,Ve=ke;Dr.prototype.num=function(){return Ve(this._rgb)},Qn.num=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Dr,[null].concat(l,["num"])))},Gr.format.num=Kn,Gr.autodetect.push({p:5,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l.length===1&&pi(l[0])==="number"&&l[0]>=0&&l[0]<=16777215)return"num"}});var Me=B,Mn=A,Hr=V,Wr=b.unpack,ze=b.type,Wi=Math.round;Mn.prototype.rgb=function(l){return l===void 0&&(l=!0),l===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Wi)},Mn.prototype.rgba=function(l){return l===void 0&&(l=!0),this._rgb.slice(0,4).map(function(d,v){return v<3?l===!1?d:Wi(d):d})},Me.rgb=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Mn,[null].concat(l,["rgb"])))},Hr.format.rgb=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Wr(l,"rgba");return v[3]===void 0&&(v[3]=1),v},Hr.autodetect.push({p:3,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=Wr(l,"rgba"),ze(l)==="array"&&(l.length===3||l.length===4&&ze(l[3])=="number"&&l[3]>=0&&l[3]<=1))return"rgb"}});var hn=Math.log,So=function(l){var d=l/100,v,w,T;return d<66?(v=255,w=d<6?0:-155.25485562709179-.44596950469579133*(w=d-2)+104.49216199393888*hn(w),T=d<20?0:-254.76935184120902+.8274096064007395*(T=d-10)+115.67994401066147*hn(T)):(v=351.97690566805693+.114206453784165*(v=d-55)-40.25366309332127*hn(v),w=325.4494125711974+.07943456536662342*(w=d-50)-28.0852963507957*hn(w),T=255),[v,w,T,1]},Je=So,Ke=Je,qi=b.unpack,Ui=Math.round,qr=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];for(var v=qi(l,"rgb"),w=v[0],T=v[2],I=1e3,M=4e4,N=.4,Z;M-I>N;){Z=(M+I)*.5;var W=Ke(Z);W[2]/W[0]>=T/w?M=Z:I=Z}return Ui(Z)},Ur=qr,jn=B,cn=A,tr=V,h=Ur;cn.prototype.temp=cn.prototype.kelvin=cn.prototype.temperature=function(){return h(this._rgb)},jn.temp=jn.kelvin=jn.temperature=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(cn,[null].concat(l,["temp"])))},tr.format.temp=tr.format.kelvin=tr.format.temperature=Je;var g=b.unpack,P=Math.cbrt,F=Math.pow,nt=Math.sign,J=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=g(l,"rgb"),w=v[0],T=v[1],I=v[2],M=[lt(w/255),lt(T/255),lt(I/255)],N=M[0],Z=M[1],W=M[2],X=P(.4122214708*N+.5363325363*Z+.0514459929*W),at=P(.2119034982*N+.6806995451*Z+.1073969566*W),K=P(.0883024619*N+.2817188376*Z+.6299787005*W);return[.2104542553*X+.793617785*at-.0040720468*K,1.9779984951*X-2.428592205*at+.4505937099*K,.0259040371*X+.7827717662*at-.808675766*K]},ut=J;function lt(l){var d=Math.abs(l);return d<.04045?l/12.92:(nt(l)||1)*F((d+.055)/1.055,2.4)}var wt=b.unpack,Et=Math.pow,Zt=Math.sign,re=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=wt(l,"lab");var v=l[0],w=l[1],T=l[2],I=Et(v+.3963377774*w+.2158037573*T,3),M=Et(v-.1055613458*w-.0638541728*T,3),N=Et(v-.0894841775*w-1.291485548*T,3);return[255*ce(4.0767416621*I-3.3077115913*M+.2309699292*N),255*ce(-1.2684380046*I+2.6097574011*M-.3413193965*N),255*ce(-.0041960863*I-.7034186147*M+1.707614701*N),l.length>3?l[3]:1]},te=re;function ce(l){var d=Math.abs(l);return d>.0031308?(Zt(l)||1)*(1.055*Et(d,1/2.4)-.055):l*12.92}var de=b.unpack,Sn=b.type,Re=B,Tn=A,Cn=V,Yr=ut;Tn.prototype.oklab=function(){return Yr(this._rgb)},Re.oklab=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(Tn,[null].concat(l,["oklab"])))},Cn.format.oklab=te,Cn.autodetect.push({p:3,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=de(l,"oklab"),Sn(l)==="array"&&l.length===3)return"oklab"}});var Xr=b.unpack,Ka=ut,er=mo,ga=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];var v=Xr(l,"rgb"),w=v[0],T=v[1],I=v[2],M=Ka(w,T,I),N=M[0],Z=M[1],W=M[2];return er(N,Z,W)},_a=ga,Yi=b.unpack,Qa=wo,To=te,Xi=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];l=Yi(l,"lch");var v=l[0],w=l[1],T=l[2],I=Qa(v,w,T),M=I[0],N=I[1],Z=I[2],W=To(M,N,Z),X=W[0],at=W[1],K=W[2];return[X,at,K,l.length>3?l[3]:1]},ya=Xi,ba=b.unpack,ja=b.type,wa=B,ia=A,oa=V,xa=_a;ia.prototype.oklch=function(){return xa(this._rgb)},wa.oklch=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];return new(Function.prototype.bind.apply(ia,[null].concat(l,["oklch"])))},oa.format.oklch=ya,oa.autodetect.push({p:3,test:function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];if(l=ba(l,"oklch"),ja(l)==="array"&&l.length===3)return"oklch"}});var aa=A,ts=b.type;aa.prototype.alpha=function(l,d){return d===void 0&&(d=!1),l!==void 0&&ts(l)==="number"?d?(this._rgb[3]=l,this):new aa([this._rgb[0],this._rgb[1],this._rgb[2],l],"rgb"):this._rgb[3]};var Pa=A;Pa.prototype.clipped=function(){return this._rgb._clipped||!1};var br=A,es=bt;br.prototype.darken=function(l){l===void 0&&(l=1);var d=this,v=d.lab();return v[0]-=es.Kn*l,new br(v,"lab").alpha(d.alpha(),!0)},br.prototype.brighten=function(l){return l===void 0&&(l=1),this.darken(-l)},br.prototype.darker=br.prototype.darken,br.prototype.brighter=br.prototype.brighten;var t=A;t.prototype.get=function(l){var d=l.split("."),v=d[0],w=d[1],T=this[v]();if(w){var I=v.indexOf(w)-(v.substr(0,2)==="ok"?2:0);if(I>-1)return T[I];throw new Error("unknown channel "+w+" in mode "+v)}else return T};var e=A,i=b.type,s=Math.pow,c=1e-7,m=20;e.prototype.luminance=function(l){if(l!==void 0&&i(l)==="number"){if(l===0)return new e([0,0,0,this._rgb[3]],"rgb");if(l===1)return new e([255,255,255,this._rgb[3]],"rgb");var d=this.luminance(),v="rgb",w=m,T=function(M,N){var Z=M.interpolate(N,.5,v),W=Z.luminance();return Math.abs(l-W)<c||!w--?Z:W>l?T(M,Z):T(Z,N)},I=(d>l?T(new e([0,0,0]),this):T(this,new e([255,255,255]))).rgb();return new e(I.concat([this._rgb[3]]))}return k.apply(void 0,this._rgb.slice(0,3))};var k=function(l,d,v){return l=R(l),d=R(d),v=R(v),.2126*l+.7152*d+.0722*v},R=function(l){return l/=255,l<=.03928?l/12.92:s((l+.055)/1.055,2.4)},$={},Y=A,ot=b.type,_t=$,St=function(l,d,v){v===void 0&&(v=.5);for(var w=[],T=arguments.length-3;T-- >0;)w[T]=arguments[T+3];var I=w[0]||"lrgb";if(!_t[I]&&!w.length&&(I=Object.keys(_t)[0]),!_t[I])throw new Error("interpolation mode "+I+" is not defined");return ot(l)!=="object"&&(l=new Y(l)),ot(d)!=="object"&&(d=new Y(d)),_t[I](l,d,v).alpha(l.alpha()+v*(d.alpha()-l.alpha()))},Se=A,_e=St;Se.prototype.mix=Se.prototype.interpolate=function(l,d){d===void 0&&(d=.5);for(var v=[],w=arguments.length-2;w-- >0;)v[w]=arguments[w+2];return _e.apply(void 0,[this,l,d].concat(v))};var Qe=A;Qe.prototype.premultiply=function(l){l===void 0&&(l=!1);var d=this._rgb,v=d[3];return l?(this._rgb=[d[0]*v,d[1]*v,d[2]*v,v],this):new Qe([d[0]*v,d[1]*v,d[2]*v,v],"rgb")};var Te=A,vi=bt;Te.prototype.saturate=function(l){l===void 0&&(l=1);var d=this,v=d.lch();return v[1]+=vi.Kn*l,v[1]<0&&(v[1]=0),new Te(v,"lch").alpha(d.alpha(),!0)},Te.prototype.desaturate=function(l){return l===void 0&&(l=1),this.saturate(-l)};var La=A,Ea=b.type;La.prototype.set=function(l,d,v){v===void 0&&(v=!1);var w=l.split("."),T=w[0],I=w[1],M=this[T]();if(I){var N=T.indexOf(I)-(T.substr(0,2)==="ok"?2:0);if(N>-1){if(Ea(d)=="string")switch(d.charAt(0)){case"+":M[N]+=+d;break;case"-":M[N]+=+d;break;case"*":M[N]*=+d.substr(1);break;case"/":M[N]/=+d.substr(1);break;default:M[N]=+d}else if(Ea(d)==="number")M[N]=d;else throw new Error("unsupported value for Color.set");var Z=new La(M,T);return v?(this._rgb=Z._rgb,this):Z}throw new Error("unknown channel "+I+" in mode "+T)}else return M};var ns=A,ka=function(l,d,v){var w=l._rgb,T=d._rgb;return new ns(w[0]+v*(T[0]-w[0]),w[1]+v*(T[1]-w[1]),w[2]+v*(T[2]-w[2]),"rgb")};$.rgb=ka;var rs=A,Co=Math.sqrt,ie=Math.pow,Io=function(l,d,v){var w=l._rgb,T=w[0],I=w[1],M=w[2],N=d._rgb,Z=N[0],W=N[1],X=N[2];return new rs(Co(ie(T,2)*(1-v)+ie(Z,2)*v),Co(ie(I,2)*(1-v)+ie(W,2)*v),Co(ie(M,2)*(1-v)+ie(X,2)*v),"rgb")};$.lrgb=Io;var is=A,os=function(l,d,v){var w=l.lab(),T=d.lab();return new is(w[0]+v*(T[0]-w[0]),w[1]+v*(T[1]-w[1]),w[2]+v*(T[2]-w[2]),"lab")};$.lab=os;var Ma=A,wr=function(l,d,v,w){var T,I,M,N;w==="hsl"?(M=l.hsl(),N=d.hsl()):w==="hsv"?(M=l.hsv(),N=d.hsv()):w==="hcg"?(M=l.hcg(),N=d.hcg()):w==="hsi"?(M=l.hsi(),N=d.hsi()):w==="lch"||w==="hcl"?(w="hcl",M=l.hcl(),N=d.hcl()):w==="oklch"&&(M=l.oklch().reverse(),N=d.oklch().reverse());var Z,W,X,at,K,dt;(w.substr(0,1)==="h"||w==="oklch")&&(T=M,Z=T[0],X=T[1],K=T[2],I=N,W=I[0],at=I[1],dt=I[2]);var ht,Ot,$t,Wt;return!isNaN(Z)&&!isNaN(W)?(W>Z&&W-Z>180?Wt=W-(Z+360):W<Z&&Z-W>180?Wt=W+360-Z:Wt=W-Z,Ot=Z+v*Wt):isNaN(Z)?isNaN(W)?Ot=Number.NaN:(Ot=W,(K==1||K==0)&&w!="hsv"&&(ht=at)):(Ot=Z,(dt==1||dt==0)&&w!="hsv"&&(ht=X)),ht===void 0&&(ht=X+v*(at-X)),$t=K+v*(dt-K),w==="oklch"?new Ma([$t,ht,Ot],w):new Ma([Ot,ht,$t],w)},Sa=wr,Ta=function(l,d,v){return Sa(l,d,v,"lch")};$.lch=Ta,$.hcl=Ta;var Fl=A,Dl=function(l,d,v){var w=l.num(),T=d.num();return new Fl(w+v*(T-w),"num")};$.num=Dl;var Gl=wr,Hl=function(l,d,v){return Gl(l,d,v,"hcg")};$.hcg=Hl;var Wl=wr,ql=function(l,d,v){return Wl(l,d,v,"hsi")};$.hsi=ql;var Ul=wr,Yl=function(l,d,v){return Ul(l,d,v,"hsl")};$.hsl=Yl;var Xl=wr,Vl=function(l,d,v){return Xl(l,d,v,"hsv")};$.hsv=Vl;var Jl=A,Kl=function(l,d,v){var w=l.oklab(),T=d.oklab();return new Jl(w[0]+v*(T[0]-w[0]),w[1]+v*(T[1]-w[1]),w[2]+v*(T[2]-w[2]),"oklab")};$.oklab=Kl;var Ql=wr,jl=function(l,d,v){return Ql(l,d,v,"oklch")};$.oklch=jl;var as=A,tf=b.clip_rgb,ss=Math.pow,us=Math.sqrt,ls=Math.PI,js=Math.cos,tu=Math.sin,ef=Math.atan2,nf=function(l,d,v){d===void 0&&(d="lrgb"),v===void 0&&(v=null);var w=l.length;v||(v=Array.from(new Array(w)).map(function(){return 1}));var T=w/v.reduce(function(Ot,$t){return Ot+$t});if(v.forEach(function(Ot,$t){v[$t]*=T}),l=l.map(function(Ot){return new as(Ot)}),d==="lrgb")return rf(l,v);for(var I=l.shift(),M=I.get(d),N=[],Z=0,W=0,X=0;X<M.length;X++)if(M[X]=(M[X]||0)*v[0],N.push(isNaN(M[X])?0:v[0]),d.charAt(X)==="h"&&!isNaN(M[X])){var at=M[X]/180*ls;Z+=js(at)*v[0],W+=tu(at)*v[0]}var K=I.alpha()*v[0];l.forEach(function(Ot,$t){var Wt=Ot.get(d);K+=Ot.alpha()*v[$t+1];for(var Yt=0;Yt<M.length;Yt++)if(!isNaN(Wt[Yt]))if(N[Yt]+=v[$t+1],d.charAt(Yt)==="h"){var Ne=Wt[Yt]/180*ls;Z+=js(Ne)*v[$t+1],W+=tu(Ne)*v[$t+1]}else M[Yt]+=Wt[Yt]*v[$t+1]});for(var dt=0;dt<M.length;dt++)if(d.charAt(dt)==="h"){for(var ht=ef(W/N[dt],Z/N[dt])/ls*180;ht<0;)ht+=360;for(;ht>=360;)ht-=360;M[dt]=ht}else M[dt]=M[dt]/N[dt];return K/=w,new as(M,d).alpha(K>.99999?1:K,!0)},rf=function(l,d){for(var v=l.length,w=[0,0,0,0],T=0;T<l.length;T++){var I=l[T],M=d[T]/v,N=I._rgb;w[0]+=ss(N[0],2)*M,w[1]+=ss(N[1],2)*M,w[2]+=ss(N[2],2)*M,w[3]+=N[3]*M}return w[0]=us(w[0]),w[1]=us(w[1]),w[2]=us(w[2]),w[3]>.9999999&&(w[3]=1),new as(tf(w))},nr=B,Ao=b.type,of=Math.pow,fs=function(l){var d="rgb",v=nr("#ccc"),w=0,T=[0,1],I=[],M=[0,0],N=!1,Z=[],W=!1,X=0,at=1,K=!1,dt={},ht=!0,Ot=1,$t=function(Q){if(Q=Q||["#fff","#000"],Q&&Ao(Q)==="string"&&nr.brewer&&nr.brewer[Q.toLowerCase()]&&(Q=nr.brewer[Q.toLowerCase()]),Ao(Q)==="array"){Q.length===1&&(Q=[Q[0],Q[0]]),Q=Q.slice(0);for(var yt=0;yt<Q.length;yt++)Q[yt]=nr(Q[yt]);I.length=0;for(var zt=0;zt<Q.length;zt++)I.push(zt/(Q.length-1))}return dn(),Z=Q},Wt=function(Q){if(N!=null){for(var yt=N.length-1,zt=0;zt<yt&&Q>=N[zt];)zt++;return zt-1}return 0},Yt=function(Q){return Q},Ne=function(Q){return Q},Ie=function(Q,yt){var zt,Bt;if(yt==null&&(yt=!1),isNaN(Q)||Q===null)return v;if(yt)Bt=Q;else if(N&&N.length>2){var Ze=Wt(Q);Bt=Ze/(N.length-2)}else at!==X?Bt=(Q-X)/(at-X):Bt=1;Bt=Ne(Bt),yt||(Bt=Yt(Bt)),Ot!==1&&(Bt=of(Bt,Ot)),Bt=M[0]+Bt*(1-M[0]-M[1]),Bt=Math.min(1,Math.max(0,Bt));var ae=Math.floor(Bt*1e4);if(ht&&dt[ae])zt=dt[ae];else{if(Ao(Z)==="array")for(var qt=0;qt<I.length;qt++){var Jt=I[qt];if(Bt<=Jt){zt=Z[qt];break}if(Bt>=Jt&&qt===I.length-1){zt=Z[qt];break}if(Bt>Jt&&Bt<I[qt+1]){Bt=(Bt-Jt)/(I[qt+1]-Jt),zt=nr.interpolate(Z[qt],Z[qt+1],Bt,d);break}}else Ao(Z)==="function"&&(zt=Z(Bt));ht&&(dt[ae]=zt)}return zt},dn=function(){return dt={}};$t(l);var Gt=function(Q){var yt=nr(Ie(Q));return W&&yt[W]?yt[W]():yt};return Gt.classes=function(Q){if(Q!=null){if(Ao(Q)==="array")N=Q,T=[Q[0],Q[Q.length-1]];else{var yt=nr.analyze(T);Q===0?N=[yt.min,yt.max]:N=nr.limits(yt,"e",Q)}return Gt}return N},Gt.domain=function(Q){if(!arguments.length)return T;X=Q[0],at=Q[Q.length-1],I=[];var yt=Z.length;if(Q.length===yt&&X!==at)for(var zt=0,Bt=Array.from(Q);zt<Bt.length;zt+=1){var Ze=Bt[zt];I.push((Ze-X)/(at-X))}else{for(var ae=0;ae<yt;ae++)I.push(ae/(yt-1));if(Q.length>2){var qt=Q.map(function(Kt,ee){return ee/(Q.length-1)}),Jt=Q.map(function(Kt){return(Kt-X)/(at-X)});Jt.every(function(Kt,ee){return qt[ee]===Kt})||(Ne=function(Kt){if(Kt<=0||Kt>=1)return Kt;for(var ee=0;Kt>=Jt[ee+1];)ee++;var ir=(Kt-Jt[ee])/(Jt[ee+1]-Jt[ee]),_i=qt[ee]+ir*(qt[ee+1]-qt[ee]);return _i})}}return T=[X,at],Gt},Gt.mode=function(Q){return arguments.length?(d=Q,dn(),Gt):d},Gt.range=function(Q,yt){return $t(Q),Gt},Gt.out=function(Q){return W=Q,Gt},Gt.spread=function(Q){return arguments.length?(w=Q,Gt):w},Gt.correctLightness=function(Q){return Q==null&&(Q=!0),K=Q,dn(),K?Yt=function(yt){for(var zt=Ie(0,!0).lab()[0],Bt=Ie(1,!0).lab()[0],Ze=zt>Bt,ae=Ie(yt,!0).lab()[0],qt=zt+(Bt-zt)*yt,Jt=ae-qt,Kt=0,ee=1,ir=20;Math.abs(Jt)>.01&&ir-- >0;)(function(){return Ze&&(Jt*=-1),Jt<0?(Kt=yt,yt+=(ee-yt)*.5):(ee=yt,yt+=(Kt-yt)*.5),ae=Ie(yt,!0).lab()[0],Jt=ae-qt})();return yt}:Yt=function(yt){return yt},Gt},Gt.padding=function(Q){return Q!=null?(Ao(Q)==="number"&&(Q=[Q,Q]),M=Q,Gt):M},Gt.colors=function(Q,yt){arguments.length<2&&(yt="hex");var zt=[];if(arguments.length===0)zt=Z.slice(0);else if(Q===1)zt=[Gt(.5)];else if(Q>1){var Bt=T[0],Ze=T[1]-Bt;zt=af(0,Q,!1).map(function(ee){return Gt(Bt+ee/(Q-1)*Ze)})}else{l=[];var ae=[];if(N&&N.length>2)for(var qt=1,Jt=N.length,Kt=1<=Jt;Kt?qt<Jt:qt>Jt;Kt?qt++:qt--)ae.push((N[qt-1]+N[qt])*.5);else ae=T;zt=ae.map(function(ee){return Gt(ee)})}return nr[yt]&&(zt=zt.map(function(ee){return ee[yt]()})),zt},Gt.cache=function(Q){return Q!=null?(ht=Q,Gt):ht},Gt.gamma=function(Q){return Q!=null?(Ot=Q,Gt):Ot},Gt.nodata=function(Q){return Q!=null?(v=nr(Q),Gt):v},Gt};function af(l,d,v){for(var w=[],T=l<d,I=v?T?d+1:d-1:d,M=l;T?M<I:M>I;T?M++:M--)w.push(M);return w}var sa=A,sf=fs,uf=function(l){for(var d=[1,1],v=1;v<l;v++){for(var w=[1],T=1;T<=d.length;T++)w[T]=(d[T]||0)+d[T-1];d=w}return d},lf=function(l){var d,v,w,T,I,M,N;if(l=l.map(function(K){return new sa(K)}),l.length===2)d=l.map(function(K){return K.lab()}),I=d[0],M=d[1],T=function(K){var dt=[0,1,2].map(function(ht){return I[ht]+K*(M[ht]-I[ht])});return new sa(dt,"lab")};else if(l.length===3)v=l.map(function(K){return K.lab()}),I=v[0],M=v[1],N=v[2],T=function(K){var dt=[0,1,2].map(function(ht){return(1-K)*(1-K)*I[ht]+2*(1-K)*K*M[ht]+K*K*N[ht]});return new sa(dt,"lab")};else if(l.length===4){var Z;w=l.map(function(K){return K.lab()}),I=w[0],M=w[1],N=w[2],Z=w[3],T=function(K){var dt=[0,1,2].map(function(ht){return(1-K)*(1-K)*(1-K)*I[ht]+3*(1-K)*(1-K)*K*M[ht]+3*(1-K)*K*K*N[ht]+K*K*K*Z[ht]});return new sa(dt,"lab")}}else if(l.length>=5){var W,X,at;W=l.map(function(K){return K.lab()}),at=l.length-1,X=uf(at),T=function(K){var dt=1-K,ht=[0,1,2].map(function(Ot){return W.reduce(function($t,Wt,Yt){return $t+X[Yt]*Math.pow(dt,at-Yt)*Math.pow(K,Yt)*Wt[Ot]},0)});return new sa(ht,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return T},ff=function(l){var d=lf(l);return d.scale=function(){return sf(d)},d},hs=B,rr=function(l,d,v){if(!rr[v])throw new Error("unknown blend mode "+v);return rr[v](l,d)},mi=function(l){return function(d,v){var w=hs(v).rgb(),T=hs(d).rgb();return hs.rgb(l(w,T))}},gi=function(l){return function(d,v){var w=[];return w[0]=l(d[0],v[0]),w[1]=l(d[1],v[1]),w[2]=l(d[2],v[2]),w}},hf=function(l){return l},cf=function(l,d){return l*d/255},df=function(l,d){return l>d?d:l},pf=function(l,d){return l>d?l:d},vf=function(l,d){return 255*(1-(1-l/255)*(1-d/255))},mf=function(l,d){return d<128?2*l*d/255:255*(1-2*(1-l/255)*(1-d/255))},gf=function(l,d){return 255*(1-(1-d/255)/(l/255))},_f=function(l,d){return l===255?255:(l=255*(d/255)/(1-l/255),l>255?255:l)};rr.normal=mi(gi(hf)),rr.multiply=mi(gi(cf)),rr.screen=mi(gi(vf)),rr.overlay=mi(gi(mf)),rr.darken=mi(gi(df)),rr.lighten=mi(gi(pf)),rr.dodge=mi(gi(_f)),rr.burn=mi(gi(gf));for(var yf=rr,cs=b.type,bf=b.clip_rgb,wf=b.TWOPI,xf=Math.pow,Pf=Math.sin,Lf=Math.cos,eu=B,Ef=function(l,d,v,w,T){l===void 0&&(l=300),d===void 0&&(d=-1.5),v===void 0&&(v=1),w===void 0&&(w=1),T===void 0&&(T=[0,1]);var I=0,M;cs(T)==="array"?M=T[1]-T[0]:(M=0,T=[T,T]);var N=function(Z){var W=wf*((l+120)/360+d*Z),X=xf(T[0]+M*Z,w),at=I!==0?v[0]+Z*I:v,K=at*X*(1-X)/2,dt=Lf(W),ht=Pf(W),Ot=X+K*(-.14861*dt+1.78277*ht),$t=X+K*(-.29227*dt-.90649*ht),Wt=X+K*(1.97294*dt);return eu(bf([Ot*255,$t*255,Wt*255,1]))};return N.start=function(Z){return Z==null?l:(l=Z,N)},N.rotations=function(Z){return Z==null?d:(d=Z,N)},N.gamma=function(Z){return Z==null?w:(w=Z,N)},N.hue=function(Z){return Z==null?v:(v=Z,cs(v)==="array"?(I=v[1]-v[0],I===0&&(v=v[1])):I=0,N)},N.lightness=function(Z){return Z==null?T:(cs(Z)==="array"?(T=Z,M=Z[1]-Z[0]):(T=[Z,Z],M=0),N)},N.scale=function(){return eu.scale(N)},N.hue(v),N},kf=A,Mf="0123456789abcdef",Sf=Math.floor,Tf=Math.random,Cf=function(){for(var l="#",d=0;d<6;d++)l+=Mf.charAt(Sf(Tf()*16));return new kf(l,"hex")},ds=x,nu=Math.log,If=Math.pow,Af=Math.floor,Of=Math.abs,ru=function(l,d){d===void 0&&(d=null);var v={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return ds(l)==="object"&&(l=Object.values(l)),l.forEach(function(w){d&&ds(w)==="object"&&(w=w[d]),w!=null&&!isNaN(w)&&(v.values.push(w),v.sum+=w,w<v.min&&(v.min=w),w>v.max&&(v.max=w),v.count+=1)}),v.domain=[v.min,v.max],v.limits=function(w,T){return iu(v,w,T)},v},iu=function(l,d,v){d===void 0&&(d="equal"),v===void 0&&(v=7),ds(l)=="array"&&(l=ru(l));var w=l.min,T=l.max,I=l.values.sort(function(vs,ms){return vs-ms});if(v===1)return[w,T];var M=[];if(d.substr(0,1)==="c"&&(M.push(w),M.push(T)),d.substr(0,1)==="e"){M.push(w);for(var N=1;N<v;N++)M.push(w+N/v*(T-w));M.push(T)}else if(d.substr(0,1)==="l"){if(w<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Z=Math.LOG10E*nu(w),W=Math.LOG10E*nu(T);M.push(w);for(var X=1;X<v;X++)M.push(If(10,Z+X/v*(W-Z)));M.push(T)}else if(d.substr(0,1)==="q"){M.push(w);for(var at=1;at<v;at++){var K=(I.length-1)*at/v,dt=Af(K);if(dt===K)M.push(I[dt]);else{var ht=K-dt;M.push(I[dt]*(1-ht)+I[dt+1]*ht)}}M.push(T)}else if(d.substr(0,1)==="k"){var Ot,$t=I.length,Wt=new Array($t),Yt=new Array(v),Ne=!0,Ie=0,dn=null;dn=[],dn.push(w);for(var Gt=1;Gt<v;Gt++)dn.push(w+Gt/v*(T-w));for(dn.push(T);Ne;){for(var Q=0;Q<v;Q++)Yt[Q]=0;for(var yt=0;yt<$t;yt++)for(var zt=I[yt],Bt=Number.MAX_VALUE,Ze=void 0,ae=0;ae<v;ae++){var qt=Of(dn[ae]-zt);qt<Bt&&(Bt=qt,Ze=ae),Yt[Ze]++,Wt[yt]=Ze}for(var Jt=new Array(v),Kt=0;Kt<v;Kt++)Jt[Kt]=null;for(var ee=0;ee<$t;ee++)Ot=Wt[ee],Jt[Ot]===null?Jt[Ot]=I[ee]:Jt[Ot]+=I[ee];for(var ir=0;ir<v;ir++)Jt[ir]*=1/Yt[ir];Ne=!1;for(var _i=0;_i<v;_i++)if(Jt[_i]!==dn[_i]){Ne=!0;break}dn=Jt,Ie++,Ie>200&&(Ne=!1)}for(var yi={},Oo=0;Oo<v;Oo++)yi[Oo]=[];for(var Bo=0;Bo<$t;Bo++)Ot=Wt[Bo],yi[Ot].push(I[Bo]);for(var Jr=[],Vi=0;Vi<v;Vi++)Jr.push(yi[Vi][0]),Jr.push(yi[Vi][yi[Vi].length-1]);Jr=Jr.sort(function(vs,ms){return vs-ms}),M.push(Jr[0]);for(var ua=1;ua<Jr.length;ua+=2){var Ji=Jr[ua];!isNaN(Ji)&&M.indexOf(Ji)===-1&&M.push(Ji)}}return M},ou={analyze:ru,limits:iu},au=A,Bf=function(l,d){l=new au(l),d=new au(d);var v=l.luminance(),w=d.luminance();return v>w?(v+.05)/(w+.05):(w+.05)/(v+.05)},su=A,Vr=Math.sqrt,ye=Math.pow,zf=Math.min,Rf=Math.max,uu=Math.atan2,lu=Math.abs,Ca=Math.cos,fu=Math.sin,Nf=Math.exp,hu=Math.PI,Zf=function(l,d,v,w,T){v===void 0&&(v=1),w===void 0&&(w=1),T===void 0&&(T=1);var I=function(Ji){return 360*Ji/(2*hu)},M=function(Ji){return 2*hu*Ji/360};l=new su(l),d=new su(d);var N=Array.from(l.lab()),Z=N[0],W=N[1],X=N[2],at=Array.from(d.lab()),K=at[0],dt=at[1],ht=at[2],Ot=(Z+K)/2,$t=Vr(ye(W,2)+ye(X,2)),Wt=Vr(ye(dt,2)+ye(ht,2)),Yt=($t+Wt)/2,Ne=.5*(1-Vr(ye(Yt,7)/(ye(Yt,7)+ye(25,7)))),Ie=W*(1+Ne),dn=dt*(1+Ne),Gt=Vr(ye(Ie,2)+ye(X,2)),Q=Vr(ye(dn,2)+ye(ht,2)),yt=(Gt+Q)/2,zt=I(uu(X,Ie)),Bt=I(uu(ht,dn)),Ze=zt>=0?zt:zt+360,ae=Bt>=0?Bt:Bt+360,qt=lu(Ze-ae)>180?(Ze+ae+360)/2:(Ze+ae)/2,Jt=1-.17*Ca(M(qt-30))+.24*Ca(M(2*qt))+.32*Ca(M(3*qt+6))-.2*Ca(M(4*qt-63)),Kt=ae-Ze;Kt=lu(Kt)<=180?Kt:ae<=Ze?Kt+360:Kt-360,Kt=2*Vr(Gt*Q)*fu(M(Kt)/2);var ee=K-Z,ir=Q-Gt,_i=1+.015*ye(Ot-50,2)/Vr(20+ye(Ot-50,2)),yi=1+.045*yt,Oo=1+.015*yt*Jt,Bo=30*Nf(-ye((qt-275)/25,2)),Jr=2*Vr(ye(yt,7)/(ye(yt,7)+ye(25,7))),Vi=-Jr*fu(2*M(Bo)),ua=Vr(ye(ee/(v*_i),2)+ye(ir/(w*yi),2)+ye(Kt/(T*Oo),2)+Vi*(ir/(w*yi))*(Kt/(T*Oo)));return Rf(0,zf(100,ua))},cu=A,$f=function(l,d,v){v===void 0&&(v="lab"),l=new cu(l),d=new cu(d);var w=l.get(v),T=d.get(v),I=0;for(var M in w){var N=(w[M]||0)-(T[M]||0);I+=N*N}return Math.sqrt(I)},Ff=A,Df=function(){for(var l=[],d=arguments.length;d--;)l[d]=arguments[d];try{return new(Function.prototype.bind.apply(Ff,[null].concat(l))),!0}catch{return!1}},du=B,pu=fs,Gf={cool:function(){return pu([du.hsl(180,1,.9),du.hsl(250,.7,.4)])},hot:function(){return pu(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Ia={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ps=0,vu=Object.keys(Ia);ps<vu.length;ps+=1){var mu=vu[ps];Ia[mu.toLowerCase()]=Ia[mu]}var Hf=Ia,Ce=B;Ce.average=nf,Ce.bezier=ff,Ce.blend=yf,Ce.cubehelix=Ef,Ce.mix=Ce.interpolate=St,Ce.random=Cf,Ce.scale=fs,Ce.analyze=ou.analyze,Ce.contrast=Bf,Ce.deltaE=Zf,Ce.distance=$f,Ce.limits=ou.limits,Ce.valid=Df,Ce.scales=Gf,Ce.colors=Fr,Ce.brewer=Hf;var Wf=Ce;return Wf})})(dl);var Oc=dl.exports;const pl=Cs(Oc);var $a={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */$a.exports;(function(o,r){(function(){var n,a="4.15.0",u=200,f="Expected a function",p="__lodash_hash_undefined__",y=1,_=2,x=1/0,C=9007199254740991,D="[object Arguments]",H="[object Array]",U="[object Boolean]",tt="[object Date]",b="[object Error]",V="[object Function]",rt="[object GeneratorFunction]",S="[object Map]",E="[object Number]",O="[object Object]",z="[object Promise]",A="[object RegExp]",G="[object Set]",B="[object String]",q="[object Symbol]",et="[object WeakMap]",j="[object ArrayBuffer]",it="[object DataView]",mt="[object Float32Array]",ft="[object Float64Array]",oe="[object Int8Array]",Rt="[object Int16Array]",Qt="[object Int32Array]",pt="[object Uint8Array]",pe="[object Uint8ClampedArray]",ct="[object Uint16Array]",kt="[object Uint32Array]",Dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,Mt=/^\./,xt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,st=/[\\^$.*+?()[\]{}|]/g,Nt=/\\(\\)?/g,ve=/\w*$/,en=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,Lt={};Lt[mt]=Lt[ft]=Lt[oe]=Lt[Rt]=Lt[Qt]=Lt[pt]=Lt[pe]=Lt[ct]=Lt[kt]=!0,Lt[D]=Lt[H]=Lt[j]=Lt[U]=Lt[it]=Lt[tt]=Lt[b]=Lt[V]=Lt[S]=Lt[E]=Lt[O]=Lt[A]=Lt[G]=Lt[B]=Lt[et]=!1;var gt={};gt[D]=gt[H]=gt[j]=gt[it]=gt[U]=gt[tt]=gt[mt]=gt[ft]=gt[oe]=gt[Rt]=gt[Qt]=gt[S]=gt[E]=gt[O]=gt[A]=gt[G]=gt[B]=gt[q]=gt[pt]=gt[pe]=gt[ct]=gt[kt]=!0,gt[b]=gt[V]=gt[et]=!1;var me=typeof wi=="object"&&wi&&wi.Object===Object&&wi,nn=typeof self=="object"&&self&&self.Object===Object&&self,Le=me||nn||Function("return this")(),lr=r&&!r.nodeType&&r,Ue=lr&&!0&&o&&!o.nodeType&&o,rn=Ue&&Ue.exports===lr,vn=rn&&me.process,zn=function(){try{return vn&&vn.binding("util")}catch{}}(),Pn=zn&&zn.isTypedArray;function jt(h,g){return h.set(g[0],g[1]),h}function Oe(h,g){return h.add(g),h}function on(h,g,P){switch(P.length){case 0:return h.call(g);case 1:return h.call(g,P[0]);case 2:return h.call(g,P[0],P[1]);case 3:return h.call(g,P[0],P[1],P[2])}return h.apply(g,P)}function mn(h,g){for(var P=-1,F=h?h.length:0;++P<F&&g(h[P],P,h)!==!1;);return h}function an(h,g){for(var P=-1,F=g.length,nt=h.length;++P<F;)h[nt+P]=g[P];return h}function Rn(h,g,P,F){var nt=-1,J=h?h.length:0;for(F&&J&&(P=h[++nt]);++nt<J;)P=g(P,h[nt],nt,h);return P}function sn(h,g){for(var P=-1,F=h?h.length:0;++P<F;)if(g(h[P],P,h))return!0;return!1}function we(h){return function(g){return g==null?n:g[h]}}function gn(h,g){for(var P=-1,F=Array(h);++P<h;)F[P]=g(P);return F}function fr(h){return function(g){return h(g)}}function Er(h,g){return h==null?n:h[g]}function $e(h){var g=!1;if(h!=null&&typeof h.toString!="function")try{g=!!(h+"")}catch{}return g}function un(h){var g=-1,P=Array(h.size);return h.forEach(function(F,nt){P[++g]=[nt,F]}),P}function Nn(h,g){return function(P){return h(g(P))}}function Zn(h){var g=-1,P=Array(h.size);return h.forEach(function(F){P[++g]=F}),P}var Ln=Array.prototype,kr=Function.prototype,hr=Object.prototype,ti=Le["__core-js_shared__"],Mi=function(){var h=/[^.]+$/.exec(ti&&ti.keys&&ti.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),Mr=kr.toString,Ee=hr.hasOwnProperty,Do=Mr.call(Object),$n=hr.toString,Go=RegExp("^"+Mr.call(Ee).replace(st,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=rn?Le.Buffer:n,oo=Le.Symbol,cr=Le.Uint8Array,ao=Nn(Object.getPrototypeOf,Object),Ho=Object.create,Si=hr.propertyIsEnumerable,so=Ln.splice,Ye=Object.getOwnPropertySymbols,vt=io?io.isBuffer:n,Ti=Nn(Object.keys,Object),dr=Math.max,ei=gr(Le,"DataView"),Fn=gr(Le,"Map"),Sr=gr(Le,"Promise"),ni=gr(Le,"Set"),En=gr(Le,"WeakMap"),Dn=gr(Object,"create"),Wo=!Si.call({valueOf:1},"valueOf"),uo=Ge(ei),qo=Ge(Fn),lo=Ge(Sr),fo=Ge(ni),Uo=Ge(En),kn=oo?oo.prototype:n,Tr=kn?kn.valueOf:n,ho=kn?kn.toString:n;function Ct(){}function Gn(h){var g=-1,P=h?h.length:0;for(this.clear();++g<P;){var F=h[g];this.set(F[0],F[1])}}function Yo(){this.__data__=Dn?Dn(null):{}}function Ci(h){return this.has(h)&&delete this.__data__[h]}function Hn(h){var g=this.__data__;if(Dn){var P=g[h];return P===p?n:P}return Ee.call(g,h)?g[h]:n}function Wn(h){var g=this.__data__;return Dn?g[h]!==n:Ee.call(g,h)}function ri(h,g){var P=this.__data__;return P[h]=Dn&&g===n?p:g,this}Gn.prototype.clear=Yo,Gn.prototype.delete=Ci,Gn.prototype.get=Hn,Gn.prototype.has=Wn,Gn.prototype.set=ri;function fe(h){var g=-1,P=h?h.length:0;for(this.clear();++g<P;){var F=h[g];this.set(F[0],F[1])}}function Ft(){this.__data__=[]}function ne(h){var g=this.__data__,P=mr(g,h);if(P<0)return!1;var F=g.length-1;return P==F?g.pop():so.call(g,P,1),!0}function ii(h){var g=this.__data__,P=mr(g,h);return P<0?n:g[P][1]}function pr(h){return mr(this.__data__,h)>-1}function vr(h,g){var P=this.__data__,F=mr(P,h);return F<0?P.push([h,g]):P[F][1]=g,this}fe.prototype.clear=Ft,fe.prototype.delete=ne,fe.prototype.get=ii,fe.prototype.has=pr,fe.prototype.set=vr;function Fe(h){var g=-1,P=h?h.length:0;for(this.clear();++g<P;){var F=h[g];this.set(F[0],F[1])}}function Pt(){this.__data__={hash:new Gn,map:new(Fn||fe),string:new Gn}}function se(h){return $r(this,h).delete(h)}function Ii(h){return $r(this,h).get(h)}function oi(h){return $r(this,h).has(h)}function De(h,g){return $r(this,h).set(h,g),this}Fe.prototype.clear=Pt,Fe.prototype.delete=se,Fe.prototype.get=Ii,Fe.prototype.has=oi,Fe.prototype.set=De;function Cr(h){var g=-1,P=h?h.length:0;for(this.__data__=new Fe;++g<P;)this.add(h[g])}function Ir(h){return this.__data__.set(h,p),this}function qn(h){return this.__data__.has(h)}Cr.prototype.add=Cr.prototype.push=Ir,Cr.prototype.has=qn;function Ht(h){this.__data__=new fe(h)}function Un(){this.__data__=new fe}function Ar(h){return this.__data__.delete(h)}function Or(h){return this.__data__.get(h)}function Ai(h){return this.__data__.has(h)}function Br(h,g){var P=this.__data__;if(P instanceof fe){var F=P.__data__;if(!Fn||F.length<u-1)return F.push([h,g]),this;P=this.__data__=new Fe(F)}return P.set(h,g),this}Ht.prototype.clear=Un,Ht.prototype.delete=Ar,Ht.prototype.get=Or,Ht.prototype.has=Ai,Ht.prototype.set=Br;function ai(h,g){var P=ue(h)||yr(h)?gn(h.length,String):[],F=P.length,nt=!!F;for(var J in h)(g||Ee.call(h,J))&&!(nt&&(J=="length"||bn(J,F)))&&P.push(J);return P}function zr(h,g,P){(P!==n&&!ke(h[g],P)||typeof g=="number"&&P===n&&!(g in h))&&(h[g]=P)}function Rr(h,g,P){var F=h[g];(!(Ee.call(h,g)&&ke(F,P))||P===n&&!(g in h))&&(h[g]=P)}function mr(h,g){for(var P=h.length;P--;)if(ke(h[P][0],g))return P;return-1}function Oi(h,g){return h&&Zr(g,Ke(g),h)}function _n(h,g,P,F,nt,J,ut){var lt;if(F&&(lt=J?F(h,nt,J,ut):F(h)),lt!==n)return lt;if(!Me(h))return h;var wt=ue(h);if(wt){if(lt=Lo(h),!g)return go(h,lt)}else{var Et=Be(h),Zt=Et==V||Et==rt;if(Dr(h))return Xe(h,g);if(Et==O||Et==D||Zt&&!J){if($e(h))return J?h:{};if(lt=Eo(Zt?{}:h),!g)return Qo(h,Oi(lt,h))}else{if(!gt[Et])return J?h:{};lt=hi(h,Et,_n,g)}}ut||(ut=new Ht);var re=ut.get(h);if(re)return re;if(ut.set(h,lt),!wt)var te=P?Gi(h):Ke(h);return mn(te||h,function(ce,de){te&&(de=ce,ce=h[de]),Rr(lt,de,_n(ce,g,P,F,de,h,ut))}),lt}function Bi(h){return Me(h)?Ho(h):{}}var si=jo(bt),Xo=_o();function bt(h,g){return h&&Xo(h,g,Ke)}function ge(h,g){g=wn(g,h)?[g]:Fi(g);for(var P=0,F=g.length;h!=null&&P<F;)h=h[di(g[P++])];return P&&P==F?h:n}function Vt(h,g,P){var F=g(h);return ue(h)?F:an(F,P(h))}function zi(h){return $n.call(h)}function Ri(h,g){return h!=null&&g in Object(h)}function Yn(h,g,P,F,nt){return h===g?!0:h==null||g==null||!Me(h)&&!Mn(g)?h!==h&&g!==g:Nr(h,g,Yn,P,F,nt)}function Nr(h,g,P,F,nt,J){var ut=ue(h),lt=ue(g),wt=H,Et=H;ut||(wt=Be(h),wt=wt==D?O:wt),lt||(Et=Be(g),Et=Et==D?O:Et);var Zt=wt==O&&!$e(h),re=Et==O&&!$e(g),te=wt==Et;if(te&&!Zt)return J||(J=new Ht),ut||ze(h)?yn(h,g,P,F,nt,J):yo(h,g,wt,P,F,nt,J);if(!(nt&_)){var ce=Zt&&Ee.call(h,"__wrapped__"),de=re&&Ee.call(g,"__wrapped__");if(ce||de){var Sn=ce?h.value():h,Re=de?g.value():g;return J||(J=new Ht),P(Sn,Re,F,nt,J)}}return te?(J||(J=new Ht),bo(h,g,P,F,nt,J)):!1}function Xn(h,g,P,F){var nt=P.length,J=nt,ut=!F;if(h==null)return!J;for(h=Object(h);nt--;){var lt=P[nt];if(ut&&lt[2]?lt[1]!==h[lt[0]]:!(lt[0]in h))return!1}for(;++nt<J;){lt=P[nt];var wt=lt[0],Et=h[wt],Zt=lt[1];if(ut&&lt[2]){if(Et===n&&!(wt in h))return!1}else{var re=new Ht;if(F)var te=F(Et,Zt,wt,h,g,re);if(!(te===n?Yn(Zt,Et,F,y|_,re):te))return!1}}return!0}function ui(h){if(!Me(h)||ci(h))return!1;var g=pi(h)||$e(h)?Go:en;return g.test(Ge(h))}function ln(h){return Mn(h)&&Ve(h.length)&&!!Lt[$n.call(h)]}function he(h){return typeof h=="function"?h:h==null?qr:typeof h=="object"?ue(h)?Zi(h[0],h[1]):li(h):jn(h)}function Vn(h){if(!_r(h))return Ti(h);var g=[];for(var P in Object(h))Ee.call(h,P)&&P!="constructor"&&g.push(P);return g}function Ni(h){if(!Me(h))return Hi(h);var g=_r(h),P=[];for(var F in h)F=="constructor"&&(g||!Ee.call(h,F))||P.push(F);return P}function li(h){var g=xo(h);return g.length==1&&g[0][2]?Fr(g[0][0],g[0][1]):function(P){return P===h||Xn(P,h,g)}}function Zi(h,g){return wn(h)&&ko(g)?Fr(di(h),g):function(P){var F=So(P,h);return F===n&&F===g?Je(P,h):Yn(g,F,n,y|_)}}function fi(h,g,P,F,nt){if(h!==g){if(!(ue(g)||ze(g)))var J=Ni(g);mn(J||g,function(ut,lt){if(J&&(lt=ut,ut=g[lt]),Me(ut))nt||(nt=new Ht),$i(h,g,lt,P,fi,F,nt);else{var wt=F?F(h[lt],ut,lt+"",h,g,nt):n;wt===n&&(wt=ut),zr(h,lt,wt)}})}}function $i(h,g,P,F,nt,J,ut){var lt=h[P],wt=g[P],Et=ut.get(wt);if(Et){zr(h,P,Et);return}var Zt=J?J(lt,wt,P+"",h,g,ut):n,re=Zt===n;re&&(Zt=wt,ue(wt)||ze(wt)?ue(lt)?Zt=lt:Qn(lt)?Zt=go(lt):(re=!1,Zt=_n(wt,!0)):Hr(wt)||yr(wt)?yr(lt)?Zt=Wi(lt):!Me(lt)||F&&pi(lt)?(re=!1,Zt=_n(wt,!0)):Zt=lt:re=!1),re&&(ut.set(wt,Zt),nt(Zt,wt,F,J,ut),ut.delete(wt)),zr(h,P,Zt)}function Vo(h){return function(g){return ge(g,h)}}function co(h,g){return g=dr(g===n?h.length-1:g,0),function(){for(var P=arguments,F=-1,nt=dr(P.length-g,0),J=Array(nt);++F<nt;)J[F]=P[g+F];F=-1;for(var ut=Array(g+1);++F<g;)ut[F]=P[F];return ut[g]=J,on(h,this,ut)}}function At(h){if(typeof h=="string")return h;if(Wr(h))return ho?ho.call(h):"";var g=h+"";return g=="0"&&1/h==-x?"-0":g}function Fi(h){return ue(h)?h:Mo(h)}function Xe(h,g){if(g)return h.slice();var P=new h.constructor(h.length);return h.copy(P),P}function Jn(h){var g=new h.constructor(h.byteLength);return new cr(g).set(new cr(h)),g}function po(h,g){var P=g?Jn(h.buffer):h.buffer;return new h.constructor(P,h.byteOffset,h.byteLength)}function Jo(h,g,P){var F=g?P(un(h),!0):un(h);return Rn(F,jt,new h.constructor)}function Di(h){var g=new h.constructor(h.source,ve.exec(h));return g.lastIndex=h.lastIndex,g}function Ko(h,g,P){var F=g?P(Zn(h),!0):Zn(h);return Rn(F,Oe,new h.constructor)}function vo(h){return Tr?Object(Tr.call(h)):{}}function mo(h,g){var P=g?Jn(h.buffer):h.buffer;return new h.constructor(P,h.byteOffset,h.length)}function go(h,g){var P=-1,F=h.length;for(g||(g=Array(F));++P<F;)g[P]=h[P];return g}function Zr(h,g,P,F){P||(P={});for(var nt=-1,J=g.length;++nt<J;){var ut=g[nt],lt=F?F(P[ut],h[ut],ut,P,h):n;Rr(P,ut,lt===n?h[ut]:lt)}return P}function Qo(h,g){return Zr(h,Po(h),g)}function fn(h){return co(function(g,P){var F=-1,nt=P.length,J=nt>1?P[nt-1]:n,ut=nt>2?P[2]:n;for(J=h.length>3&&typeof J=="function"?(nt--,J):n,ut&&ea(P[0],P[1],ut)&&(J=nt<3?n:J,nt=1),g=Object(g);++F<nt;){var lt=P[F];lt&&h(g,lt,F,J)}return g})}function jo(h,g){return function(P,F){if(P==null)return P;if(!Kn(P))return h(P,F);for(var nt=P.length,J=g?nt:-1,ut=Object(P);(g?J--:++J<nt)&&F(ut[J],J,ut)!==!1;);return P}}function _o(h){return function(g,P,F){for(var nt=-1,J=Object(g),ut=F(g),lt=ut.length;lt--;){var wt=ut[h?lt:++nt];if(P(J[wt],wt,J)===!1)break}return g}}function yn(h,g,P,F,nt,J){var ut=nt&_,lt=h.length,wt=g.length;if(lt!=wt&&!(ut&&wt>lt))return!1;var Et=J.get(h);if(Et&&J.get(g))return Et==g;var Zt=-1,re=!0,te=nt&y?new Cr:n;for(J.set(h,g),J.set(g,h);++Zt<lt;){var ce=h[Zt],de=g[Zt];if(F)var Sn=ut?F(de,ce,Zt,g,h,J):F(ce,de,Zt,h,g,J);if(Sn!==n){if(Sn)continue;re=!1;break}if(te){if(!sn(g,function(Re,Tn){if(!te.has(Tn)&&(ce===Re||P(ce,Re,F,nt,J)))return te.add(Tn)})){re=!1;break}}else if(!(ce===de||P(ce,de,F,nt,J))){re=!1;break}}return J.delete(h),J.delete(g),re}function yo(h,g,P,F,nt,J,ut){switch(P){case it:if(h.byteLength!=g.byteLength||h.byteOffset!=g.byteOffset)return!1;h=h.buffer,g=g.buffer;case j:return!(h.byteLength!=g.byteLength||!F(new cr(h),new cr(g)));case U:case tt:case E:return ke(+h,+g);case b:return h.name==g.name&&h.message==g.message;case A:case B:return h==g+"";case S:var lt=un;case G:var wt=J&_;if(lt||(lt=Zn),h.size!=g.size&&!wt)return!1;var Et=ut.get(h);if(Et)return Et==g;J|=y,ut.set(h,g);var Zt=yn(lt(h),lt(g),F,nt,J,ut);return ut.delete(h),Zt;case q:if(Tr)return Tr.call(h)==Tr.call(g)}return!1}function bo(h,g,P,F,nt,J){var ut=nt&_,lt=Ke(h),wt=lt.length,Et=Ke(g),Zt=Et.length;if(wt!=Zt&&!ut)return!1;for(var re=wt;re--;){var te=lt[re];if(!(ut?te in g:Ee.call(g,te)))return!1}var ce=J.get(h);if(ce&&J.get(g))return ce==g;var de=!0;J.set(h,g),J.set(g,h);for(var Sn=ut;++re<wt;){te=lt[re];var Re=h[te],Tn=g[te];if(F)var Cn=ut?F(Tn,Re,te,g,h,J):F(Re,Tn,te,h,g,J);if(!(Cn===n?Re===Tn||P(Re,Tn,F,nt,J):Cn)){de=!1;break}Sn||(Sn=te=="constructor")}if(de&&!Sn){var Yr=h.constructor,Xr=g.constructor;Yr!=Xr&&"constructor"in h&&"constructor"in g&&!(typeof Yr=="function"&&Yr instanceof Yr&&typeof Xr=="function"&&Xr instanceof Xr)&&(de=!1)}return J.delete(h),J.delete(g),de}function Gi(h){return Vt(h,Ke,Po)}function wo(){var h=Ct.iteratee||Ur;return h=h===Ur?he:h,arguments.length?h(arguments[0],arguments[1]):h}function $r(h,g){var P=h.__data__;return xe(g)?P[typeof g=="string"?"string":"hash"]:P.map}function xo(h){for(var g=Ke(h),P=g.length;P--;){var F=g[P],nt=h[F];g[P]=[F,nt,ko(nt)]}return g}function gr(h,g){var P=Er(h,g);return ui(P)?P:n}var Po=Ye?Nn(Ye,Object):cn,Be=zi;(ei&&Be(new ei(new ArrayBuffer(1)))!=it||Fn&&Be(new Fn)!=S||Sr&&Be(Sr.resolve())!=z||ni&&Be(new ni)!=G||En&&Be(new En)!=et)&&(Be=function(h){var g=$n.call(h),P=g==O?h.constructor:n,F=P?Ge(P):n;if(F)switch(F){case uo:return it;case qo:return S;case lo:return z;case fo:return G;case Uo:return et}return g});function ta(h,g,P){g=wn(g,h)?[g]:Fi(g);for(var F,nt=-1,ut=g.length;++nt<ut;){var J=di(g[nt]);if(!(F=h!=null&&P(h,J)))break;h=h[J]}if(F)return F;var ut=h?h.length:0;return!!ut&&Ve(ut)&&bn(J,ut)&&(ue(h)||yr(h))}function Lo(h){var g=h.length,P=h.constructor(g);return g&&typeof h[0]=="string"&&Ee.call(h,"index")&&(P.index=h.index,P.input=h.input),P}function Eo(h){return typeof h.constructor=="function"&&!_r(h)?Bi(ao(h)):{}}function hi(h,g,P,F){var nt=h.constructor;switch(g){case j:return Jn(h);case U:case tt:return new nt(+h);case it:return po(h,F);case mt:case ft:case oe:case Rt:case Qt:case pt:case pe:case ct:case kt:return mo(h,F);case S:return Jo(h,F,P);case E:case B:return new nt(h);case A:return Di(h);case G:return Ko(h,F,P);case q:return vo(h)}}function bn(h,g){return g=g??C,!!g&&(typeof h=="number"||le.test(h))&&h>-1&&h%1==0&&h<g}function ea(h,g,P){if(!Me(P))return!1;var F=typeof g;return(F=="number"?Kn(P)&&bn(g,P.length):F=="string"&&g in P)?ke(P[g],h):!1}function wn(h,g){if(ue(h))return!1;var P=typeof h;return P=="number"||P=="symbol"||P=="boolean"||h==null||Wr(h)?!0:be.test(h)||!Dt.test(h)||g!=null&&h in Object(g)}function xe(h){var g=typeof h;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?h!=="__proto__":h===null}function ci(h){return!!Mi&&Mi in h}function _r(h){var g=h&&h.constructor,P=typeof g=="function"&&g.prototype||hr;return h===P}function ko(h){return h===h&&!Me(h)}function Fr(h,g){return function(P){return P==null?!1:P[h]===g&&(g!==n||h in Object(P))}}function Hi(h){var g=[];if(h!=null)for(var P in Object(h))g.push(P);return g}var Mo=xn(function(h){h=hn(h);var g=[];return Mt.test(h)&&g.push(""),h.replace(xt,function(P,F,nt,J){g.push(nt?J.replace(Nt,"$1"):F||P)}),g});function di(h){if(typeof h=="string"||Wr(h))return h;var g=h+"";return g=="0"&&1/h==-x?"-0":g}function Ge(h){if(h!=null){try{return Mr.call(h)}catch{}try{return h+""}catch{}}return""}function na(h){for(var g=-1,P=h?h.length:0,F=0,nt=[];++g<P;){var J=h[g];J&&(nt[F++]=J)}return nt}function He(h,g){var P=ue(h)?mn:si;return P(h,wo(g,3))}function xn(h,g){if(typeof h!="function"||g&&typeof g!="function")throw new TypeError(f);var P=function(){var F=arguments,nt=g?g.apply(this,F):F[0],J=P.cache;if(J.has(nt))return J.get(nt);var ut=h.apply(this,F);return P.cache=J.set(nt,ut),ut};return P.cache=new(xn.Cache||Fe),P}xn.Cache=Fe;function ra(h){return _n(h,!1,!0)}function ke(h,g){return h===g||h!==h&&g!==g}function yr(h){return Qn(h)&&Ee.call(h,"callee")&&(!Si.call(h,"callee")||$n.call(h)==D)}var ue=Array.isArray;function Kn(h){return h!=null&&Ve(h.length)&&!pi(h)}function Qn(h){return Mn(h)&&Kn(h)}var Dr=vt||tr;function Gr(h){if(Kn(h)&&(ue(h)||typeof h=="string"||typeof h.splice=="function"||Dr(h)||yr(h)))return!h.length;var g=Be(h);if(g==S||g==G)return!h.size;if(Wo||_r(h))return!Ti(h).length;for(var P in h)if(Ee.call(h,P))return!1;return!0}function pi(h){var g=Me(h)?$n.call(h):"";return g==V||g==rt}function Ve(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=C}function Me(h){var g=typeof h;return!!h&&(g=="object"||g=="function")}function Mn(h){return!!h&&typeof h=="object"}function Hr(h){if(!Mn(h)||$n.call(h)!=O||$e(h))return!1;var g=ao(h);if(g===null)return!0;var P=Ee.call(g,"constructor")&&g.constructor;return typeof P=="function"&&P instanceof P&&Mr.call(P)==Do}function Wr(h){return typeof h=="symbol"||Mn(h)&&$n.call(h)==q}var ze=Pn?fr(Pn):ln;function Wi(h){return Zr(h,qi(h))}function hn(h){return h==null?"":At(h)}function So(h,g,P){var F=h==null?n:ge(h,g);return F===n?P:F}function Je(h,g){return h!=null&&ta(h,g,Ri)}function Ke(h){return Kn(h)?ai(h):Vn(h)}function qi(h){return Kn(h)?ai(h,!0):Ni(h)}var Ui=fn(function(h,g,P){fi(h,g,P)});function qr(h){return h}function Ur(h){return he(typeof h=="function"?h:_n(h,!0))}function jn(h){return wn(h)?we(di(h)):Vo(h)}function cn(){return[]}function tr(){return!1}Ct.compact=na,Ct.iteratee=Ur,Ct.keys=Ke,Ct.keysIn=qi,Ct.memoize=xn,Ct.merge=Ui,Ct.property=jn,Ct.toPlainObject=Wi,Ct.clone=ra,Ct.eq=ke,Ct.forEach=He,Ct.get=So,Ct.hasIn=Je,Ct.identity=qr,Ct.isArguments=yr,Ct.isArray=ue,Ct.isArrayLike=Kn,Ct.isArrayLikeObject=Qn,Ct.isBuffer=Dr,Ct.isEmpty=Gr,Ct.isFunction=pi,Ct.isLength=Ve,Ct.isObject=Me,Ct.isObjectLike=Mn,Ct.isPlainObject=Hr,Ct.isSymbol=Wr,Ct.isTypedArray=ze,Ct.stubArray=cn,Ct.stubFalse=tr,Ct.toString=hn,Ct.each=He,Ct.VERSION=a,Ue&&((Ue.exports=Ct)._=Ct,lr._=Ct)}).call(wi)})($a,$a.exports);var Bc=$a.exports,zc=Oa;function Oa(o,r){var n=o&&o.type,a;if(n==="FeatureCollection")for(a=0;a<o.features.length;a++)Oa(o.features[a],r);else if(n==="GeometryCollection")for(a=0;a<o.geometries.length;a++)Oa(o.geometries[a],r);else if(n==="Feature")Oa(o.geometry,r);else if(n==="Polygon")Nu(o.coordinates,r);else if(n==="MultiPolygon")for(a=0;a<o.coordinates.length;a++)Nu(o.coordinates[a],r);return o}function Nu(o,r){if(o.length!==0){Zu(o[0],r);for(var n=1;n<o.length;n++)Zu(o[n],!r)}}function Zu(o,r){for(var n=0,a=0,u=0,f=o.length,p=f-1;u<f;p=u++){var y=(o[u][0]-o[p][0])*(o[p][1]+o[u][1]),_=n+y;a+=Math.abs(n)>=Math.abs(y)?n-_+y:y-_+n,n=_}n+a>=0!=!!r&&o.reverse()}const Rc=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var Nc=Rc,Tt=Bc,Aa=zc,Ba={};Nc.forEach(function(o){if(o.polygon==="all")Ba[o.key]=!0;else{var r=o.polygon==="whitelist"?"included_values":"excluded_values",n={};o.values.forEach(function(a){n[a]=!0}),Ba[o.key]={},Ba[o.key][r]=n}});function Zc(o,r){return(o.version||r.version)&&o.version!==r.version?(+o.version||0)>(+r.version||0)?o:r:Tt.merge(o,r)}var Fa={};Fa=function(o,r,n){r=Tt.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Ba,deduplicator:Zc},r);var a;return typeof XMLDocument<"u"&&o instanceof XMLDocument||typeof XMLDocument>"u"&&o.childNodes?a=f(o):a=u(o),a;function u(_){var x=new Array,C=new Array,D=new Array;function H(z){var A=Tt.clone(z);A.lat=z.center.lat,A.lon=z.center.lon,A.__is_center_placeholder=!0,x.push(A)}function U(z){var A=Tt.clone(z);A.nodes=[];function G(B,q,et){var j={type:"node",id:"_"+A.type+"/"+A.id+"bounds"+et,lat:B,lon:q};A.nodes.push(j.id),x.push(j)}G(A.bounds.minlat,A.bounds.minlon,1),G(A.bounds.maxlat,A.bounds.minlon,2),G(A.bounds.maxlat,A.bounds.maxlon,3),G(A.bounds.minlat,A.bounds.maxlon,4),A.nodes.push(A.nodes[0]),A.__is_bounds_placeholder=!0,C.push(A)}function tt(z){function A(G,B,q){var et={type:"node",id:q,lat:G,lon:B};x.push(et)}Tt.isArray(z.nodes)||(z.nodes=z.geometry.map(function(G){return G!==null?"_anonymous@"+G.lat+"/"+G.lon:"_anonymous@unknown_location"})),z.geometry.forEach(function(G,B){G&&A(G.lat,G.lon,z.nodes[B])})}function b(z){function A(B,q,et){var j={type:"node",id:et,lat:B,lon:q};x.push(j)}function G(B,q){if(C.some(function(it){return it.type=="way"&&it.id==q}))return;var et={type:"way",id:q,nodes:[]};function j(it,mt){var ft={type:"node",id:"_anonymous@"+it+"/"+mt,lat:it,lon:mt};et.nodes.push(ft.id),x.push(ft)}B.forEach(function(it){it?j(it.lat,it.lon):et.nodes.push(void 0)}),C.push(et)}z.members.forEach(function(B,q){B.type=="node"?B.lat&&A(B.lat,B.lon,B.ref):B.type=="way"&&B.geometry&&(B.ref="_fullGeom"+B.ref,G(B.geometry,B.ref))})}for(var V=0;V<_.elements.length;V++)switch(_.elements[V].type){case"node":var rt=_.elements[V];x.push(rt);break;case"way":var S=Tt.clone(_.elements[V]);S.nodes=Tt.clone(S.nodes),C.push(S),S.center&&H(S),S.geometry?tt(S):S.bounds&&U(S);break;case"relation":var E=Tt.clone(_.elements[V]);E.members=Tt.clone(E.members),D.push(E);var O=E.members&&E.members.some(function(z){return z.type=="node"&&z.lat||z.type=="way"&&z.geometry&&z.geometry.length>0});E.center&&H(E),O?b(E):E.bounds&&U(E);break}return p(x,C,D)}function f(_){var x=new Array,C=new Array,D=new Array;function H(E,O,z){E.hasAttribute(z)&&(O[z]=E.getAttribute(z))}function U(E,O){var z=Tt.clone(E);H(O,z,"lat"),H(O,z,"lon"),z.__is_center_placeholder=!0,x.push(z)}function tt(E,O){var z=Tt.clone(E);z.nodes=[];function A(G,B,q){var et={type:"node",id:"_"+z.type+"/"+z.id+"bounds"+q,lat:G,lon:B};z.nodes.push(et.id),x.push(et)}A(O.getAttribute("minlat"),O.getAttribute("minlon"),1),A(O.getAttribute("maxlat"),O.getAttribute("minlon"),2),A(O.getAttribute("maxlat"),O.getAttribute("maxlon"),3),A(O.getAttribute("minlat"),O.getAttribute("maxlon"),4),z.nodes.push(z.nodes[0]),z.__is_bounds_placeholder=!0,C.push(z)}function b(E,O){function z(A,G,B){var q={type:"node",id:B,lat:A,lon:G};return x.push(q),q.id}Tt.isArray(E.nodes)||(E.nodes=[],Tt.each(O,function(A,G){E.nodes.push("_anonymous@"+A.getAttribute("lat")+"/"+A.getAttribute("lon"))})),Tt.each(O,function(A,G){A.getAttribute("lat")&&z(A.getAttribute("lat"),A.getAttribute("lon"),E.nodes[G])})}function V(E,O){function z(G,B,q){var et={type:"node",id:q,lat:G,lon:B};x.push(et)}function A(G,B){if(C.some(function(j){return j.type=="way"&&j.id==B}))return;var q={type:"way",id:B,nodes:[]};function et(j,it){var mt={type:"node",id:"_anonymous@"+j+"/"+it,lat:j,lon:it};q.nodes.push(mt.id),x.push(mt)}Tt.each(G,function(j){j.getAttribute("lat")?et(j.getAttribute("lat"),j.getAttribute("lon")):q.nodes.push(void 0)}),C.push(q)}Tt.each(O,function(G,B){E.members[B].type=="node"?G.getAttribute("lat")&&z(G.getAttribute("lat"),G.getAttribute("lon"),E.members[B].ref):E.members[B].type=="way"&&G.getElementsByTagName("nd").length>0&&(E.members[B].ref="_fullGeom"+E.members[B].ref,A(G.getElementsByTagName("nd"),E.members[B].ref))})}Tt.each(_.getElementsByTagName("node"),function(E,O){var z={};Tt.each(E.getElementsByTagName("tag"),function(G){z[G.getAttribute("k")]=G.getAttribute("v")});var A={type:"node"};H(E,A,"id"),H(E,A,"lat"),H(E,A,"lon"),H(E,A,"version"),H(E,A,"timestamp"),H(E,A,"changeset"),H(E,A,"uid"),H(E,A,"user"),Tt.isEmpty(z)||(A.tags=z),x.push(A)});var rt,S;return Tt.each(_.getElementsByTagName("way"),function(E,O){var z={},A=[];Tt.each(E.getElementsByTagName("tag"),function(q){z[q.getAttribute("k")]=q.getAttribute("v")});var G=!1;Tt.each(E.getElementsByTagName("nd"),function(q,et){var j;(j=q.getAttribute("ref"))&&(A[et]=j),!G&&q.getAttribute("lat")&&(G=!0)});var B={type:"way"};H(E,B,"id"),H(E,B,"version"),H(E,B,"timestamp"),H(E,B,"changeset"),H(E,B,"uid"),H(E,B,"user"),A.length>0&&(B.nodes=A),Tt.isEmpty(z)||(B.tags=z),(rt=E.getElementsByTagName("center")[0])&&U(B,rt),G?b(B,E.getElementsByTagName("nd")):(S=E.getElementsByTagName("bounds")[0])&&tt(B,S),C.push(B)}),Tt.each(_.getElementsByTagName("relation"),function(E,O){var z={},A=[];Tt.each(E.getElementsByTagName("tag"),function(q){z[q.getAttribute("k")]=q.getAttribute("v")});var G=!1;Tt.each(E.getElementsByTagName("member"),function(q,et){A[et]={},H(q,A[et],"ref"),H(q,A[et],"role"),H(q,A[et],"type"),(!G&&A[et].type=="node"&&q.getAttribute("lat")||A[et].type=="way"&&q.getElementsByTagName("nd").length>0)&&(G=!0)});var B={type:"relation"};H(E,B,"id"),H(E,B,"version"),H(E,B,"timestamp"),H(E,B,"changeset"),H(E,B,"uid"),H(E,B,"user"),A.length>0&&(B.members=A),Tt.isEmpty(z)||(B.tags=z),(rt=E.getElementsByTagName("center")[0])&&U(B,rt),G?V(B,E.getElementsByTagName("member")):(S=E.getElementsByTagName("bounds")[0])&&tt(B,S),D.push(B)}),p(x,C,D)}function p(_,x,C){function D(Mt,xt){if(typeof xt!="object"&&(xt={}),typeof r.uninterestingTags=="function")return!r.uninterestingTags(Mt,xt);for(var st in Mt)if(r.uninterestingTags[st]!==!0&&!(xt[st]===!0||xt[st]===Mt[st]))return!0;return!1}function H(Mt){var xt={timestamp:Mt.timestamp,version:Mt.version,changeset:Mt.changeset,user:Mt.user,uid:Mt.uid};for(var st in xt)xt[st]===void 0&&delete xt[st];return xt}for(var U=new Object,tt=new Object,b=0;b<_.length;b++){var V=_[b];U[V.id]!==void 0&&(V=r.deduplicator(V,U[V.id])),U[V.id]=V,typeof V.tags<"u"&&D(V.tags)&&(tt[V.id]=!0)}for(var b=0;b<C.length;b++)if(Tt.isArray(C[b].members))for(var rt=0;rt<C[b].members.length;rt++)C[b].members[rt].type=="node"&&(tt[C[b].members[rt].ref]=!0);for(var S=new Object,E=new Object,b=0;b<x.length;b++){var O=x[b];if(S[O.id]&&(O=r.deduplicator(O,S[O.id])),S[O.id]=O,Tt.isArray(O.nodes))for(var rt=0;rt<O.nodes.length;rt++)typeof O.nodes[rt]!="object"&&(E[O.nodes[rt]]=!0,O.nodes[rt]=U[O.nodes[rt]])}var z=new Array;for(var A in U){var V=U[A];(!E[A]||tt[A])&&z.push(V)}for(var G=new Array,b=0;b<C.length;b++){var B=C[b];G[B.id]&&(B=r.deduplicator(B,G[B.id])),G[B.id]=B}var q={node:{},way:{},relation:{}};for(var A in G){var B=G[A];if(!Tt.isArray(B.members)){r.verbose&&console.warn("Relation",B.type+"/"+B.id,"ignored because it has no members");continue}for(var rt=0;rt<B.members.length;rt++){var et=B.members[rt].type,j=B.members[rt].ref;if(typeof j!="number"&&(j=j.replace("_fullGeom","")),!q[et]){r.verbose&&console.warn("Relation",B.type+"/"+B.id,"member",et+"/"+j,"ignored because it has an invalid type");continue}typeof q[et][j]>"u"&&(q[et][j]=[]),q[et][j].push({role:B.members[rt].role,rel:B.id,reltags:B.tags})}}var it,mt=[];for(b=0;b<z.length;b++){if(typeof z[b].lon>"u"||typeof z[b].lat>"u"){r.verbose&&console.warn("POI",z[b].type+"/"+z[b].id,"ignored because it lacks coordinates");continue}var ft={type:"Feature",id:z[b].type+"/"+z[b].id,properties:{type:z[b].type,id:z[b].id,tags:z[b].tags||{},relations:q.node[z[b].id]||[],meta:H(z[b])},geometry:{type:"Point",coordinates:[+z[b].lon,+z[b].lat]}};z[b].__is_center_placeholder&&(ft.properties.geometry="center"),n?n(ft):mt.push(ft)}for(var oe=[],Rt=[],b=0;b<C.length;b++)if(G[C[b].id]===C[b]){if(typeof C[b].tags<"u"&&(C[b].tags.type=="route"||C[b].tags.type=="waterway")){let xt=function(st){var Nt=!1,ve;ve=st.members.filter(function(gt){return gt.type==="way"}),ve=ve.map(function(gt){var me=S[gt.ref];if(me===void 0||me.nodes===void 0){r.verbose&&console.warn("Route "+st.type+"/"+st.id,"tainted by a missing or incomplete  way",gt.type+"/"+gt.ref),Nt=!0;return}return{id:gt.ref,role:gt.role,way:me,nodes:me.nodes.filter(function(nn){return nn!==void 0?!0:(Nt=!0,r.verbose&&console.warn("Route",st.type+"/"+st.id,"tainted by a way",gt.type+"/"+gt.ref,"with a missing node"),!1)})}}),ve=Tt.compact(ve);var en;en=ys(ve);var le=[];if(le=Tt.compact(en.map(function(gt){return Tt.compact(gt.map(function(me){return[+me.lon,+me.lat]}))})),le.length==0)return r.verbose&&console.warn("Route",st.type+"/"+st.id,"contains no coordinates"),!1;var Lt={type:"Feature",id:st.type+"/"+st.id,properties:{type:st.type,id:st.id,tags:st.tags||{},relations:q[st.type][st.id]||[],meta:H(st)},geometry:{type:le.length===1?"LineString":"MultiLineString",coordinates:le.length===1?le[0]:le}};return Nt&&(r.verbose&&console.warn("Route",st.type+"/"+st.id,"is tainted"),Lt.properties.tainted=!0),Lt};var Dt=xt;if(!Tt.isArray(C[b].members)){r.verbose&&console.warn("Route",C[b].type+"/"+C[b].id,"ignored because it has no members");continue}if(C[b].members.forEach(function(st){S[st.ref]&&!D(S[st.ref].tags)&&(S[st.ref].is_skippablerelationmember=!0)}),ft=xt(C[b]),ft===!1){r.verbose&&console.warn("Route relation",C[b].type+"/"+C[b].id,"ignored because it has invalid geometry");continue}n?n(Aa(ft)):Rt.push(ft)}if(typeof C[b].tags<"u"&&(C[b].tags.type=="multipolygon"||C[b].tags.type=="boundary")){let st=function(Nt,ve){var en=!1,le=pt?"way":"relation",Lt=typeof Nt.id=="number"?Nt.id:+Nt.id.replace("_fullGeom",""),gt;gt=ve.members.filter(function(jt){return jt.type==="way"}),gt=gt.map(function(jt){var Oe=S[jt.ref];if(Oe===void 0||Oe.nodes===void 0){r.verbose&&console.warn("Multipolygon",le+"/"+Lt,"tainted by a missing or incomplete way",jt.type+"/"+jt.ref),en=!0;return}return{id:jt.ref,role:jt.role||"outer",way:Oe,nodes:Oe.nodes.filter(function(on){return on!==void 0?!0:(en=!0,r.verbose&&console.warn("Multipolygon",le+"/"+Lt,"tainted by a way",jt.type+"/"+jt.ref,"with a missing node"),!1)})}}),gt=Tt.compact(gt);var me,nn;me=ys(gt.filter(function(jt){return jt.role==="outer"})),nn=ys(gt.filter(function(jt){return jt.role==="inner"}));var Le;function lr(jt){var Oe=function(sn,we){for(var gn=0;gn<we.length;gn++)if(mn(we[gn],sn))return!0;return!1},on=function(sn){return sn.map(function(we){return[+we.lat,+we.lon]})},mn=function(sn,we){for(var gn=sn[0],fr=sn[1],Er=!1,$e=0,un=we.length-1;$e<we.length;un=$e++){var Nn=we[$e][0],Zn=we[$e][1],Ln=we[un][0],kr=we[un][1],hr=Zn>fr!=kr>fr&&gn<(Ln-Nn)*(fr-Zn)/(kr-Zn)+Nn;hr&&(Er=!Er)}return Er},an,Rn;for(jt=on(jt),an=0;an<me.length;an++)if(Rn=on(me[an]),Oe(Rn,jt))return an}Le=me.map(function(jt){return[jt]});for(var Ue=0;Ue<nn.length;Ue++){var rn=lr(nn[Ue]);rn!==void 0?Le[rn].push(nn[Ue]):r.verbose&&console.warn("Multipolygon",le+"/"+Lt,"contains an inner ring with no containing outer")}var vn=[];if(vn=Tt.compact(Le.map(function(jt){var Oe=Tt.compact(jt.map(function(on){if(on.length<4){r.verbose&&console.warn("Multipolygon",le+"/"+Lt,"contains a ring with less than four nodes");return}return Tt.compact(on.map(function(mn){return[+mn.lon,+mn.lat]}))}));if(Oe.length==0){r.verbose&&console.warn("Multipolygon",le+"/"+Lt,"contains an empty ring cluster");return}return Oe})),vn.length==0)return r.verbose&&console.warn("Multipolygon",le+"/"+Lt,"contains no coordinates"),!1;var zn="MultiPolygon";vn.length===1&&(zn="Polygon",vn=vn[0]);var Pn={type:"Feature",id:Nt.type+"/"+Lt,properties:{type:Nt.type,id:Lt,tags:Nt.tags||{},relations:q[Nt.type][Nt.id]||[],meta:H(Nt)},geometry:{type:zn,coordinates:vn}};return en&&(r.verbose&&console.warn("Multipolygon",le+"/"+Lt,"is tainted"),Pn.properties.tainted=!0),Pn};var be=st;if(!Tt.isArray(C[b].members)){r.verbose&&console.warn("Multipolygon",C[b].type+"/"+C[b].id,"ignored because it has no members");continue}for(var Qt=0,rt=0;rt<C[b].members.length;rt++)C[b].members[rt].role=="outer"?Qt++:r.verbose&&C[b].members[rt].role!="inner"&&console.warn("Multipolygon",C[b].type+"/"+C[b].id,"member",C[b].members[rt].type+"/"+C[b].members[rt].ref,'ignored because it has an invalid role: "'+C[b].members[rt].role+'"');if(C[b].members.forEach(function(Nt){S[Nt.ref]&&(Nt.role==="outer"&&!D(S[Nt.ref].tags,C[b].tags)&&(S[Nt.ref].is_skippablerelationmember=!0),Nt.role==="inner"&&!D(S[Nt.ref].tags)&&(S[Nt.ref].is_skippablerelationmember=!0))}),Qt==0){r.verbose&&console.warn("Multipolygon relation",C[b].type+"/"+C[b].id,"ignored because it has no outer ways");continue}var pt=!1;Qt==1&&!D(C[b].tags,{type:!0})&&(pt=!0);var ft=null;if(!pt)ft=st(C[b],C[b]);else{var pe=C[b].members.filter(function(Nt){return Nt.role==="outer"})[0];if(pe=S[pe.ref],pe===void 0){r.verbose&&console.warn("Multipolygon relation",C[b].type+"/"+C[b].id,"ignored because outer way",pe.type+"/"+pe.ref,"is missing");continue}pe.is_skippablerelationmember=!0,ft=st(pe,C[b])}if(ft===!1){r.verbose&&console.warn("Multipolygon relation",C[b].type+"/"+C[b].id,"ignored because it has invalid geometry");continue}n?n(Aa(ft)):Rt.push(ft)}}for(var b=0;b<x.length;b++)if(S[x[b].id]===x[b]){if(!Tt.isArray(x[b].nodes)){r.verbose&&console.warn("Way",x[b].type+"/"+x[b].id,"ignored because it has no nodes");continue}if(!x[b].is_skippablerelationmember){typeof x[b].id!="number"&&(x[b].id=+x[b].id.replace("_fullGeom","")),x[b].tainted=!1,x[b].hidden=!1;var ct=new Array;for(rt=0;rt<x[b].nodes.length;rt++)typeof x[b].nodes[rt]=="object"?ct.push([+x[b].nodes[rt].lon,+x[b].nodes[rt].lat]):(r.verbose&&console.warn("Way",x[b].type+"/"+x[b].id,"is tainted by an invalid node"),x[b].tainted=!0);if(ct.length<=1){r.verbose&&console.warn("Way",x[b].type+"/"+x[b].id,"ignored because it contains too few nodes");continue}var kt="LineString";typeof x[b].nodes[0]<"u"&&typeof x[b].nodes[x[b].nodes.length-1]<"u"&&x[b].nodes[0].id===x[b].nodes[x[b].nodes.length-1].id&&(typeof x[b].tags<"u"&&y(x[b].tags)||x[b].__is_bounds_placeholder)&&(kt="Polygon",ct=[ct]);var ft={type:"Feature",id:x[b].type+"/"+x[b].id,properties:{type:x[b].type,id:x[b].id,tags:x[b].tags||{},relations:q.way[x[b].id]||[],meta:H(x[b])},geometry:{type:kt,coordinates:ct}};x[b].tainted&&(r.verbose&&console.warn("Way",x[b].type+"/"+x[b].id,"is tainted"),ft.properties.tainted=!0),x[b].__is_bounds_placeholder&&(ft.properties.geometry="bounds"),n?n(Aa(ft)):kt=="LineString"?oe.push(ft):Rt.push(ft)}}return n?!0:(it={type:"FeatureCollection",features:[]},it.features=it.features.concat(Rt),it.features=it.features.concat(oe),it.features=it.features.concat(mt),r.flatProperties&&it.features.forEach(function(Mt){Mt.properties=Tt.merge(Mt.properties.meta,Mt.properties.tags,{id:Mt.properties.type+"/"+Mt.properties.id})}),it=Aa(it),it)}function y(_){var x=r.polygonFeatures;if(typeof x=="function")return x(_);if(_.area==="no")return!1;for(var C in _){var D=_[C],H=x[C];if(!(typeof H>"u")&&D!=="no"&&(H===!0||H.included_values&&H.included_values[D]===!0||H.excluded_values&&H.excluded_values[D]!==!0))return!0}return!1}};function ys(o){for(var r=function(D){return D[0]},n=function(D){return D[D.length-1]},a=function(D,H){return D!==void 0&&H!==void 0&&D.id===H.id},u=[],f,p,y,_,x,C;o.length;)for(f=o.pop().nodes.slice(),u.push(f);o.length&&!a(r(f),n(f));){for(p=r(f),y=n(f),_=0;_<o.length;_++)if(C=o[_].nodes,a(y,r(C))){x=f.push,C=C.slice(1);break}else if(a(y,n(C))){x=f.push,C=C.slice(0,-1).reverse();break}else if(a(p,n(C))){x=f.unshift,C=C.slice(0,-1);break}else if(a(p,r(C))){x=f.unshift,C=C.slice(1).reverse();break}else C=x=null;if(!C)break;o.splice(_,1),x.apply(f,C)}return u}Fa.toGeojson=Fa;var $c=Fa;const Fc=Cs($c),$u={green:[.8986078196513652,.29469765981888985,-.032029867458429805,.0018551701773920994,-5886489790163256e-20,1070962065384032e-21,-11166446779717697e-24,6207738674465262e-26,-14267436581703006e-29],fairway:[1.7584282877168174,.04250904605668524,-.0007423764507829129,6569707153764233e-21,-30977756632711525e-24,8367957576883257e-26,-13050071116108684e-29,10972673814800688e-32,-38663295195090656e-36],rough:[1.8916873419240754,.04627672970406796,-.0008446903788844877,8018411520958444e-21,-41372650027143274e-24,12324504918216484e-26,-21202021781645599e-29,19583437507064683e-32,-7525901826011706e-35],bunker:[2.220352744173441,.018980154368388916,-9437083112133279e-20,-36850669792042787e-23,6611615157465972e-24,-30244113540371936e-27,6619732255619124e-29,-713238060773297e-31,30311272989590774e-36],recovery:[3.307362086547302,.010609031555978476,-2560678610039765e-20,-8095622682925617e-22,7504655372784836e-24,-2721007124468904e-26,49428875618964227e-30,-44627338757642523e-33,15865514824311754e-36],tee:[-3.5788887026946,.18058363894139925,-.001891979789983763,9130820506854418e-21,-1745801357834769e-23,-11014332225511787e-27,10006598437385122e-29,-14956128989260208e-32,7418617737686934e-35],penalty:[2.758428287716816,.042509046056685255,-.0007423764507829126,6569707153764227e-21,-30977756632711486e-24,8367957576883243e-26,-13050071116108656e-29,10972673814800659e-32,-3866329519509051e-35],water_hazard:[2.758428287716816,.042509046056685255,-.0007423764507829126,6569707153764227e-21,-30977756632711486e-24,8367957576883243e-26,-13050071116108656e-29,10972673814800659e-32,-3866329519509051e-35],lateral_water_hazard:[2.758428287716816,.042509046056685255,-.0007423764507829126,6569707153764227e-21,-30977756632711486e-24,8367957576883243e-26,-13050071116108656e-29,10972673814800659e-32,-3866329519509051e-35],driving_range:[2.758428287716816,.042509046056685255,-.0007423764507829126,6569707153764227e-21,-30977756632711486e-24,8367957576883243e-26,-13050071116108656e-29,10972673814800659e-32,-3866329519509051e-35],clubhouse:[2.758428287716816,.042509046056685255,-.0007423764507829126,6569707153764227e-21,-30977756632711486e-24,8367957576883243e-26,-13050071116108656e-29,10972673814800659e-32,-3866329519509051e-35],out_of_bounds:[3.7584282877168107,.042509046056685505,-.0007423764507829175,6569707153764276e-21,-3097775663271175e-23,8367957576883327e-26,-13050071116108808e-29,10972673814800805e-32,-386632951950911e-34]},Fu={green:{coeffs:[[1.000201369198856,-.017643532744055317,.09303020226131234,-.13693668008804696],[1.4244133445617677,-.5917358227287367,.10764472109007754,-.008596453203824841,21470729177791603e-22,5127337399940156e-20,-37894361127000674e-22,11604473386399543e-23,-13396353394714865e-25],[.05946821424580236,-.002121942064388387]],domains:[[0,.88],[.88,22.78],[15.87,22.78]]}},Ki={STROKES_GAINED:"Strokes Gained",TARGET:"Best Aim"},Dc="https://overpass-api.de/api/interpreter",Gc="https://nominatim.openstreetmap.org/search?q=";function Hc(o){return new Promise(r=>setTimeout(r,o))}function Wc(o,r){localStorage.setItem(o,JSON.stringify({...r}))}function vl(o){const r=localStorage.getItem(o);return r?JSON.parse(r):null}function qc(o){localStorage.removeItem(o)}function Hs(o){return`courseData-${o.name}-${o.id}`}function Uc(o){return fetch(`${Gc}${encodeURIComponent(o)}&format=json&namedetails=1`).then(function(r){if(!r.ok)throw new Error("Network response was not ok");return r.json()}).then(r=>r.filter(n=>n.type=="golf_course")).catch(function(r){console.error("Error:",r)})}function Du(o,r){let n={method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"*"},body:`data=${encodeURIComponent(o)}`};return console.debug("Querying for data from OSM under key "+r),fetch(Dc,n).then(a=>a.ok?a.json():Promise.reject(new Error("Request failed: HTTP "+a.status))).then(a=>(console.debug("Succesfully downloaded OSM polys, starting processing"),a=Fc(a),a=Jc(a),a.features.length>0?(console.debug("Succesfully processed OSM polys, caching as "+r),Wc(r,a),a):Promise.reject(new Error("No polygons returned")))).catch(a=>console.error(a))}function ml(o,r){if(o){if(!(o.name||o.id))throw console.error("Cannot fetch from OSM with no course identifiers"),new Error("Must provide either name or id")}else throw console.error("Cannot fetch from OSM with no course"),new Error("Must provide a courseParams");let n=o.name,a=o.id,u=Hs(o),f=vl(u);if(!r&&f)return Promise.resolve(f);let p="";if(a){let y=a.split("-"),_=y[1],x=y[2];return p=`[out:json];
        (${_}(${x});)-> .bound;
        (.bound;map_to_area;)->.golf_area;
        (way(area.golf_area)[golf];
        relation(area.golf_area)[golf];
        way(area.golf_area)[leisure=golf_course];
        relation(area.golf_area)[leisure=golf_course];
        .bound;
        );
        out geom;`,Du(p,u)}else n&&(p=`[out:json];
        area[name="${n}"][leisure=golf_course]->.golf_area;
        (way(area.golf_area)[golf];
        relation(area.golf_area)[golf];
        way[name="${n}"][leisure=golf_course];
        relation[name="${n}"][leisure=golf_course];
        );
        out geom;`);return Du(p,u)}function Fo(o){let r=Hs(o),n=vl(r);return n||(console.warn("Course has no polys or not found"),Error("No data available"))}function Ws(o,r){let n=Fo(o);return n instanceof Error?n:Ds(n,{golf:"hole",ref:r}).features[0]}function Yc(o,r){let n=Fo(o);if(n instanceof Error)return n;let a=Ws(o,r);if(a instanceof Error){let u="Bad data set from OSM";throw console.error(u),qc(Hs(o)),new Error(u)}if(!a){let f=`No hole line found for course ${o.name} hole ${r}`;throw console.warn(f),new Error(f)}return od(n,a)}function Xc(o,r){let n=Yc(o,r);return n instanceof Error?n:Ds(n,{terrainType:"green"})}function Vc(o,r){const n=Xc(o,r);return ma(n).geometry.coordinates}function Jc(o){for(let r of o.features){let n=r.properties;n.golf&&(n.terrainType=n.golf),typeof n.par=="string"&&(n.par=Number(n.par)),typeof n.ref=="string"&&(n.ref=Number(n.ref)),typeof n.handicap=="string"&&(n.handicap=Number(n.handicap))}return Kc(o),o}function Kc(o){const r=["green","tee","bunker","fairway","hazard","penalty"];return o.features.sort((n,a)=>{let u=r.indexOf(n.properties.terrainType),f=r.indexOf(a.properties.terrainType);return u===-1&&(u=r.length),f===-1&&(f=r.length),u-f}),o}function gl(o){return Ds(o,{leisure:"golf_course"})}function _l(o){let r=[...o];return r.reverse(),[r.slice(0,2),r.slice(2)]}function Qc(o){let r=Fo(o);if(!(r instanceof Error))return _l(je(r))}function jc(o,r){let n=Ws(o,r);if(!(n instanceof Error)&&n)return _l(je(n))}function Ha(o,r,n){if(n||(n=gl(r)),n.features.every(a=>!Ae(o,a)))return"out_of_bounds";for(let a of r.features)if(vh(a)==="Polygon"&&Ae(o,a)&&a.properties.terrainType)return a.properties.terrainType;return"rough"}function yl(o,r){let n=2e3;r&&r.maximum_cells&&(n=r.maximum_cells);const a=je(o),u=Math.sqrt(Th(o)/(n*(3*Math.sqrt(3)/2)))/1e3,f=.16/1e3,p=10/1e3,y=Math.min(Math.max(f,u),p);return Cc(a,y,{units:"kilometers",mask:o})}function td(o,r,n=0){const a=1/(o*Math.sqrt(2*Math.PI)),u=-((r-n)**2)/(2*o**2);return a*Math.exp(u)}function bl(o,r,n){let a=0;o.features.forEach(u=>{const f=Qr(ma(u),r,{units:"kilometers"})*1e3;let p=td(n,f);u.properties.probability=p,u.properties.distanceToAim=f,a+=p}),o.features.forEach(u=>{u.properties.probability=u.properties.probability/a})}function ed(o,r){if(!(r in Fu))return console.warn("No polynomial for terrainType"+r),0;const n=Fu[r];let a;for(let p=0;p<n.domains.length;p++)if(o>=n.domains[p][0]&&o<=n.domains[p][1]){a=p;break}if(a===void 0)return console.error("Distance to hole is outside the supported range."),0;let f=n.coeffs[a].reduce((p,y,_)=>p+y*Math.pow(o,_),0);return f=Math.max(0,Math.min(1,f)),f}function wl(o,r,n,a){console.debug(`Accomodating hole outs from ${r}m on ${n}`);const u=ed(r,n);if(u==0)return console.debug("0% chance, skip"),o;console.debug(`${(100*u).toFixed(1)}% from ${r}m on ${n}`),o.features.forEach(p=>p.properties.probability*=1-u);const f=fa(a,2e-4,{units:"kilometers"});return f.properties={distanceToHole:0,terrainType:"hole",probability:u,strokesRemaining:0},o.features.push(f),o}function Wa(o,r){if(!(r in $u)){console.error("No polynomial for terrainType"+r);return}let n=$u[r].reduce((u,f,p)=>u+f*Math.pow(o,p),0);return Math.min(Math.max(n,-7),7)}function nd(o,r,n){let a=Fo(n);if(a instanceof Error)return;const u=ma(o),f=Qr(u,r,{units:"kilometers"})*1e3,p=Ha(u,a);return Wa(f,p)}function xl(o,r,n,a){let u=gl(a);o.features.forEach(f=>{let p=f.properties;if(p.strokesRemaining===void 0){const y=ma(f);p.distanceToHole=Qr(y,r,{units:"kilometers"})*1e3,p.terrainType=Ha(y,a,u),p.strokesRemaining=Wa(p.distanceToHole,p.terrainType)}p.strokesGained=n-p.strokesRemaining-1})}function Pl(o){Qi(o,r=>{let n=r.properties;n.weightedStrokesGained=n.strokesGained*n.probability})}function rd(o,r,n,a,u){const f=Fo(u);if(f instanceof Error)return f;const p=Ro(Pe(o)),y=Ro(Pe(r)),_=Ro(Pe(n));if(a<0){const V=Qr(p,y,{units:"kilometers"})*1e3;a=-a*V,a=Math.max(.5,a)}const x=fa(y,3*a/1e3,{units:"kilometers"}),C=Ha(p,f),D=Qr(p,_,{units:"kilometers"})*1e3,H=Wa(D,C);let U=yl(x);bl(U,y,a),wl(U,D,C,_),xl(U,_,H,f),Pl(U);const tt=U.features.reduce((V,rt)=>V+rt.properties.weightedStrokesGained,0);console.log("Total Weighted Strokes Gained:",tt);const b={type:Ki.STROKES_GAINED,strokesRemainingStart:H,distanceToHole:D,weightedStrokesGained:tt};return U.properties=b,U}function id(o,r,n,a,u){const f=Fo(u);if(f instanceof Error)return f;const p=Ro(Pe(o)),y=Ro(Pe(r)),_=Ro(Pe(n));if(a<0){const O=Qr(p,y,{units:"kilometers"})*1e3;a=-a*O,a=Math.max(.5,a)}const x=Ha(p,f),C=Qr(p,_,{units:"kilometers"})*1e3,D=Wa(C,x),H=fa(y,2*3*a/1e3,{units:"kilometers"});let U=yl(H,{maximum_cells:8e3});xl(U,_,D,f);const tt=fa(y,a/1e3,{units:"kilometers"}),b=ju(Gu(U,tt));b.features.forEach(O=>O.properties={}),console.log(`Iterating through aim grid of ${b.features.length} cells`);let V=0;for(let O of b.features){const z=ma(O),A=fa(z,3*a/1e3,{units:"kilometers"}),G=Gu(U,A);bl(G,z,a),wl(G,C,x,_),Pl(G);const B=G.features.reduce((q,et)=>q+et.properties.weightedStrokesGained,0);O.properties.weightedStrokesGained=B,console.log(`Processed cell ${V}, wsg = ${B}`),V++}const rt=b.features.filter(O=>Vh(O,y)),S=rt.reduce((O,z)=>O+z.properties.weightedStrokesGained,0)/rt.length;Qi(b,O=>{let z=O.properties;z.relativeStrokesGained=z.weightedStrokesGained-S});const E={type:Ki.TARGET,strokesRemainingStart:D,distanceToHole:C,weightedStrokesGained:S};return b.properties=E,b}function Ll(o,r){return sr(Vu(o,(a,u)=>(r(u)&&a.push(u),a),[]))}function od(o,r){return Ll(o,n=>ic(r,n))}function Gu(o,r){return Ll(o,n=>Ah(n,r))}function ad(o,r,n){const a=(o-r)/(n*Math.sqrt(2)),u=1/(1+.3275911*Math.abs(a)),f=.254829592,p=-.284496736,y=1.421413741,_=-1.453152027;return 1-((((1.061405429*u+_)*u+y)*u+p)*u+f)*u*Math.exp(-a*a)}const sd="/golfjs/assets/circle-ypad-10d88b78.png",ud="/golfjs/assets/flag-495311e0.png";let qe,Ut=Ol(),It=Ut.holes.at(-1),ki=It.strokes.length,Lr={},Ts=[],ca,qa,bi,Xt;function ld(o,r={}){Xa("strokeCreate");const n={index:ki,hole:It.number,start:{x:o.coords.longitude,y:o.coords.latitude,crs:"EPSG:4326"},...r};It.pin&&(n.aim={...It.pin}),It.strokes.push(n),ki++,El(n),Bn()}function fd(o,r){console.debug(`Deleting stroke ${r} from hole ${o}`);let n=Ut.holes.find(a=>a.number===o);n&&(Xa("strokeDelete"),n.strokes.splice(r,1),n.strokes.forEach((a,u)=>a.index=u),ki=n.strokes.length,Rl(),Ja(n),Bn())}function hd(o,r,n){console.debug(`Moving stroke ${r} from hole ${o} by ${n}`),Xa("strokeMove");const a=Ut.holes[o-1],u=a.strokes[r];n<0?n=Math.max(n,-r):n=Math.min(n,a.strokes.length-r-1),a.strokes.splice(r,1),a.strokes.splice(r+n,0,u),a.strokes.forEach((f,p)=>f.index=p),Bn()}function cd(o){let r=0;const n=Ut.holes[o.hole-1],a=n.strokes[o.index+1];return a?r=$o(o.start,a.start):n.pin&&(r=$o(o.start,n.pin)),r}function dd(o,r){if(r){if(typeof r=="string")return o.dispersion=parseFloat(r);if(typeof r=="number")return o.dispersion=r;throw new Error("Dispersion must be set to a number or string")}else return o.dispersion}function El(o,r){console.debug(`Creating stroke markers for stroke ${o.index}`);const n=o.start;let u={draggable:!0,opacity:.8,icon:pn.icon({iconUrl:sd,iconSize:[30,45],iconAnchor:[15,30]}),strokeIndex:o.index};r!==void 0&&(u={...u,...r});let f=Ya(o),p=Ys(f,n,u);p.bindTooltip(function(){return gd(o)},{permanent:!0,direction:"top",offset:[0,-10]}),p.on("click",vd(p))}function pd(){for(const o of Ut.holes)for(const r of o.strokes){let n=An(Ya(r));if(!n)continue;let a=n.getTooltip();a&&a.update()}}function vd(o){return()=>kl(o)}function kl(o){Xt&&ji(),o.getElement().classList.add("active-marker"),Xt=It.strokes[o.options.strokeIndex],Xt.aim?Ua():Qs.classList.remove("inactive"),qe.addEventListener("click",ji),Vs()}function ji(o){o&&o.originalEvent.target.classList.contains("leaflet-pane")||Xt&&(An(Ya(Xt)).getElement().classList.remove("active-marker"),Xt=null,Ml(),qe.removeEventListener("click",ji),Vs())}function Ua(o){if(qe.off("click",Ua),!Xt){console.error("Cannot add aim, no active stroke");return}o&&(Xt.aim={x:o.latlng.lng,y:o.latlng.lat,crs:"EPSG:4326"});let r=Ys("active_aim",Xt.aim);r.bindTooltip(md,{permanent:!0,direction:"top",offset:[-15,0]});let n=pn.circle(r.getLatLng(),{radius:Xt.dispersion,color:"#fff",opacity:.5,weight:2});ro("active_aim_ring",n),qs(),va(),Hd()}function md(){const o=$o(Xt.start,Xt.aim).toFixed(1),r=$o(Xt.aim,It.pin).toFixed(1);let n=`${o}m to aim<br> ${r}m to pin`;const a=An("active_grid");if(a&&a.options.grid){const u=a.options.grid.properties.weightedStrokesGained.toFixed(3);n+=`<br> SG Aim ${u}`}return n}function va(){try{const o=An("active_aim");o.getTooltip().update(),An("active_aim_ring").setLatLng(o.getLatLng())}catch{return}}function Ml(){Qs.classList.add("inactive"),Zo("active_aim"),Zo("active_aim_ring"),Us(),Wd()}function Ya(o){return`stroke_marker_${o.index}_hole_${o.hole}`}function gd(o){const r=o.club,n=cd(o).toFixed(1);return`${r} (${n}m)`}function qs(o){o==Ki.STROKES_GAINED?Hu():o==Ki.TARGET?yd():Hu()}function Us(){qd(),Zo("active_grid")}function _d(o){if(!o){let r=An("active_grid");r&&(o=r.options.grid.properties.type)}return Us(),Xt&&It.pin?(qs(o),va(),Promise.resolve(!0)):Promise.reject(new Error("No grid to update"))}function Hu(){if(Xt)if(It.pin)An("active_grid")&&(console.warn("Grid already exists, recreating"),Zo("active_grid"));else{console.error("Pin not set, cannot create sg grid");return}else{console.error("No active stroke, cannot create sg grid");return}const o=rd([Xt.start.y,Xt.start.x],[Xt.aim.y,Xt.aim.x],[It.pin.y,It.pin.x],Xt.dispersion,to(Ut));if(o instanceof Error)return;const r=pl.scale("RdYlGn").domain([-.25,.15]),n=1/o.features.length,a=(p,y,_)=>Math.min(Math.max(p,y),_),u={style:function(p){return{stroke:!1,fillColor:r(p.properties.strokesGained).hex(),fillOpacity:a(p.properties.probability/n*.2,.1,.7)}},grid:o},f=pn.geoJSON(o,u).bindPopup(function(p){const y=p.feature.properties,_=y.strokesGained,x=y.probability*100,D=(1-ad(y.distanceToAim,0,Xt.dispersion))*100;return`SG: ${_.toFixed(3)}
            | ${y.terrainType}
            | Prob: ${x.toFixed(2)}%
            | ${D.toFixed(1)}%ile`});ro("active_grid",f),Zl()}function yd(){if(Xt)if(It.pin)An("active_grid")&&(console.warn("Grid already exists, recreating"),Zo("active_grid"));else{console.error("Pin not set, cannot create sg grid");return}else{console.error("No active stroke, cannot create sg grid");return}const o=id([Xt.start.y,Xt.start.x],[Xt.aim.y,Xt.aim.x],[It.pin.y,It.pin.x],Xt.dispersion,to(Ut));if(o instanceof Error)return;const r=pl.scale("RdYlGn").domain([-.25,.25]),n={style:function(u){return{stroke:!1,fillColor:r(u.properties.relativeStrokesGained).hex(),fillOpacity:.5}},grid:o},a=pn.geoJSON(o,n).bindPopup(function(u){const f=u.feature.properties,p=f.weightedStrokesGained,y=f.relativeStrokesGained;return`SG: ${p.toFixed(3)}
            | vs Aim: ${y.toFixed(3)}`});ro("active_grid",a),Zl()}function bd(o){console.debug("Creating stroke line for hole "+o.number);let r=Tl(o);if(r.length==0)return;let n=pn.polyline(r,{color:"white",weight:2,interactive:!1}),a=Cl(o);return ro(a,n),n}function Sl(){let o=zl(),r={};for(let n in o)n.includes("strokeline")&&(r[n]=o[n]);for(let n of Ut.holes){let a=Cl(n);Object.keys(r).includes(a)&&r[a].setLatLngs(Tl(n))}}function Tl(o){let r=[];return o.strokes.sort((n,a)=>n.index-a.index).forEach(n=>{r.push(pn.latLng(n.start.y,n.start.x))}),o.pin&&r.push(pn.latLng(o.pin.y,o.pin.x)),r}function Cl(o){return`strokeline_hole_${o.number}`}function Il(o){Ut.holes[o-1]?(It=Ut.holes[o-1],ki=It.strokes.length):console.error(`Attempted to select hole ${o} but does not exist!`),Rl(),Ja(It),Bn(),Va("currentHole")}function wd(o){return`pin_hole_${o.number}`}function xd(o){console.debug("Creating pin marker for hole "+o.number);const r=o.pin,n=o.number,u={draggable:!0,icon:pn.icon({iconUrl:ud,iconSize:[60,60],iconAnchor:[30,60]}),title:String(n)},f=wd(o);Ys(f,r,u)}function Pd(o){let r=Ws(to(Ut),o.number);if(r instanceof Error)return;let n=pn.geoJSON(r,{style:()=>({stroke:!0,color:"#fff",weight:2,opacity:.5}),interactive:!1});ro(Ld(o),n)}function Ld(o){return`hole_${o.number}_line`}function Ed(o){Xa("roundCreate");let r=document.getElementById("courseName");if(!(r instanceof HTMLInputElement))return;let n=r.value;if(!o&&!n){console.error("Cannot create a round without any inputs");return}else if(!o){let f=document.getElementById("courseName");if(!(f instanceof HTMLInputElement))return;o={courseName:f.value}}let a=o.name,u=o.id;localStorage.removeItem("golfData"),Ut={...Ol(),course:a,courseId:u},It=Ut.holes.at(0),ki=0,Od(),ml(o).then(kd)}function kd(o){let r=o.features.filter(n=>n.properties.golf&&n.properties.golf=="hole");for(let n of r){const a=parseInt(n.properties.ref),u=Vc(to(Ut),a),f={x:u[0],y:u[1],crs:"EPSG:4326"};let p={...Al(),number:a,pin:f};n.properties.par&&(p.par=parseInt(n.properties.par)),n.properties.handicap&&(p.handicap=parseInt(n.properties.handicap)),Ut.holes[p.number-1]={...p,...Ut.holes[p.number-1]}}Xs(),Bn();for(let n of Ut.holes)Ja(n);Va("course")}function Al(){return{number:1,strokes:[]}}function Ol(){return{date:new Date().toISOString(),course:"Rancho Park Golf Course",holes:[Al()]}}function to(o){return{name:o.course,id:o.courseId}}function Md(o,r){let n={club:r.name,dispersion:r.dispersion};ld(o,n)}function Sd(){return[{id:1,name:"D",dispersion:39},{id:2,name:"3w",dispersion:35},{id:3,name:"3h",dispersion:28},{id:4,name:"4i",dispersion:23},{id:5,name:"5i",dispersion:21.5},{id:6,name:"6i",dispersion:17},{id:7,name:"7i",dispersion:16},{id:8,name:"8i",dispersion:13.5},{id:9,name:"9i",dispersion:11.5},{id:10,name:"Pw",dispersion:10},{id:11,name:"Aw",dispersion:7.5},{id:12,name:"Sw",dispersion:6},{id:13,name:"Lw",dispersion:5},{id:14,name:"P",dispersion:-.15},{id:15,name:"Penalty",dispersion:1,class:"danger"},{id:16,name:"Skip",dispersion:1,class:"secondary"}]}function Bl(){localStorage.setItem("golfData",JSON.stringify({...Ut}))}function Td(){const o=JSON.parse(localStorage.getItem("golfData"));if(o){Ut=o,console.log("Rehydrating round from localStorage"),Ut.holes.forEach(function(n){Ja(n)});const r=Ut.holes.reduce((n,a)=>a.strokes.length>0?a.number:n,1);It=Ut.holes[r-1],ki=It.strokes.length}Bn()}function Ys(o,r,n){n={draggable:!0,...n};const a=pn.marker([r.y,r.x],n);return a.on("drag",Cd(a,r)),a.on("dragend",()=>Bn("dragend")),ro(o,a),Sl(),a}function Cd(o,r){return function(a){const u=o.getLatLng();r.x=u.lng,r.y=u.lat,Bn()}}function Id(){Ad()}function Xa(o){Ts.push({action:o,round:structuredClone(Ut),currentHoleNum:It.number,currentStrokeIndex:ki}),console.debug(`Created a new undo point for action#${o}`)}function Ad(){if(Ts.length>0){const o=Ts.pop();Ut=o.round,It=Ut.holes[o.currentHoleNum-1],ki=o.currentStrokeIndex,Il(o.currentHoleNum),Bl()}else document.getElementById("error").innerText="No action to undo.",console.error("No action to undo.")}function ro(o,r){if(Lr[o]){console.error(`Layer Error: ID ${o} already exists!`);return}Lr[o]=r,qe.addLayer(r)}function An(o){return Lr[o]}function Zo(o){Lr[o]&&(qe.removeLayer(Lr[o]),delete Lr[o])}function Od(){for(const o in Lr)qe.removeLayer(Lr[o]),delete Lr[o]}function zl(){return Lr}function $o(o,r){const n=o.y,a=o.x,u=r.y,f=r.x,p=6371e3,y=n*Math.PI/180,_=u*Math.PI/180,x=(u-n)*Math.PI/180,C=(f-a)*Math.PI/180,D=Math.sin(x/2)*Math.sin(x/2)+Math.cos(y)*Math.cos(_)*Math.sin(C/2)*Math.sin(C/2),H=2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D));return p*H}function Bd(o){return qa||(Nl(),o=!0),new Promise((r,n)=>{const a=Zd();if(a&&!o)r(a);else if(navigator.geolocation)navigator.geolocation.getCurrentPosition(r,n);else{let u=new NoGeolocationError("Geolocation is not supported by this browser.",2);n(u)}})}function zd(o){return Bd().then(r=>{if(o(r))return r;throw new Error("Failed conditional test")})}function Rd(){return new Promise(o=>{document.getElementById("error").innerText="Click the map to set location",qe.on("click",r=>{const n={coords:{latitude:r.latlng.lat,longitude:r.latlng.lng}};document.getElementById("error").innerText="",o(n)})})}function Nd(){return zd(o=>{const r=pn.latLng(o.coords.latitude,o.coords.longitude);return qe.getBounds().contains(r)}).catch(Rd)}function Zd(){return ca}function $d(o){var r=document.getElementById(o),n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=.8*n;r.style.height=a+"px",qe=pn.map(o).setView([36.567383,-121.947729],18),pn.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery &copy; <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:22,maxNativeZoom:19,id:"mapbox/satellite-v9",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoicnlhbmxjaGFuIiwiYSI6ImNsamwyb2JwcDBuYzMzbHBpb2l0dHg2ODIifQ.vkFG7K0DrbHs5O1W0CIvzw"}).addTo(qe)}function Va(o){let r={animate:!0,duration:.33};if(o=="course"){let n=Qc(to(Ut));n&&(console.debug("Recentering on course"),qe.flyToBounds(n,r))}else if(o=="currentHole"){let n=jc(to(Ut),It.number);n?(console.debug("Recentering on current hole"),qe.flyToBounds(n,r)):It.pin&&(console.debug("Recentering on current pin"),qe.flyTo([It.pin.y,It.pin.x],18,r))}else(!o||o=="currentPosition")&&qa&&ca&&(console.debug("Recentering on current position"),qe.flyTo([ca.coords.latitude,ca.coords.longitude],20,r))}function Ja(o){console.debug(`Rendering layers for hole ${o.number}`),o.strokes.forEach(function(r){El(r)}),o.pin&&xd(o),bd(o),Pd(o)}function Rl(){ji();const o=zl();for(let r in o)(r.includes("hole_")||r.includes("active_"))&&Zo(r)}function Fd(o){bi=o,Xs(),o.addEventListener("change",function(){let r=parseInt(this.value,10);Il(r)})}function Xs(){if(bi&&bi instanceof HTMLSelectElement){for(;bi.firstChild;)bi.removeChild(bi.firstChild);for(let o of Ut.holes){if(!o)break;let r=document.createElement("option");r.value=o.number.toString(),r.text=`Hole ${o.number}`,bi.appendChild(r)}bi.value=It.number.toString()}}function Nl(){qa=!0,navigator.geolocation.watchPosition(o=>{const r="currentPosition";ca=o;let n=[o.coords.latitude,o.coords.longitude],a=An(r);a?a.setLatLng(n):(a=pn.circleMarker(n,{radius:10,fillColor:"#4A89F3",color:"#FFF",weight:1,opacity:.8,fillOpacity:.8}),ro(r,a))},up,{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e3})}function Dd(){const o=document.getElementById("locationData");o.textContent=JSON.stringify({...Ut},null,2)}function Vs(){const o=document.getElementById("holeStats"),r=document.getElementById("strokeStats");if(It){let n=`| ${It.strokes.length} Strokes`;It.par&&(n+=` | Par ${It.par}`),It.handicap&&(n+=` | Hcp ${It.handicap}`),o.innerText=n,r.innerHTML="",It.strokes.forEach(function(a){r.appendChild(Gd(a))})}else o.innerText="",r.innerHTML=""}function Gd(o){let r=0;It.strokes[o.index+1]?r=$o(o.start,It.strokes[o.index+1].start):It.pin&&(r=$o(o.start,It.pin));const n=document.createElement("li"),a=document.createElement("div");a.classList.add("strokeStatContainer");const u=document.createElement("div"),f=document.createElement("a");u.classList.add("strokeDetails"),u.innerHTML=`${o.club} (${Math.round(r)}m) | &#xb1;`,f.setAttribute("href",`#stroke_${o.index}_dispersion`),f.innerText=`${o.dispersion}m`,f.addEventListener("click",()=>{let y=prompt("Enter a dispersion:");y!=null&&(o.dispersion=y,Bn("full"))}),u.appendChild(f);const p=document.createElement("div");return p.classList.add("strokeControls"),p.append(Vd(o),Wu(o,-1),Wu(o,1),Xd(o)),a.append(u),a.append(p),n.append(a),n}function Js(){const o=document.getElementById("aimStats"),r=An("active_grid");if(!r)return;const n=r.options.grid,a=document.createElement("div"),u=Xt,f=Ut.holes[u.hole-1],p=n.properties.weightedStrokesGained,y=n.properties.strokesRemainingStart,_=It.strokes.length-u.index-1;let x=0;if(_>0){let H=It.strokes[u.index+1].start,U=Pe([H.x,H.y]),tt=[f.pin.x,f.pin.y];x=nd(U,tt,to(Ut))}const C=y-x-1;a.innerText=`SG Aim: ${p.toFixed(3)} | SG Actual: ${C.toFixed(3)} | SR: ${y.toFixed(3)}`;const D=document.getElementById("dispersionInput");D.value=u.dispersion.toString(),o.replaceChildren(a)}function Hd(){document.getElementById("activeStrokeControls").classList.remove("inactive"),Js()}function Wd(){document.getElementById("activeStrokeControls").classList.add("inactive")}function Zl(){document.getElementById("aimStats").classList.remove("inactive"),Js()}function qd(){document.getElementById("aimStats").classList.add("inactive")}function Ud(){let o=document.getElementById("gridTypeSelect");if(!(o instanceof HTMLSelectElement))return;for(;o.firstChild;)o.removeChild(o.firstChild);for(let n in Ki){let a=document.createElement("option");a.value=Ki[n],a.innerText=Ki[n],o.appendChild(a)}let r=An("active_grid");if(r){let n=r.options.grid.properties.type;o.value=n}o.addEventListener("change",Yd)}function Yd(){Us(),Hc(10).then(()=>{qs(this.value),va()})}function Xd(o){let r=document.createElement("button");return r.innerHTML="&#215;",r.id=`stroke_${o.index}_delete`,r.classList.add("danger"),r.addEventListener("click",()=>{fd(o.hole,o.index)}),r}function Vd(o){let r=document.createElement("button"),n,a,u,f,p;return o==Xt?(n="&#x26AC;",a="deactivate",u="secondary",f=ji,p=null):(n="&#x2609;",a="activate",u="success",f=kl,p=An(Ya(o))),r.innerHTML=n,r.id=`stroke_${o.index}_${a}`,r.classList.add(u),r.addEventListener("click",()=>{f(p),Bn()}),r}function Wu(o,r){let n=document.createElement("button"),a=r>0?"&#8595;":"&#8593;";return n.innerHTML=a,n.id=`stroke_${o.index}_move_${r}`,n.addEventListener("click",()=>{hd(o.hole,o.index,r)}),n}function Bn(o){(!o||o=="full")&&(Dd(),Sl(),pd(),va(),Vs(),Bl()),(o=="dragend"||o=="full")&&Xt&&_d().then(()=>{Js(),va()},r=>console.error(r)),o=="full"&&(Ml(),Ua())}const qu=["dispersion"];function Jd(o,r){o.forEach(n=>{const a=document.createElement("button");a.textContent=n.name,a.id=n.id,qu&&qu.forEach(u=>{n[u]&&a.setAttribute(`data-${u}`,n[u])}),n.style&&Object.assign(a.style,n.style),n.class&&a.classList.add(n.class),a.addEventListener("click",Kd(n)),r.appendChild(a)})}function Kd(o){return()=>{Ks(),Nd().then(r=>{Md(r,o)})}}function Ks(){document.getElementById("clubStrokeCreateContainer").classList.toggle("inactive"),qa||Nl()}function Qd(o){let r=document.getElementById("courseSearchResults");r.innerHTML="",o.forEach(n=>{let a=document.createElement("li"),u=document.createElement("a"),f={name:n.namedetails.name,id:jd(n.osm_type,n.osm_id)};u.innerText=n.display_name,u.setAttribute("href",`#${n.osm_id}`),u.addEventListener("click",$l(f)),a.appendChild(u),r.appendChild(a)})}function jd(o,r){return`osm-${o}-${r}`}function tp(){$d("mapid"),Jd(Sd(),document.getElementById("clubStrokeCreateContainer")),Td();let o={name:Ut.course,id:Ut.courseId};ml(o).then(()=>Va("currentHole")),Fd(document.getElementById("holeSelector")),Ud()}function ep(){Ks(),ji()}function $l(o){return()=>{let r,n;if(o)r=o.name,n=o.id;else{let a=document.getElementById("courseName");if(!(a instanceof HTMLInputElement))return;r=a.value}if(!r&&!n){alert("Course name cannot be blank!");return}confirm("Are you sure you want to start a new round? All current data will be lost.")&&(Ed(o),Xs(),Bn())}}function np(){qe.on("click",Ua),qe.off("click",ji)}function rp(){document.getElementById("roundInfo").classList.toggle("inactive")}function ip(){navigator.clipboard.writeText(document.getElementById("locationData").textContent)}function op(){Va("currentHole")}let Uu;function ap(){let o=this.value;clearTimeout(Uu),Uu=setTimeout(()=>{if(o.length>=3)return Uc(o).then(Qd);document.getElementById("courseSearchResults").innerHTML=""},500)}function sp(){const o=this.value;try{dd(Xt,o),Bn("full")}catch(r){console.debug(r.message)}}function up(o){switch(o.code){case o.PERMISSION_DENIED:document.getElementById("error").innerText="User denied the request for Geolocation.";break;case o.POSITION_UNAVAILABLE:document.getElementById("error").innerText="Location information is unavailable.";break;case o.TIMEOUT:document.getElementById("error").innerText="The request to get user location timed out.";break;case o.UNKNOWN_ERROR:document.getElementById("error").innerText="An unknown error occurred.";break;default:document.getElementById("error").innerText=o.text;break}}let Qs=document.getElementById("strokeMarkerAimCreate");window.onload=tp;document.getElementById("strokeAdd").addEventListener("click",ep);document.getElementById("clubStrokeCreateContainerClose").addEventListener("click",Ks);document.getElementById("roundCreate").addEventListener("click",$l());document.getElementById("toggleRound").addEventListener("click",rp);document.getElementById("copyToClipboard").addEventListener("click",ip);document.getElementById("undoAction").addEventListener("click",Id);document.getElementById("recenter").addEventListener("click",op);Qs.addEventListener("click",np);document.getElementById("courseName").addEventListener("input",ap);document.getElementById("dispersionInput").addEventListener("change",sp);
