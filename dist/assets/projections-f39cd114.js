(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function go(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function po(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),r}var Vr=63710088e-1,yo={centimeters:Vr*100,centimetres:Vr*100,degrees:Vr/111325,feet:Vr*3.28084,inches:Vr*39.37,kilometers:Vr/1e3,kilometres:Vr/1e3,meters:Vr,metres:Vr,miles:Vr/1609.344,millimeters:Vr*1e3,millimetres:Vr*1e3,nauticalmiles:Vr/1852,radians:1,yards:Vr*1.0936},Hs={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Vr,yards:1.0936133},io={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function he(t,e,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function Us(t,e,r){switch(t){case"Point":return Ir(e).geometry;case"LineString":return we(e).geometry;case"Polygon":return Ct(e).geometry;case"MultiPoint":return Ru(e).geometry;case"MultiLineString":return bo(e).geometry;case"MultiPolygon":return mo(e).geometry;default:throw new Error(t+" is invalid")}}function Ir(t,e,r){if(r===void 0&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Oa(t[0])||!Oa(t[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:t};return he(n,e,r)}function Js(t,e,r){return r===void 0&&(r={}),xe(t.map(function(n){return Ir(n,e)}),r)}function Ct(t,e,r){r===void 0&&(r={});for(var n=0,o=t;n<o.length;n++){var u=o[n];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<u[u.length-1].length;l++)if(u[u.length-1][l]!==u[0][l])throw new Error("First and last Position are not equivalent.")}var v={type:"Polygon",coordinates:t};return he(v,e,r)}function Qs(t,e,r){return r===void 0&&(r={}),xe(t.map(function(n){return Ct(n,e)}),r)}function we(t,e,r){if(r===void 0&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:t};return he(n,e,r)}function Zs(t,e,r){return r===void 0&&(r={}),xe(t.map(function(n){return we(n,e)}),r)}function xe(t,e){e===void 0&&(e={});var r={type:"FeatureCollection"};return e.id&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.features=t,r}function bo(t,e,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:t};return he(n,e,r)}function Ru(t,e,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:t};return he(n,e,r)}function mo(t,e,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:t};return he(n,e,r)}function Ks(t,e,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:t};return he(n,e,r)}function Vs(t,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,e||0);return Math.round(t*r)/r}function wo(t,e){e===void 0&&(e="kilometers");var r=yo[e];if(!r)throw new Error(e+" units is invalid");return t*r}function Na(t,e){e===void 0&&(e="kilometers");var r=yo[e];if(!r)throw new Error(e+" units is invalid");return t/r}function js(t,e){return Aa(Na(t,e))}function rl(t){var e=t%360;return e<0&&(e+=360),e}function Aa(t){var e=t%(2*Math.PI);return e*180/Math.PI}function ct(t){var e=t%360;return e*Math.PI/180}function el(t,e,r){if(e===void 0&&(e="kilometers"),r===void 0&&(r="kilometers"),!(t>=0))throw new Error("length must be a positive number");return wo(Na(t,e),r)}function tl(t,e,r){if(e===void 0&&(e="meters"),r===void 0&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var n=io[e];if(!n)throw new Error("invalid original units");var o=io[r];if(!o)throw new Error("invalid final units");return t/n*o}function Oa(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Ta(t){return!!t&&t.constructor===Object}function nl(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!Oa(e))throw new Error("bbox must only contain numbers")})}function al(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const il=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:io,bearingToAzimuth:rl,convertArea:tl,convertLength:el,degreesToRadians:ct,earthRadius:Vr,factors:yo,feature:he,featureCollection:xe,geometry:Us,geometryCollection:Ks,isNumber:Oa,isObject:Ta,lengthToDegrees:js,lengthToRadians:Na,lineString:we,lineStrings:Zs,multiLineString:bo,multiPoint:Ru,multiPolygon:mo,point:Ir,points:Js,polygon:Ct,polygons:Qs,radiansToDegrees:Aa,radiansToLength:wo,round:Vs,unitsFactors:Hs,validateBBox:nl,validateId:al},Symbol.toStringTag,{value:"Module"}));function Nt(t,e,r){if(t!==null)for(var n,o,u,l,v,h,p,k=0,L=0,C,X=t.type,Y=X==="FeatureCollection",d=X==="Feature",F=Y?t.features.length:1,D=0;D<F;D++){p=Y?t.features[D].geometry:d?t.geometry:t,C=p?p.type==="GeometryCollection":!1,v=C?p.geometries.length:1;for(var w=0;w<v;w++){var b=0,$=0;if(l=C?p.geometries[w]:p,l!==null){h=l.coordinates;var P=l.type;switch(k=r&&(P==="Polygon"||P==="MultiPolygon")?1:0,P){case null:break;case"Point":if(e(h,L,D,b,$)===!1)return!1;L++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<h.length;n++){if(e(h[n],L,D,b,$)===!1)return!1;L++,P==="MultiPoint"&&b++}P==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<h.length;n++){for(o=0;o<h[n].length-k;o++){if(e(h[n][o],L,D,b,$)===!1)return!1;L++}P==="MultiLineString"&&b++,P==="Polygon"&&$++}P==="Polygon"&&b++;break;case"MultiPolygon":for(n=0;n<h.length;n++){for($=0,o=0;o<h[n].length;o++){for(u=0;u<h[n][o].length-k;u++){if(e(h[n][o][u],L,D,b,$)===!1)return!1;L++}$++}b++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(Nt(l.geometries[n],e,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ol(t,e,r,n){var o=r;return Nt(t,function(u,l,v,h,p){l===0&&r===void 0?o=u:o=e(o,u,l,v,h,p)},n),o}function Lu(t,e){var r;switch(t.type){case"FeatureCollection":for(r=0;r<t.features.length&&e(t.features[r].properties,r)!==!1;r++);break;case"Feature":e(t.properties,0);break}}function ul(t,e,r){var n=r;return Lu(t,function(o,u){u===0&&r===void 0?n=o:n=e(n,o,u)}),n}function Lt(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var r=0;r<t.features.length&&e(t.features[r],r)!==!1;r++);}function Cu(t,e,r){var n=r;return Lt(t,function(o,u){u===0&&r===void 0?n=o:n=e(n,o,u)}),n}function fl(t){var e=[];return Nt(t,function(r){e.push(r)}),e}function _o(t,e){var r,n,o,u,l,v,h,p,k,L,C=0,X=t.type==="FeatureCollection",Y=t.type==="Feature",d=X?t.features.length:1;for(r=0;r<d;r++){for(v=X?t.features[r].geometry:Y?t.geometry:t,p=X?t.features[r].properties:Y?t.properties:{},k=X?t.features[r].bbox:Y?t.bbox:void 0,L=X?t.features[r].id:Y?t.id:void 0,h=v?v.type==="GeometryCollection":!1,l=h?v.geometries.length:1,o=0;o<l;o++){if(u=h?v.geometries[o]:v,u===null){if(e(null,C,p,k,L)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(u,C,p,k,L)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<u.geometries.length;n++)if(e(u.geometries[n],C,p,k,L)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}C++}}function Nu(t,e,r){var n=r;return _o(t,function(o,u,l,v,h){u===0&&r===void 0?n=o:n=e(n,o,u,l,v,h)}),n}function ze(t,e){_o(t,function(r,n,o,u,l){var v=r===null?null:r.type;switch(v){case null:case"Point":case"LineString":case"Polygon":return e(he(r,o,{bbox:u,id:l}),n,0)===!1?!1:void 0}var h;switch(v){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var p=0;p<r.coordinates.length;p++){var k=r.coordinates[p],L={type:h,coordinates:k};if(e(he(L,o),n,p)===!1)return!1}})}function sl(t,e,r){var n=r;return ze(t,function(o,u,l){u===0&&l===0&&r===void 0?n=o:n=e(n,o,u,l)}),n}function Tu(t,e){ze(t,function(r,n,o){var u=0;if(r.geometry){var l=r.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var v,h=0,p=0,k=0;if(Nt(r,function(L,C,X,Y,d){if(v===void 0||n>h||Y>p||d>k){v=L,h=n,p=Y,k=d,u=0;return}var F=we([v,L],r.properties);if(e(F,n,o,d,u)===!1)return!1;u++,v=L})===!1)return!1}}})}function ll(t,e,r){var n=r,o=!1;return Tu(t,function(u,l,v,h,p){o===!1&&r===void 0?n=u:n=e(n,u,l,v,h,p),o=!0}),n}function Fu(t,e){if(!t)throw new Error("geojson is required");ze(t,function(r,n,o){if(r.geometry!==null){var u=r.geometry.type,l=r.geometry.coordinates;switch(u){case"LineString":if(e(r,n,o,0,0)===!1)return!1;break;case"Polygon":for(var v=0;v<l.length;v++)if(e(we(l[v],r.properties),n,o,v)===!1)return!1;break}}})}function cl(t,e,r){var n=r;return Fu(t,function(o,u,l,v){u===0&&r===void 0?n=o:n=e(n,o,u,l,v)}),n}function hl(t,e){if(e=e||{},!Ta(e))throw new Error("options is invalid");var r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,u=e.segmentIndex||0,l=e.properties,v;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,v=t.features[r].geometry;break;case"Feature":l=l||t.properties,v=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":v=t;break;default:throw new Error("geojson is invalid")}if(v===null)return null;var h=v.coordinates;switch(v.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=h.length+u-1),we([h[u],h[u+1]],l,e);case"Polygon":return o<0&&(o=h.length+o),u<0&&(u=h[o].length+u-1),we([h[o][u],h[o][u+1]],l,e);case"MultiLineString":return n<0&&(n=h.length+n),u<0&&(u=h[n].length+u-1),we([h[n][u],h[n][u+1]],l,e);case"MultiPolygon":return n<0&&(n=h.length+n),o<0&&(o=h[n].length+o),u<0&&(u=h[n][o].length-u-1),we([h[n][o][u],h[n][o][u+1]],l,e)}throw new Error("geojson is invalid")}function vl(t,e){if(e=e||{},!Ta(e))throw new Error("options is invalid");var r=e.featureIndex||0,n=e.multiFeatureIndex||0,o=e.geometryIndex||0,u=e.coordIndex||0,l=e.properties,v;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,v=t.features[r].geometry;break;case"Feature":l=l||t.properties,v=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":v=t;break;default:throw new Error("geojson is invalid")}if(v===null)return null;var h=v.coordinates;switch(v.type){case"Point":return Ir(h,l,e);case"MultiPoint":return n<0&&(n=h.length+n),Ir(h[n],l,e);case"LineString":return u<0&&(u=h.length+u),Ir(h[u],l,e);case"Polygon":return o<0&&(o=h.length+o),u<0&&(u=h[o].length+u),Ir(h[o][u],l,e);case"MultiLineString":return n<0&&(n=h.length+n),u<0&&(u=h[n].length+u),Ir(h[n][u],l,e);case"MultiPolygon":return n<0&&(n=h.length+n),o<0&&(o=h[n].length+o),u<0&&(u=h[n][o].length-u),Ir(h[n][o][u],l,e)}throw new Error("geojson is invalid")}const gl=Object.freeze(Object.defineProperty({__proto__:null,coordAll:fl,coordEach:Nt,coordReduce:ol,featureEach:Lt,featureReduce:Cu,findPoint:vl,findSegment:hl,flattenEach:ze,flattenReduce:sl,geomEach:_o,geomReduce:Nu,lineEach:Fu,lineReduce:cl,propEach:Lu,propReduce:ul,segmentEach:Tu,segmentReduce:ll},Symbol.toStringTag,{value:"Module"}));function re(t){var e=[1/0,1/0,-1/0,-1/0];return Nt(t,function(r){e[0]>r[0]&&(e[0]=r[0]),e[1]>r[1]&&(e[1]=r[1]),e[2]<r[0]&&(e[2]=r[0]),e[3]<r[1]&&(e[3]=r[1])}),e}re.default=re;const pl=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));function qn(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function fn(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ee(t){return t.type==="Feature"?t.geometry:t}function dl(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function Dr(t,e,r){if(r===void 0&&(r={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=qn(t),o=Ee(e),u=o.type,l=e.bbox,v=o.coordinates;if(l&&yl(n,l)===!1)return!1;u==="Polygon"&&(v=[v]);for(var h=!1,p=0;p<v.length&&!h;p++)if(iu(n,v[p][0],r.ignoreBoundary)){for(var k=!1,L=1;L<v[p].length&&!k;)iu(n,v[p][L],!r.ignoreBoundary)&&(k=!0),L++;k||(h=!0)}return h}function iu(t,e,r){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,u=e.length-1;o<e.length;u=o++){var l=e[o][0],v=e[o][1],h=e[u][0],p=e[u][1],k=t[1]*(l-h)+v*(h-t[0])+p*(t[0]-l)===0&&(l-t[0])*(h-t[0])<=0&&(v-t[1])*(p-t[1])<=0;if(k)return!r;var L=v>t[1]!=p>t[1]&&t[0]<(h-l)*(t[1]-v)/(p-v)+l;L&&(n=!n)}return n}function yl(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function Ce(t,e,r){r===void 0&&(r={});var n=qn(t),o=qn(e),u=ct(o[1]-n[1]),l=ct(o[0]-n[0]),v=ct(n[1]),h=ct(o[1]),p=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(v)*Math.cos(h);return wo(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),r.units)}function Gu(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Bu(t);case"FeatureCollection":return bl(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return xo(t);default:throw new Error("unknown GeoJSON type")}}function Bu(t){var e={type:"Feature"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:e[r]=t[r]}}),e.properties=qu(t.properties),e.geometry=xo(t.geometry),e}function qu(t){var e={};return t&&Object.keys(t).forEach(function(r){var n=t[r];typeof n=="object"?n===null?e[r]=null:Array.isArray(n)?e[r]=n.map(function(o){return o}):e[r]=qu(n):e[r]=n}),e}function bl(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(r){switch(r){case"type":case"features":return;default:e[r]=t[r]}}),e.features=t.features.map(function(r){return Bu(r)}),e}function xo(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),t.type==="GeometryCollection"?(e.geometries=t.geometries.map(function(r){return xo(r)}),e):(e.coordinates=Xu(t.coordinates),e)}function Xu(t){var e=t;return typeof e[0]!="object"?e.slice():e.map(function(r){return Xu(r)})}function un(t,e){if(e=e||{},!Ta(e))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return(r===!1||r===void 0)&&(t=Gu(t)),Nt(t,function(n){var o=n[0],u=n[1];n[0]=u,n[1]=o}),t}function ml(t,e,r,n){n===void 0&&(n={});var o=qn(t),u=ct(o[0]),l=ct(o[1]),v=ct(r),h=Na(e,n.units),p=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(v)),k=u+Math.atan2(Math.sin(v)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(p)),L=Aa(k),C=Aa(p);return Ir([L,C],n.properties)}function Gn(t,e,r){r===void 0&&(r={});for(var n=r.steps||64,o=r.properties?r.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},u=[],l=0;l<n;l++)u.push(ml(t,e,l*-360/n,r).geometry.coordinates);return u.push(u[0]),Ct([u],o)}function Yn(t,e){e===void 0&&(e={});var r=re(t),n=(r[0]+r[2])/2,o=(r[1]+r[3])/2;return Ir([n,o],e.properties,e)}function ou(t){if(!t)throw new Error("geojson is required");var e=[];return ze(t,function(r){wl(r,e)}),xe(e)}function wl(t,e){var r=[],n=t.geometry;if(n!==null){switch(n.type){case"Polygon":r=fn(n);break;case"LineString":r=[fn(n)]}r.forEach(function(o){var u=_l(o,t.properties);u.forEach(function(l){l.id=e.length,e.push(l)})})}}function _l(t,e){var r=[];return t.reduce(function(n,o){var u=we([n,o],e);return u.bbox=xl(n,o),r.push(u),o}),r}function xl(t,e){var r=t[0],n=t[1],o=e[0],u=e[1],l=r<o?r:o,v=n<u?n:u,h=r>o?r:o,p=n>u?n:u;return[l,v,h,p]}var Eo={exports:{}},Yu={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Rt,function(){function r(w,b,$,P,E){(function I(M,N,z,H,V){for(;H>z;){if(H-z>600){var rr=H-z+1,j=N-z+1,Pr=Math.log(rr),$r=.5*Math.exp(2*Pr/3),Ar=.5*Math.sqrt(Pr*$r*(rr-$r)/rr)*(j-rr/2<0?-1:1),Rr=Math.max(z,Math.floor(N-j*$r/rr+Ar)),Gr=Math.min(H,Math.floor(N+(rr-j)*$r/rr+Ar));I(M,N,Rr,Gr,V)}var Lr=M[N],Tr=z,cr=H;for(n(M,z,N),V(M[H],Lr)>0&&n(M,z,H);Tr<cr;){for(n(M,Tr,cr),Tr++,cr--;V(M[Tr],Lr)<0;)Tr++;for(;V(M[cr],Lr)>0;)cr--}V(M[z],Lr)===0?n(M,z,cr):n(M,++cr,H),cr<=N&&(z=cr+1),N<=cr&&(H=cr-1)}})(w,b,$||0,P||w.length-1,E||o)}function n(w,b,$){var P=w[b];w[b]=w[$],w[$]=P}function o(w,b){return w<b?-1:w>b?1:0}var u=function(w){w===void 0&&(w=9),this._maxEntries=Math.max(4,w),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(w,b,$){if(!$)return b.indexOf(w);for(var P=0;P<b.length;P++)if($(w,b[P]))return P;return-1}function v(w,b){h(w,0,w.children.length,b,w)}function h(w,b,$,P,E){E||(E=F(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var I=b;I<$;I++){var M=w.children[I];p(E,w.leaf?P(M):M)}return E}function p(w,b){return w.minX=Math.min(w.minX,b.minX),w.minY=Math.min(w.minY,b.minY),w.maxX=Math.max(w.maxX,b.maxX),w.maxY=Math.max(w.maxY,b.maxY),w}function k(w,b){return w.minX-b.minX}function L(w,b){return w.minY-b.minY}function C(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function X(w){return w.maxX-w.minX+(w.maxY-w.minY)}function Y(w,b){return w.minX<=b.minX&&w.minY<=b.minY&&b.maxX<=w.maxX&&b.maxY<=w.maxY}function d(w,b){return b.minX<=w.maxX&&b.minY<=w.maxY&&b.maxX>=w.minX&&b.maxY>=w.minY}function F(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function D(w,b,$,P,E){for(var I=[b,$];I.length;)if(!(($=I.pop())-(b=I.pop())<=P)){var M=b+Math.ceil(($-b)/P/2)*P;r(w,M,b,$,E),I.push(b,M,M,$)}}return u.prototype.all=function(){return this._all(this.data,[])},u.prototype.search=function(w){var b=this.data,$=[];if(!d(w,b))return $;for(var P=this.toBBox,E=[];b;){for(var I=0;I<b.children.length;I++){var M=b.children[I],N=b.leaf?P(M):M;d(w,N)&&(b.leaf?$.push(M):Y(w,N)?this._all(M,$):E.push(M))}b=E.pop()}return $},u.prototype.collides=function(w){var b=this.data;if(!d(w,b))return!1;for(var $=[];b;){for(var P=0;P<b.children.length;P++){var E=b.children[P],I=b.leaf?this.toBBox(E):E;if(d(w,I)){if(b.leaf||Y(w,I))return!0;$.push(E)}}b=$.pop()}return!1},u.prototype.load=function(w){if(!w||!w.length)return this;if(w.length<this._minEntries){for(var b=0;b<w.length;b++)this.insert(w[b]);return this}var $=this._build(w.slice(),0,w.length-1,0);if(this.data.children.length)if(this.data.height===$.height)this._splitRoot(this.data,$);else{if(this.data.height<$.height){var P=this.data;this.data=$,$=P}this._insert($,this.data.height-$.height-1,!0)}else this.data=$;return this},u.prototype.insert=function(w){return w&&this._insert(w,this.data.height-1),this},u.prototype.clear=function(){return this.data=F([]),this},u.prototype.remove=function(w,b){if(!w)return this;for(var $,P,E,I=this.data,M=this.toBBox(w),N=[],z=[];I||N.length;){if(I||(I=N.pop(),P=N[N.length-1],$=z.pop(),E=!0),I.leaf){var H=l(w,I.children,b);if(H!==-1)return I.children.splice(H,1),N.push(I),this._condense(N),this}E||I.leaf||!Y(I,M)?P?($++,I=P.children[$],E=!1):I=null:(N.push(I),z.push($),$=0,P=I,I=I.children[0])}return this},u.prototype.toBBox=function(w){return w},u.prototype.compareMinX=function(w,b){return w.minX-b.minX},u.prototype.compareMinY=function(w,b){return w.minY-b.minY},u.prototype.toJSON=function(){return this.data},u.prototype.fromJSON=function(w){return this.data=w,this},u.prototype._all=function(w,b){for(var $=[];w;)w.leaf?b.push.apply(b,w.children):$.push.apply($,w.children),w=$.pop();return b},u.prototype._build=function(w,b,$,P){var E,I=$-b+1,M=this._maxEntries;if(I<=M)return v(E=F(w.slice(b,$+1)),this.toBBox),E;P||(P=Math.ceil(Math.log(I)/Math.log(M)),M=Math.ceil(I/Math.pow(M,P-1))),(E=F([])).leaf=!1,E.height=P;var N=Math.ceil(I/M),z=N*Math.ceil(Math.sqrt(M));D(w,b,$,z,this.compareMinX);for(var H=b;H<=$;H+=z){var V=Math.min(H+z-1,$);D(w,H,V,N,this.compareMinY);for(var rr=H;rr<=V;rr+=N){var j=Math.min(rr+N-1,V);E.children.push(this._build(w,rr,j,P-1))}}return v(E,this.toBBox),E},u.prototype._chooseSubtree=function(w,b,$,P){for(;P.push(b),!b.leaf&&P.length-1!==$;){for(var E=1/0,I=1/0,M=void 0,N=0;N<b.children.length;N++){var z=b.children[N],H=C(z),V=(rr=w,j=z,(Math.max(j.maxX,rr.maxX)-Math.min(j.minX,rr.minX))*(Math.max(j.maxY,rr.maxY)-Math.min(j.minY,rr.minY))-H);V<I?(I=V,E=H<E?H:E,M=z):V===I&&H<E&&(E=H,M=z)}b=M||b.children[0]}var rr,j;return b},u.prototype._insert=function(w,b,$){var P=$?w:this.toBBox(w),E=[],I=this._chooseSubtree(P,this.data,b,E);for(I.children.push(w),p(I,P);b>=0&&E[b].children.length>this._maxEntries;)this._split(E,b),b--;this._adjustParentBBoxes(P,E,b)},u.prototype._split=function(w,b){var $=w[b],P=$.children.length,E=this._minEntries;this._chooseSplitAxis($,E,P);var I=this._chooseSplitIndex($,E,P),M=F($.children.splice(I,$.children.length-I));M.height=$.height,M.leaf=$.leaf,v($,this.toBBox),v(M,this.toBBox),b?w[b-1].children.push(M):this._splitRoot($,M)},u.prototype._splitRoot=function(w,b){this.data=F([w,b]),this.data.height=w.height+1,this.data.leaf=!1,v(this.data,this.toBBox)},u.prototype._chooseSplitIndex=function(w,b,$){for(var P,E,I,M,N,z,H,V=1/0,rr=1/0,j=b;j<=$-b;j++){var Pr=h(w,0,j,this.toBBox),$r=h(w,j,$,this.toBBox),Ar=(E=Pr,I=$r,M=void 0,N=void 0,z=void 0,H=void 0,M=Math.max(E.minX,I.minX),N=Math.max(E.minY,I.minY),z=Math.min(E.maxX,I.maxX),H=Math.min(E.maxY,I.maxY),Math.max(0,z-M)*Math.max(0,H-N)),Rr=C(Pr)+C($r);Ar<V?(V=Ar,P=j,rr=Rr<rr?Rr:rr):Ar===V&&Rr<rr&&(rr=Rr,P=j)}return P||$-b},u.prototype._chooseSplitAxis=function(w,b,$){var P=w.leaf?this.compareMinX:k,E=w.leaf?this.compareMinY:L;this._allDistMargin(w,b,$,P)<this._allDistMargin(w,b,$,E)&&w.children.sort(P)},u.prototype._allDistMargin=function(w,b,$,P){w.children.sort(P);for(var E=this.toBBox,I=h(w,0,b,E),M=h(w,$-b,$,E),N=X(I)+X(M),z=b;z<$-b;z++){var H=w.children[z];p(I,w.leaf?E(H):H),N+=X(I)}for(var V=$-b-1;V>=b;V--){var rr=w.children[V];p(M,w.leaf?E(rr):rr),N+=X(M)}return N},u.prototype._adjustParentBBoxes=function(w,b,$){for(var P=$;P>=0;P--)p(b[P],w)},u.prototype._condense=function(w){for(var b=w.length-1,$=void 0;b>=0;b--)w[b].children.length===0?b>0?($=w[b-1].children).splice($.indexOf(w[b]),1):this.clear():v(w[b],this.toBBox)},u})})(Yu);var El=Yu.exports;const kl=po(il),Ml=po(gl),Pl=po(pl);var Re=El,Du=kl,zu=Ml,on=Pl.default,Sl=zu.featureEach;zu.coordEach;Du.polygon;var uu=Du.featureCollection;function Wu(t){var e=new Re(t);return e.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:on(r),Re.prototype.insert.call(this,r)},e.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:on(o),n.push(o)}):Sl(r,function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:on(o),n.push(o)}),Re.prototype.load.call(this,n)},e.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:on(r),Re.prototype.remove.call(this,r,n)},e.clear=function(){return Re.prototype.clear.call(this)},e.search=function(r){var n=Re.prototype.search.call(this,this.toBBox(r));return uu(n)},e.collides=function(r){return Re.prototype.collides.call(this,this.toBBox(r))},e.all=function(){var r=Re.prototype.all.call(this);return uu(r)},e.toJSON=function(){return Re.prototype.toJSON.call(this)},e.fromJSON=function(r){return Re.prototype.fromJSON.call(this,r)},e.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=on(r);else if(r.type==="FeatureCollection")n=on(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},e}Eo.exports=Wu;Eo.exports.default=Wu;var $l=Eo.exports;const Al=go($l);function ko(t,e){var r={},n=[];if(t.type==="LineString"&&(t=he(t)),e.type==="LineString"&&(e=he(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var o=fu(t,e);return o&&n.push(o),xe(n)}var u=Al();return u.load(ou(e)),Lt(ou(t),function(l){Lt(u.search(l),function(v){var h=fu(l,v);if(h){var p=fn(h).join(",");r[p]||(r[p]=!0,n.push(h))}})}),xe(n)}function fu(t,e){var r=fn(t),n=fn(e);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=r[0][0],u=r[0][1],l=r[1][0],v=r[1][1],h=n[0][0],p=n[0][1],k=n[1][0],L=n[1][1],C=(L-p)*(l-o)-(k-h)*(v-u),X=(k-h)*(u-p)-(L-p)*(o-h),Y=(l-o)*(u-p)-(v-u)*(o-h);if(C===0)return null;var d=X/C,F=Y/C;if(d>=0&&d<=1&&F>=0&&F<=1){var D=o+d*(l-o),w=u+d*(v-u);return Ir([D,w])}return null}var su=6378137;function Ol(t){return Nu(t,function(e,r){return e+Il(r)},0)}function Il(t){var e=0,r;switch(t.type){case"Polygon":return lu(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)e+=lu(t.coordinates[r]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function lu(t){var e=0;if(t&&t.length>0){e+=Math.abs(cu(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(cu(t[r]))}return e}function cu(t){var e,r,n,o,u,l,v,h=0,p=t.length;if(p>2){for(v=0;v<p;v++)v===p-2?(o=p-2,u=p-1,l=0):v===p-1?(o=p-1,u=0,l=1):(o=v,u=v+1,l=v+2),e=t[o],r=t[u],n=t[l],h+=(to(n[0])-to(e[0]))*Math.sin(to(r[1]));h=h*su*su/2}return h}function to(t){return t*Math.PI/180}function We(t,e,r){r===void 0&&(r={});for(var n=qn(t),o=fn(e),u=0;u<o.length-1;u++){var l=!1;if(r.ignoreEndVertices&&(u===0&&(l="start"),u===o.length-2&&(l="end"),u===0&&u+1===o.length-1&&(l="both")),Rl(o[u],o[u+1],n,l,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function Rl(t,e,r,n,o){var u=r[0],l=r[1],v=t[0],h=t[1],p=e[0],k=e[1],L=r[0]-v,C=r[1]-h,X=p-v,Y=k-h,d=L*Y-C*X;if(o!==null){if(Math.abs(d)>o)return!1}else if(d!==0)return!1;if(n){if(n==="start")return Math.abs(X)>=Math.abs(Y)?X>0?v<u&&u<=p:p<=u&&u<v:Y>0?h<l&&l<=k:k<=l&&l<h;if(n==="end")return Math.abs(X)>=Math.abs(Y)?X>0?v<=u&&u<p:p<u&&u<=v:Y>0?h<=l&&l<k:k<l&&l<=h;if(n==="both")return Math.abs(X)>=Math.abs(Y)?X>0?v<u&&u<p:p<u&&u<v:Y>0?h<l&&l<k:k<l&&l<h}else return Math.abs(X)>=Math.abs(Y)?X>0?v<=u&&u<=p:p<=u&&u<=v:Y>0?h<=l&&l<=k:k<=l&&l<=h;return!1}function Ll(t,e){var r=Ee(t),n=Ee(e),o=r.type,u=n.type;switch(o){case"Point":switch(u){case"MultiPoint":return Cl(r,n);case"LineString":return We(r,n,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return Dr(r,n,{ignoreBoundary:!0});default:throw new Error("feature2 "+u+" geometry not supported")}case"MultiPoint":switch(u){case"MultiPoint":return Nl(r,n);case"LineString":return Tl(r,n);case"Polygon":case"MultiPolygon":return Fl(r,n);default:throw new Error("feature2 "+u+" geometry not supported")}case"LineString":switch(u){case"LineString":return Gl(r,n);case"Polygon":case"MultiPolygon":return Bl(r,n);default:throw new Error("feature2 "+u+" geometry not supported")}case"Polygon":switch(u){case"Polygon":case"MultiPolygon":return ql(r,n);default:throw new Error("feature2 "+u+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}}function Cl(t,e){var r,n=!1;for(r=0;r<e.coordinates.length;r++)if(Uu(e.coordinates[r],t.coordinates)){n=!0;break}return n}function Nl(t,e){for(var r=0;r<t.coordinates.length;r++){for(var n=!1,o=0;o<e.coordinates.length;o++)Uu(t.coordinates[r],e.coordinates[o])&&(n=!0);if(!n)return!1}return!0}function Tl(t,e){for(var r=!1,n=0;n<t.coordinates.length;n++){if(!We(t.coordinates[n],e))return!1;r||(r=We(t.coordinates[n],e,{ignoreEndVertices:!0}))}return r}function Fl(t,e){for(var r=!0,n=!1,o=0;o<t.coordinates.length;o++){if(n=Dr(t.coordinates[1],e),!n){r=!1;break}n=Dr(t.coordinates[1],e,{ignoreBoundary:!0})}return r&&n}function Gl(t,e){for(var r=0;r<t.coordinates.length;r++)if(!We(t.coordinates[r],e))return!1;return!0}function Bl(t,e){var r=re(e),n=re(t);if(!Hu(r,n))return!1;for(var o=!1,u=0;u<t.coordinates.length-1;u++){if(!Dr(t.coordinates[u],e))return!1;if(o||(o=Dr(t.coordinates[u],e,{ignoreBoundary:!0})),!o){var l=Xl(t.coordinates[u],t.coordinates[u+1]);o=Dr(l,e,{ignoreBoundary:!0})}}return o}function ql(t,e){var r=re(t),n=re(e);if(!Hu(n,r))return!1;for(var o=0;o<t.coordinates[0].length;o++)if(!Dr(t.coordinates[0][o],e))return!1;return!0}function Hu(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Uu(t,e){return t[0]===e[0]&&t[1]===e[1]}function Xl(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function oo(t,e){e===void 0&&(e={});var r=Ee(t);switch(!e.properties&&t.type==="Feature"&&(e.properties=t.properties),r.type){case"Polygon":return Yl(r,e);case"MultiPolygon":return Dl(r,e);default:throw new Error("invalid poly")}}function Yl(t,e){e===void 0&&(e={});var r=Ee(t),n=r.coordinates,o=e.properties?e.properties:t.type==="Feature"?t.properties:{};return Ju(n,o)}function Dl(t,e){e===void 0&&(e={});var r=Ee(t),n=r.coordinates,o=e.properties?e.properties:t.type==="Feature"?t.properties:{},u=[];return n.forEach(function(l){u.push(Ju(l,o))}),xe(u)}function Ju(t,e){return t.length>1?bo(t,e):we(t[0],e)}function zl(t,e){var r=!0;return ze(t,function(n){ze(e,function(o){if(r===!1)return!1;r=Wl(n.geometry,o.geometry)})}),r}function Wl(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!Ql(t.coordinates,e.coordinates);case"LineString":return!hu(e,t);case"Polygon":return!Dr(t,e)}break;case"LineString":switch(e.type){case"Point":return!hu(t,e);case"LineString":return!Hl(t,e);case"Polygon":return!vu(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Dr(e,t);case"LineString":return!vu(t,e);case"Polygon":return!Ul(e,t)}}return!1}function hu(t,e){for(var r=0;r<t.coordinates.length-1;r++)if(Jl(t.coordinates[r],t.coordinates[r+1],e.coordinates))return!0;return!1}function Hl(t,e){var r=ko(t,e);return r.features.length>0}function vu(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){var o=n[r];if(Dr(o,t))return!0}var u=ko(e,oo(t));return u.features.length>0}function Ul(t,e){for(var r=0,n=t.coordinates[0];r<n.length;r++){var o=n[r];if(Dr(o,e))return!0}for(var u=0,l=e.coordinates[0];u<l.length;u++){var v=l[u];if(Dr(v,t))return!0}var h=ko(oo(t),oo(e));return h.features.length>0}function Jl(t,e,r){var n=r[0]-t[0],o=r[1]-t[1],u=e[0]-t[0],l=e[1]-t[1],v=n*l-o*u;return v!==0?!1:Math.abs(u)>=Math.abs(l)?u>0?t[0]<=r[0]&&r[0]<=e[0]:e[0]<=r[0]&&r[0]<=t[0]:l>0?t[1]<=r[1]&&r[1]<=e[1]:e[1]<=r[1]&&r[1]<=t[1]}function Ql(t,e){return t[0]===e[0]&&t[1]===e[1]}function Zl(t,e){var r=Ee(t),n=Ee(e),o=r.type,u=n.type,l=r.coordinates,v=n.coordinates;switch(o){case"Point":switch(u){case"Point":return Mo(l,v);default:throw new Error("feature2 "+u+" geometry not supported")}case"MultiPoint":switch(u){case"Point":return Kl(r,n);case"MultiPoint":return Vl(r,n);default:throw new Error("feature2 "+u+" geometry not supported")}case"LineString":switch(u){case"Point":return We(n,r,{ignoreEndVertices:!0});case"LineString":return ec(r,n);case"MultiPoint":return jl(r,n);default:throw new Error("feature2 "+u+" geometry not supported")}case"Polygon":switch(u){case"Point":return Dr(n,r,{ignoreBoundary:!0});case"LineString":return tc(r,n);case"Polygon":return nc(r,n);case"MultiPoint":return rc(r,n);default:throw new Error("feature2 "+u+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}}function Kl(t,e){var r,n=!1;for(r=0;r<t.coordinates.length;r++)if(Mo(t.coordinates[r],e.coordinates)){n=!0;break}return n}function Vl(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){for(var o=n[r],u=!1,l=0,v=t.coordinates;l<v.length;l++){var h=v[l];if(Mo(o,h)){u=!0;break}}if(!u)return!1}return!0}function jl(t,e){for(var r=!1,n=0,o=e.coordinates;n<o.length;n++){var u=o[n];if(We(u,t,{ignoreEndVertices:!0})&&(r=!0),!We(u,t))return!1}return!!r}function rc(t,e){for(var r=0,n=e.coordinates;r<n.length;r++){var o=n[r];if(!Dr(o,t,{ignoreBoundary:!0}))return!1}return!0}function ec(t,e){for(var r=!1,n=0,o=e.coordinates;n<o.length;n++){var u=o[n];if(We({type:"Point",coordinates:u},t,{ignoreEndVertices:!0})&&(r=!0),!We({type:"Point",coordinates:u},t,{ignoreEndVertices:!1}))return!1}return r}function tc(t,e){var r=!1,n=0,o=re(t),u=re(e);if(!Qu(o,u))return!1;for(n;n<e.coordinates.length-1;n++){var l=ac(e.coordinates[n],e.coordinates[n+1]);if(Dr({type:"Point",coordinates:l},t,{ignoreBoundary:!0})){r=!0;break}}return r}function nc(t,e){if(t.type==="Feature"&&t.geometry===null||e.type==="Feature"&&e.geometry===null)return!1;var r=re(t),n=re(e);if(!Qu(r,n))return!1;for(var o=Ee(e).coordinates,u=0,l=o;u<l.length;u++)for(var v=l[u],h=0,p=v;h<p.length;h++){var k=p[h];if(!Dr(k,t))return!1}return!0}function Qu(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Mo(t,e){return t[0]===e[0]&&t[1]===e[1]}function ac(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ic(t,e){var r=!1;return ze(t,function(n){ze(e,function(o){if(r===!0)return!0;r=!zl(n.geometry,o.geometry)})}),r}function Po(t,e){if(!t)throw new Error("geojson is required");if(t.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(e==null)throw new Error("filter is required");var r=[];return Lt(t,function(n){Zu(n.properties,e)&&r.push(n)}),xe(r)}function Zu(t,e){if(t===void 0)return!1;var r=typeof e;if(r==="number"||r==="string")return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!Zu(t,e[n]))return!1;return!0}else return oc(t,e)}function oc(t,e){for(var r=Object.keys(e),n=0;n<r.length;n++){var o=r[n];if(t[o]!==e[o])return!1}return!0}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function uc(t,e){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},n,o,u,l;return l={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function v(p){return function(k){return h([p,k])}}function h(p){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(u=p[0]&2?o.return:p[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,p[1])).done)return u;switch(o=0,u&&(p=[p[0]&2,u.value]),p[0]){case 0:case 1:u=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,o=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!u||p[1]>u[0]&&p[1]<u[3])){r.label=p[1];break}if(p[0]===6&&r.label<u[1]){r.label=u[1],u=p;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(p);break}u[2]&&r.ops.pop(),r.trys.pop();continue}p=e.call(t,r)}catch(k){p=[6,k],o=0}finally{n=u=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var vt=function(){function t(e,r){this.next=null,this.key=e,this.data=r,this.left=null,this.right=null}return t}();function fc(t,e){return t>e?1:t<e?-1:0}function lt(t,e,r){for(var n=new vt(null,null),o=n,u=n;;){var l=r(t,e.key);if(l<0){if(e.left===null)break;if(r(t,e.left.key)<0){var v=e.left;if(e.left=v.right,v.right=e,e=v,e.left===null)break}u.left=e,u=e,e=e.left}else if(l>0){if(e.right===null)break;if(r(t,e.right.key)>0){var v=e.right;if(e.right=v.left,v.left=e,e=v,e.right===null)break}o.right=e,o=e,e=e.right}else break}return o.right=e.left,u.left=e.right,e.left=n.right,e.right=n.left,e}function no(t,e,r,n){var o=new vt(t,e);if(r===null)return o.left=o.right=null,o;r=lt(t,r,n);var u=n(t,r.key);return u<0?(o.left=r.left,o.right=r,r.left=null):u>=0&&(o.right=r.right,o.left=r,r.right=null),o}function gu(t,e,r){var n=null,o=null;if(e){e=lt(t,e,r);var u=r(e.key,t);u===0?(n=e.left,o=e.right):u<0?(o=e.right,e.right=null,n=e):(n=e.left,e.left=null,o=e)}return{left:n,right:o}}function sc(t,e,r){return e===null?t:(t===null||(e=lt(t.key,e,r),e.left=t),e)}function uo(t,e,r,n,o){if(t){n(""+e+(r?"└── ":"├── ")+o(t)+`
`);var u=e+(r?"    ":"│   ");t.left&&uo(t.left,u,!1,n,o),t.right&&uo(t.right,u,!0,n,o)}}var So=function(){function t(e){e===void 0&&(e=fc),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,r){return this._size++,this._root=no(e,r,this._root,this._comparator)},t.prototype.add=function(e,r){var n=new vt(e,r);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var o=this._comparator,u=lt(e,this._root,o),l=o(e,u.key);return l===0?this._root=u:(l<0?(n.left=u.left,n.right=u,u.left=null):l>0&&(n.right=u.right,n.left=u,u.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,r,n){var o;if(r===null)return null;r=lt(e,r,n);var u=n(e,r.key);return u===0?(r.left===null?o=r.right:(o=lt(e,r.left,n),o.right=r.right),this._size--,o):r},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=lt(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var r=this._root,n=this._comparator;r;){var o=n(e,r.key);if(o===0)return r;o<0?r=r.left:r=r.right}return null},t.prototype.find=function(e){return this._root&&(this._root=lt(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},t.prototype.contains=function(e){for(var r=this._root,n=this._comparator;r;){var o=n(e,r.key);if(o===0)return!0;o<0?r=r.left:r=r.right}return!1},t.prototype.forEach=function(e,r){for(var n=this._root,o=[],u=!1;!u;)n!==null?(o.push(n),n=n.left):o.length!==0?(n=o.pop(),e.call(r,n),n=n.right):u=!0;return this},t.prototype.range=function(e,r,n,o){for(var u=[],l=this._comparator,v=this._root,h;u.length!==0||v;)if(v)u.push(v),v=v.left;else{if(v=u.pop(),h=l(v.key,r),h>0)break;if(l(v.key,e)>=0&&n.call(o,v))return this;v=v.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(r){var n=r.key;return e.push(n)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(r){var n=r.data;return e.push(n)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var r=this._root,n=!1,o=0,u=[];!n;)if(r)u.push(r),r=r.left;else if(u.length>0){if(r=u.pop(),o===e)return r;o++,r=r.right}else n=!0;return null},t.prototype.next=function(e){var r=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var o=this._comparator;r;){var u=o(e.key,r.key);if(u===0)break;u<0?(n=r,r=r.left):r=r.right}return n},t.prototype.prev=function(e){var r=this._root,n=null;if(e.left!==null){for(n=e.left;n.right;)n=n.right;return n}for(var o=this._comparator;r;){var u=o(e.key,r.key);if(u===0)break;u<0?r=r.left:(n=r,r=r.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return cc(this._root)},t.prototype.load=function(e,r,n){r===void 0&&(r=[]),n===void 0&&(n=!1);var o=e.length,u=this._comparator;if(n&&lo(e,r,0,o-1,u),this._root===null)this._root=fo(e,r,0,o),this._size=o;else{var l=hc(this.toList(),lc(e,r),u);o=this._size+o,this._root=so({head:l},0,o)}return this},t.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){e===void 0&&(e=function(n){return String(n.key)});var r=[];return uo(this._root,"",!0,function(n){return r.push(n)},e),r.join("")},t.prototype.update=function(e,r,n){var o=this._comparator,u=gu(e,this._root,o),l=u.left,v=u.right;o(e,r)<0?v=no(r,n,v,o):l=no(r,n,l,o),this._root=sc(l,v,o)},t.prototype.split=function(e){return gu(e,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var e,r,n;return uc(this,function(o){switch(o.label){case 0:e=this._root,r=[],n=!1,o.label=1;case 1:return n?[3,6]:e===null?[3,2]:(r.push(e),e=e.left,[3,5]);case 2:return r.length===0?[3,4]:(e=r.pop(),[4,e]);case 3:return o.sent(),e=e.right,[3,5];case 4:n=!0,o.label=5;case 5:return[3,1];case 6:return[2]}})},t}();function fo(t,e,r,n){var o=n-r;if(o>0){var u=r+Math.floor(o/2),l=t[u],v=e[u],h=new vt(l,v);return h.left=fo(t,e,r,u),h.right=fo(t,e,u+1,n),h}return null}function lc(t,e){for(var r=new vt(null,null),n=r,o=0;o<t.length;o++)n=n.next=new vt(t[o],e[o]);return n.next=null,r.next}function cc(t){for(var e=t,r=[],n=!1,o=new vt(null,null),u=o;!n;)e?(r.push(e),e=e.left):r.length>0?(e=u=u.next=r.pop(),e=e.right):n=!0;return u.next=null,o.next}function so(t,e,r){var n=r-e;if(n>0){var o=e+Math.floor(n/2),u=so(t,e,o),l=t.head;return l.left=u,t.head=t.head.next,l.right=so(t,o+1,r),l}return null}function hc(t,e,r){for(var n=new vt(null,null),o=n,u=t,l=e;u!==null&&l!==null;)r(u.key,l.key)<0?(o.next=u,u=u.next):(o.next=l,l=l.next),o=o.next;return u!==null?o.next=u:l!==null&&(o.next=l),n.next}function lo(t,e,r,n,o){if(!(r>=n)){for(var u=t[r+n>>1],l=r-1,v=n+1;;){do l++;while(o(t[l],u)<0);do v--;while(o(t[v],u)>0);if(l>=v)break;var h=t[l];t[l]=t[v],t[v]=h,h=e[l],e[l]=e[v],e[v]=h}lo(t,e,r,v,o),lo(t,e,v+1,n,o)}}function ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ee(t,e,r){return e&&pu(t.prototype,e),r&&pu(t,r),t}var Fn=function(e,r){return e.ll.x<=r.x&&r.x<=e.ur.x&&e.ll.y<=r.y&&r.y<=e.ur.y},co=function(e,r){if(r.ur.x<e.ll.x||e.ur.x<r.ll.x||r.ur.y<e.ll.y||e.ur.y<r.ll.y)return null;var n=e.ll.x<r.ll.x?r.ll.x:e.ll.x,o=e.ur.x<r.ur.x?e.ur.x:r.ur.x,u=e.ll.y<r.ll.y?r.ll.y:e.ll.y,l=e.ur.y<r.ur.y?e.ur.y:r.ur.y;return{ll:{x:n,y:u},ur:{x:o,y:l}}},ht=Number.EPSILON;ht===void 0&&(ht=Math.pow(2,-52));var vc=ht*ht,ho=function(e,r){if(-ht<e&&e<ht&&-ht<r&&r<ht)return 0;var n=e-r;return n*n<vc*e*r?0:e<r?-1:1},gc=function(){function t(){ve(this,t),this.reset()}return ee(t,[{key:"reset",value:function(){this.xRounder=new du,this.yRounder=new du}},{key:"round",value:function(r,n){return{x:this.xRounder.round(r),y:this.yRounder.round(n)}}}]),t}(),du=function(){function t(){ve(this,t),this.tree=new So,this.round(0)}return ee(t,[{key:"round",value:function(r){var n=this.tree.add(r),o=this.tree.prev(n);if(o!==null&&ho(n.key,o.key)===0)return this.tree.remove(r),o.key;var u=this.tree.next(n);return u!==null&&ho(n.key,u.key)===0?(this.tree.remove(r),u.key):r}}]),t}(),Xn=new gc,Bn=function(e,r){return e.x*r.y-e.y*r.x},Ku=function(e,r){return e.x*r.x+e.y*r.y},yu=function(e,r,n){var o={x:r.x-e.x,y:r.y-e.y},u={x:n.x-e.x,y:n.y-e.y},l=Bn(o,u);return ho(l,0)},Ia=function(e){return Math.sqrt(Ku(e,e))},pc=function(e,r,n){var o={x:r.x-e.x,y:r.y-e.y},u={x:n.x-e.x,y:n.y-e.y};return Bn(u,o)/Ia(u)/Ia(o)},dc=function(e,r,n){var o={x:r.x-e.x,y:r.y-e.y},u={x:n.x-e.x,y:n.y-e.y};return Ku(u,o)/Ia(u)/Ia(o)},bu=function(e,r,n){return r.y===0?null:{x:e.x+r.x/r.y*(n-e.y),y:n}},mu=function(e,r,n){return r.x===0?null:{x:n,y:e.y+r.y/r.x*(n-e.x)}},yc=function(e,r,n,o){if(r.x===0)return mu(n,o,e.x);if(o.x===0)return mu(e,r,n.x);if(r.y===0)return bu(n,o,e.y);if(o.y===0)return bu(e,r,n.y);var u=Bn(r,o);if(u==0)return null;var l={x:n.x-e.x,y:n.y-e.y},v=Bn(l,r)/u,h=Bn(l,o)/u,p=e.x+h*r.x,k=n.x+v*o.x,L=e.y+h*r.y,C=n.y+v*o.y,X=(p+k)/2,Y=(L+C)/2;return{x:X,y:Y}},Le=function(){ee(t,null,[{key:"compare",value:function(r,n){var o=t.comparePoints(r.point,n.point);return o!==0?o:(r.point!==n.point&&r.link(n),r.isLeft!==n.isLeft?r.isLeft?1:-1:Ra.compare(r.segment,n.segment))}},{key:"comparePoints",value:function(r,n){return r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0}}]);function t(e,r){ve(this,t),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=r}return ee(t,[{key:"link",value:function(r){if(r.point===this.point)throw new Error("Tried to link already linked events");for(var n=r.point.events,o=0,u=n.length;o<u;o++){var l=n[o];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var r=this.point.events.length,n=0;n<r;n++){var o=this.point.events[n];if(o.segment.consumedBy===void 0)for(var u=n+1;u<r;u++){var l=this.point.events[u];l.consumedBy===void 0&&o.otherSE.point.events===l.otherSE.point.events&&o.segment.consume(l.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var r=[],n=0,o=this.point.events.length;n<o;n++){var u=this.point.events[n];u!==this&&!u.segment.ringOut&&u.segment.isInResult()&&r.push(u)}return r}},{key:"getLeftmostComparator",value:function(r){var n=this,o=new Map,u=function(v){var h=v.otherSE;o.set(v,{sine:pc(n.point,r.point,h.point),cosine:dc(n.point,r.point,h.point)})};return function(l,v){o.has(l)||u(l),o.has(v)||u(v);var h=o.get(l),p=h.sine,k=h.cosine,L=o.get(v),C=L.sine,X=L.cosine;return p>=0&&C>=0?k<X?1:k>X?-1:0:p<0&&C<0?k<X?-1:k>X?1:0:C<p?-1:C>p?1:0}}}]),t}(),bc=0,Ra=function(){ee(t,null,[{key:"compare",value:function(r,n){var o=r.leftSE.point.x,u=n.leftSE.point.x,l=r.rightSE.point.x,v=n.rightSE.point.x;if(v<o)return 1;if(l<u)return-1;var h=r.leftSE.point.y,p=n.leftSE.point.y,k=r.rightSE.point.y,L=n.rightSE.point.y;if(o<u){if(p<h&&p<k)return 1;if(p>h&&p>k)return-1;var C=r.comparePoint(n.leftSE.point);if(C<0)return 1;if(C>0)return-1;var X=n.comparePoint(r.rightSE.point);return X!==0?X:-1}if(o>u){if(h<p&&h<L)return-1;if(h>p&&h>L)return 1;var Y=n.comparePoint(r.leftSE.point);if(Y!==0)return Y;var d=r.comparePoint(n.rightSE.point);return d<0?1:d>0?-1:1}if(h<p)return-1;if(h>p)return 1;if(l<v){var F=n.comparePoint(r.rightSE.point);if(F!==0)return F}if(l>v){var D=r.comparePoint(n.rightSE.point);if(D<0)return 1;if(D>0)return-1}if(l!==v){var w=k-h,b=l-o,$=L-p,P=v-u;if(w>b&&$<P)return 1;if(w<b&&$>P)return-1}return l>v?1:l<v||k<L?-1:k>L?1:r.id<n.id?-1:r.id>n.id?1:0}}]);function t(e,r,n,o){ve(this,t),this.id=++bc,this.leftSE=e,e.segment=this,e.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=e,this.rings=n,this.windings=o}return ee(t,[{key:"replaceRightSE",value:function(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var r=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r<n?r:n},ur:{x:this.rightSE.point.x,y:r>n?r:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(r){return r.x===this.leftSE.point.x&&r.y===this.leftSE.point.y||r.x===this.rightSE.point.x&&r.y===this.rightSE.point.y}},{key:"comparePoint",value:function(r){if(this.isAnEndpoint(r))return 0;var n=this.leftSE.point,o=this.rightSE.point,u=this.vector();if(n.x===o.x)return r.x===n.x?0:r.x<n.x?1:-1;var l=(r.y-n.y)/u.y,v=n.x+l*u.x;if(r.x===v)return 0;var h=(r.x-n.x)/u.x,p=n.y+h*u.y;return r.y===p?0:r.y<p?-1:1}},{key:"getIntersection",value:function(r){var n=this.bbox(),o=r.bbox(),u=co(n,o);if(u===null)return null;var l=this.leftSE.point,v=this.rightSE.point,h=r.leftSE.point,p=r.rightSE.point,k=Fn(n,h)&&this.comparePoint(h)===0,L=Fn(o,l)&&r.comparePoint(l)===0,C=Fn(n,p)&&this.comparePoint(p)===0,X=Fn(o,v)&&r.comparePoint(v)===0;if(L&&k)return X&&!C?v:!X&&C?p:null;if(L)return C&&l.x===p.x&&l.y===p.y?null:l;if(k)return X&&v.x===h.x&&v.y===h.y?null:h;if(X&&C)return null;if(X)return v;if(C)return p;var Y=yc(l,this.vector(),h,r.vector());return Y===null||!Fn(u,Y)?null:Xn.round(Y.x,Y.y)}},{key:"split",value:function(r){var n=[],o=r.events!==void 0,u=new Le(r,!0),l=new Le(r,!1),v=this.rightSE;this.replaceRightSE(l),n.push(l),n.push(u);var h=new t(u,v,this.rings.slice(),this.windings.slice());return Le.comparePoints(h.leftSE.point,h.rightSE.point)>0&&h.swapEvents(),Le.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(u.checkForConsuming(),l.checkForConsuming()),n}},{key:"swapEvents",value:function(){var r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,o=this.windings.length;n<o;n++)this.windings[n]*=-1}},{key:"consume",value:function(r){for(var n=this,o=r;n.consumedBy;)n=n.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var u=t.compare(n,o);if(u!==0){if(u>0){var l=n;n=o,o=l}if(n.prev===o){var v=n;n=o,o=v}for(var h=0,p=o.rings.length;h<p;h++){var k=o.rings[h],L=o.windings[h],C=n.rings.indexOf(k);C===-1?(n.rings.push(k),n.windings.push(L)):n.windings[C]+=L}o.rings=null,o.windings=null,o.consumedBy=n,o.leftSE.consumedBy=n.leftSE,o.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,o=this._afterState.windings,u=this._afterState.multiPolys,l=0,v=this.rings.length;l<v;l++){var h=this.rings[l],p=this.windings[l],k=n.indexOf(h);k===-1?(n.push(h),o.push(p)):o[k]+=p}for(var L=[],C=[],X=0,Y=n.length;X<Y;X++)if(o[X]!==0){var d=n[X],F=d.poly;if(C.indexOf(F)===-1)if(d.isExterior)L.push(F);else{C.indexOf(F)===-1&&C.push(F);var D=L.indexOf(d.poly);D!==-1&&L.splice(D,1)}}for(var w=0,b=L.length;w<b;w++){var $=L[w].multiPoly;u.indexOf($)===-1&&u.push($)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var r=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(_e.type){case"union":{var o=r.length===0,u=n.length===0;this._isInResult=o!==u;break}case"intersection":{var l,v;r.length<n.length?(l=r.length,v=n.length):(l=n.length,v=r.length),this._isInResult=v===_e.numMultiPolys&&l<v;break}case"xor":{var h=Math.abs(r.length-n.length);this._isInResult=h%2===1;break}case"difference":{var p=function(L){return L.length===1&&L[0].isSubject};this._isInResult=p(r)!==p(n);break}default:throw new Error("Unrecognized operation type found ".concat(_e.type))}return this._isInResult}}],[{key:"fromRing",value:function(r,n,o){var u,l,v,h=Le.comparePoints(r,n);if(h<0)u=r,l=n,v=1;else if(h>0)u=n,l=r,v=-1;else throw new Error("Tried to create degenerate segment at [".concat(r.x,", ").concat(r.y,"]"));var p=new Le(u,!0),k=new Le(l,!1);return new t(p,k,[o],[v])}}]),t}(),wu=function(){function t(e,r,n){if(ve(this,t),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=Xn.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var u=o,l=1,v=e.length;l<v;l++){if(typeof e[l][0]!="number"||typeof e[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var h=Xn.round(e[l][0],e[l][1]);h.x===u.x&&h.y===u.y||(this.segments.push(Ra.fromRing(u,h,this)),h.x<this.bbox.ll.x&&(this.bbox.ll.x=h.x),h.y<this.bbox.ll.y&&(this.bbox.ll.y=h.y),h.x>this.bbox.ur.x&&(this.bbox.ur.x=h.x),h.y>this.bbox.ur.y&&(this.bbox.ur.y=h.y),u=h)}(o.x!==u.x||o.y!==u.y)&&this.segments.push(Ra.fromRing(u,o,this))}return ee(t,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,o=this.segments.length;n<o;n++){var u=this.segments[n];r.push(u.leftSE),r.push(u.rightSE)}return r}}]),t}(),mc=function(){function t(e,r){if(ve(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new wu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,o=e.length;n<o;n++){var u=new wu(e[n],this,!1);u.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=u.bbox.ll.x),u.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=u.bbox.ll.y),u.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=u.bbox.ur.x),u.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=u.bbox.ur.y),this.interiorRings.push(u)}this.multiPoly=r}return ee(t,[{key:"getSweepEvents",value:function(){for(var r=this.exteriorRing.getSweepEvents(),n=0,o=this.interiorRings.length;n<o;n++)for(var u=this.interiorRings[n].getSweepEvents(),l=0,v=u.length;l<v;l++)r.push(u[l]);return r}}]),t}(),_u=function(){function t(e,r){if(ve(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,o=e.length;n<o;n++){var u=new mc(e[n],this);u.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=u.bbox.ll.x),u.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=u.bbox.ll.y),u.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=u.bbox.ur.x),u.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=u.bbox.ur.y),this.polys.push(u)}this.isSubject=r}return ee(t,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,o=this.polys.length;n<o;n++)for(var u=this.polys[n].getSweepEvents(),l=0,v=u.length;l<v;l++)r.push(u[l]);return r}}]),t}(),wc=function(){ee(t,null,[{key:"factory",value:function(r){for(var n=[],o=0,u=r.length;o<u;o++){var l=r[o];if(!(!l.isInResult()||l.ringOut)){for(var v=null,h=l.leftSE,p=l.rightSE,k=[h],L=h.point,C=[];v=h,h=p,k.push(h),h.point!==L;)for(;;){var X=h.getAvailableLinkedEvents();if(X.length===0){var Y=k[0].point,d=k[k.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Y.x,",")+" ".concat(Y.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(X.length===1){p=X[0].otherSE;break}for(var F=null,D=0,w=C.length;D<w;D++)if(C[D].point===h.point){F=D;break}if(F!==null){var b=C.splice(F)[0],$=k.splice(b.index);$.unshift($[0].otherSE),n.push(new t($.reverse()));continue}C.push({index:k.length,point:h.point});var P=h.getLeftmostComparator(v);p=X.sort(P)[0].otherSE;break}n.push(new t(k))}}return n}}]);function t(e){ve(this,t),this.events=e;for(var r=0,n=e.length;r<n;r++)e[r].segment.ringOut=this;this.poly=null}return ee(t,[{key:"getGeom",value:function(){for(var r=this.events[0].point,n=[r],o=1,u=this.events.length-1;o<u;o++){var l=this.events[o].point,v=this.events[o+1].point;yu(l,r,v)!==0&&(n.push(l),r=l)}if(n.length===1)return null;var h=n[0],p=n[1];yu(h,r,p)===0&&n.shift(),n.push(n[0]);for(var k=this.isExteriorRing()?1:-1,L=this.isExteriorRing()?0:n.length-1,C=this.isExteriorRing()?n.length:-1,X=[],Y=L;Y!=C;Y+=k)X.push([n[Y].x,n[Y].y]);return X}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var r=this.events[0],n=1,o=this.events.length;n<o;n++){var u=this.events[n];Le.compare(r,u)>0&&(r=u)}for(var l=r.segment.prevInResult(),v=l?l.prevInResult():null;;){if(!l)return null;if(!v)return l.ringOut;if(v.ringOut!==l.ringOut)return v.ringOut.enclosingRing()!==l.ringOut?l.ringOut:l.ringOut.enclosingRing();l=v.prevInResult(),v=l?l.prevInResult():null}}}]),t}(),xu=function(){function t(e){ve(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return ee(t,[{key:"addInterior",value:function(r){this.interiorRings.push(r),r.poly=this}},{key:"getGeom",value:function(){var r=[this.exteriorRing.getGeom()];if(r[0]===null)return null;for(var n=0,o=this.interiorRings.length;n<o;n++){var u=this.interiorRings[n].getGeom();u!==null&&r.push(u)}return r}}]),t}(),_c=function(){function t(e){ve(this,t),this.rings=e,this.polys=this._composePolys(e)}return ee(t,[{key:"getGeom",value:function(){for(var r=[],n=0,o=this.polys.length;n<o;n++){var u=this.polys[n].getGeom();u!==null&&r.push(u)}return r}},{key:"_composePolys",value:function(r){for(var n=[],o=0,u=r.length;o<u;o++){var l=r[o];if(!l.poly)if(l.isExteriorRing())n.push(new xu(l));else{var v=l.enclosingRing();v.poly||n.push(new xu(v)),v.poly.addInterior(l)}}return n}}]),t}(),xc=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ra.compare;ve(this,t),this.queue=e,this.tree=new So(r),this.segments=[]}return ee(t,[{key:"process",value:function(r){var n=r.segment,o=[];if(r.consumedBy)return r.isLeft?this.queue.remove(r.otherSE):this.tree.remove(n),o;var u=r.isLeft?this.tree.insert(n):this.tree.find(n);if(!u)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=u,v=u,h=void 0,p=void 0;h===void 0;)l=this.tree.prev(l),l===null?h=null:l.key.consumedBy===void 0&&(h=l.key);for(;p===void 0;)v=this.tree.next(v),v===null?p=null:v.key.consumedBy===void 0&&(p=v.key);if(r.isLeft){var k=null;if(h){var L=h.getIntersection(n);if(L!==null&&(n.isAnEndpoint(L)||(k=L),!h.isAnEndpoint(L)))for(var C=this._splitSafely(h,L),X=0,Y=C.length;X<Y;X++)o.push(C[X])}var d=null;if(p){var F=p.getIntersection(n);if(F!==null&&(n.isAnEndpoint(F)||(d=F),!p.isAnEndpoint(F)))for(var D=this._splitSafely(p,F),w=0,b=D.length;w<b;w++)o.push(D[w])}if(k!==null||d!==null){var $=null;if(k===null)$=d;else if(d===null)$=k;else{var P=Le.comparePoints(k,d);$=P<=0?k:d}this.queue.remove(n.rightSE),o.push(n.rightSE);for(var E=n.split($),I=0,M=E.length;I<M;I++)o.push(E[I])}o.length>0?(this.tree.remove(n),o.push(r)):(this.segments.push(n),n.prev=h)}else{if(h&&p){var N=h.getIntersection(p);if(N!==null){if(!h.isAnEndpoint(N))for(var z=this._splitSafely(h,N),H=0,V=z.length;H<V;H++)o.push(z[H]);if(!p.isAnEndpoint(N))for(var rr=this._splitSafely(p,N),j=0,Pr=rr.length;j<Pr;j++)o.push(rr[j])}}this.tree.remove(n)}return o}},{key:"_splitSafely",value:function(r,n){this.tree.remove(r);var o=r.rightSE;this.queue.remove(o);var u=r.split(n);return u.push(o),r.consumedBy===void 0&&this.tree.insert(r),u}}]),t}(),Eu=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ec=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,kc=function(){function t(){ve(this,t)}return ee(t,[{key:"run",value:function(r,n,o){_e.type=r,Xn.reset();for(var u=[new _u(n,!0)],l=0,v=o.length;l<v;l++)u.push(new _u(o[l],!1));if(_e.numMultiPolys=u.length,_e.type==="difference")for(var h=u[0],p=1;p<u.length;)co(u[p].bbox,h.bbox)!==null?p++:u.splice(p,1);if(_e.type==="intersection"){for(var k=0,L=u.length;k<L;k++)for(var C=u[k],X=k+1,Y=u.length;X<Y;X++)if(co(C.bbox,u[X].bbox)===null)return[]}for(var d=new So(Le.compare),F=0,D=u.length;F<D;F++)for(var w=u[F].getSweepEvents(),b=0,$=w.length;b<$;b++)if(d.insert(w[b]),d.size>Eu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var P=new xc(d),E=d.size,I=d.pop();I;){var M=I.key;if(d.size===E){var N=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(N.id," ")+"[".concat(N.leftSE.point.x,", ").concat(N.leftSE.point.y,"] -> ")+"[".concat(N.rightSE.point.x,", ").concat(N.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>Eu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(P.segments.length>Ec)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var z=P.process(M),H=0,V=z.length;H<V;H++){var rr=z[H];rr.consumedBy===void 0&&d.insert(rr)}E=d.size,I=d.pop()}Xn.reset();var j=wc.factory(P.segments),Pr=new _c(j);return Pr.getGeom()}}]),t}(),_e=new kc,Mc=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _e.run("union",e,n)},Pc=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _e.run("intersection",e,n)},Sc=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _e.run("xor",e,n)},$c=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return _e.run("difference",e,n)},Ac={union:Mc,intersection:Pc,xor:Sc,difference:$c};const Oc=Ac;function ku(t,e,r){r===void 0&&(r={});var n=Ee(t),o=Ee(e),u=Oc.intersection(n.coordinates,o.coordinates);return u.length===0?null:u.length===1?Ct(u[0],r.properties):mo(u,r.properties)}function Ic(t,e,r){r===void 0&&(r={});var n=JSON.stringify(r.properties||{}),o=t[0],u=t[1],l=t[2],v=t[3],h=(u+v)/2,p=(o+l)/2,k=e*2/Ce([o,h],[l,h],r),L=k*(l-o),C=e*2/Ce([p,u],[p,v],r),X=C*(v-u),Y=L/2,d=Y*2,F=Math.sqrt(3)/2*X,D=l-o,w=v-u,b=3/4*d,$=F,P=(D-d)/(d-Y/2),E=Math.floor(P),I=(E*b-Y/2-D)/2-Y/2+b/2,M=Math.floor((w-F)/F),N=(w-M*F)/2,z=M*F-w>F/2;z&&(N-=F/4);for(var H=[],V=[],rr=0;rr<6;rr++){var j=2*Math.PI/6*rr;H.push(Math.cos(j)),V.push(Math.sin(j))}for(var Pr=[],$r=0;$r<=E;$r++)for(var Ar=0;Ar<=M;Ar++){var Rr=$r%2===1;if(!(Ar===0&&Rr)&&!(Ar===0&&z)){var Gr=$r*b+o-I,Lr=Ar*$+u+N;if(Rr&&(Lr-=F/2),r.triangles===!0)Lc([Gr,Lr],L/2,X/2,JSON.parse(n),H,V).forEach(function(cr){r.mask?ku(r.mask,cr)&&Pr.push(cr):Pr.push(cr)});else{var Tr=Rc([Gr,Lr],L/2,X/2,JSON.parse(n),H,V);r.mask?ku(r.mask,Tr)&&Pr.push(Tr):Pr.push(Tr)}}}return xe(Pr)}function Rc(t,e,r,n,o,u){for(var l=[],v=0;v<6;v++){var h=t[0]+e*o[v],p=t[1]+r*u[v];l.push([h,p])}return l.push(l[0].slice()),Ct([l],n)}function Lc(t,e,r,n,o,u){for(var l=[],v=0;v<6;v++){var h=[];h.push(t),h.push([t[0]+e*o[v],t[1]+r*u[v]]),h.push([t[0]+e*o[(v+1)%6],t[1]+r*u[(v+1)%6]]),h.push(t),l.push(Ct([h],n))}return l}var Vu={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(t,e){(function(r,n){t.exports=n()})(Rt,function(){for(var r=function(a,f,s){return f===void 0&&(f=0),s===void 0&&(s=1),a<f?f:a>s?s:a},n=r,o=function(a){a._clipped=!1,a._unclipped=a.slice(0);for(var f=0;f<=3;f++)f<3?((a[f]<0||a[f]>255)&&(a._clipped=!0),a[f]=n(a[f],0,255)):f===3&&(a[f]=n(a[f],0,1));return a},u={},l=0,v=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];l<v.length;l+=1){var h=v[l];u["[object "+h+"]"]=h.toLowerCase()}var p=function(a){return u[Object.prototype.toString.call(a)]||"object"},k=p,L=function(a,f){return f===void 0&&(f=null),a.length>=3?Array.prototype.slice.call(a):k(a[0])=="object"&&f?f.split("").filter(function(s){return a[0][s]!==void 0}).map(function(s){return a[0][s]}):a[0]},C=p,X=function(a){if(a.length<2)return null;var f=a.length-1;return C(a[f])=="string"?a[f].toLowerCase():null},Y=Math.PI,d={clip_rgb:o,limit:r,type:p,unpack:L,last:X,PI:Y,TWOPI:Y*2,PITHIRD:Y/3,DEG2RAD:Y/180,RAD2DEG:180/Y},F={format:{},autodetect:[]},D=d.last,w=d.clip_rgb,b=d.type,$=F,P=function(){for(var f=[],s=arguments.length;s--;)f[s]=arguments[s];var g=this;if(b(f[0])==="object"&&f[0].constructor&&f[0].constructor===this.constructor)return f[0];var _=D(f),x=!1;if(!_){x=!0,$.sorted||($.autodetect=$.autodetect.sort(function(T,U){return U.p-T.p}),$.sorted=!0);for(var m=0,S=$.autodetect;m<S.length;m+=1){var A=S[m];if(_=A.test.apply(A,f),_)break}}if($.format[_]){var R=$.format[_].apply(null,x?f:f.slice(0,-1));g._rgb=w(R)}else throw new Error("unknown format: "+f);g._rgb.length===3&&g._rgb.push(1)};P.prototype.toString=function(){return b(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var E=P,I=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(I.Color,[null].concat(a)))};I.Color=E,I.version="2.4.2";var M=I,N=d.unpack,z=Math.max,H=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=N(a,"rgb"),g=s[0],_=s[1],x=s[2];g=g/255,_=_/255,x=x/255;var m=1-z(g,z(_,x)),S=m<1?1/(1-m):0,A=(1-g-m)*S,R=(1-_-m)*S,T=(1-x-m)*S;return[A,R,T,m]},V=H,rr=d.unpack,j=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=rr(a,"cmyk");var s=a[0],g=a[1],_=a[2],x=a[3],m=a.length>4?a[4]:1;return x===1?[0,0,0,m]:[s>=1?0:255*(1-s)*(1-x),g>=1?0:255*(1-g)*(1-x),_>=1?0:255*(1-_)*(1-x),m]},Pr=j,$r=M,Ar=E,Rr=F,Gr=d.unpack,Lr=d.type,Tr=V;Ar.prototype.cmyk=function(){return Tr(this._rgb)},$r.cmyk=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Ar,[null].concat(a,["cmyk"])))},Rr.format.cmyk=Pr,Rr.autodetect.push({p:2,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=Gr(a,"cmyk"),Lr(a)==="array"&&a.length===4)return"cmyk"}});var cr=d.unpack,Jr=d.last,ur=function(a){return Math.round(a*100)/100},xr=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=cr(a,"hsla"),g=Jr(a)||"lsa";return s[0]=ur(s[0]||0),s[1]=ur(s[1]*100)+"%",s[2]=ur(s[2]*100)+"%",g==="hsla"||s.length>3&&s[3]<1?(s[3]=s.length>3?s[3]:1,g="hsla"):s.length=3,g+"("+s.join(",")+")"},se=xr,ke=d.unpack,Br=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=ke(a,"rgba");var s=a[0],g=a[1],_=a[2];s/=255,g/=255,_/=255;var x=Math.min(s,g,_),m=Math.max(s,g,_),S=(m+x)/2,A,R;return m===x?(A=0,R=Number.NaN):A=S<.5?(m-x)/(m+x):(m-x)/(2-m-x),s==m?R=(g-_)/(m-x):g==m?R=2+(_-s)/(m-x):_==m&&(R=4+(s-g)/(m-x)),R*=60,R<0&&(R+=360),a.length>3&&a[3]!==void 0?[R,A,S,a[3]]:[R,A,S]},zr=Br,Or=d.unpack,ar=d.last,hr=se,He=zr,gt=Math.round,Qr=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Or(a,"rgba"),g=ar(a)||"rgb";return g.substr(0,3)=="hsl"?hr(He(s),g):(s[0]=gt(s[0]),s[1]=gt(s[1]),s[2]=gt(s[2]),(g==="rgba"||s.length>3&&s[3]<1)&&(s[3]=s.length>3?s[3]:1,g="rgba"),g+"("+s.slice(0,g==="rgb"?3:4).join(",")+")")},Ue=Qr,ne=d.unpack,Ne=Math.round,pt=function(){for(var a,f=[],s=arguments.length;s--;)f[s]=arguments[s];f=ne(f,"hsl");var g=f[0],_=f[1],x=f[2],m,S,A;if(_===0)m=S=A=x*255;else{var R=[0,0,0],T=[0,0,0],U=x<.5?x*(1+_):x+_-x*_,G=2*x-U,K=g/360;R[0]=K+1/3,R[1]=K,R[2]=K-1/3;for(var Z=0;Z<3;Z++)R[Z]<0&&(R[Z]+=1),R[Z]>1&&(R[Z]-=1),6*R[Z]<1?T[Z]=G+(U-G)*6*R[Z]:2*R[Z]<1?T[Z]=U:3*R[Z]<2?T[Z]=G+(U-G)*(2/3-R[Z])*6:T[Z]=G;a=[Ne(T[0]*255),Ne(T[1]*255),Ne(T[2]*255)],m=a[0],S=a[1],A=a[2]}return f.length>3?[m,S,A,f[3]]:[m,S,A,1]},Er=pt,jr=Er,le=F,Te=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Me=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Fe=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ge=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,qr=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Pe=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Je=Math.round,Qe=function(a){a=a.toLowerCase().trim();var f;if(le.format.named)try{return le.format.named(a)}catch{}if(f=a.match(Te)){for(var s=f.slice(1,4),g=0;g<3;g++)s[g]=+s[g];return s[3]=1,s}if(f=a.match(Me)){for(var _=f.slice(1,5),x=0;x<4;x++)_[x]=+_[x];return _}if(f=a.match(Fe)){for(var m=f.slice(1,4),S=0;S<3;S++)m[S]=Je(m[S]*2.55);return m[3]=1,m}if(f=a.match(ge)){for(var A=f.slice(1,5),R=0;R<3;R++)A[R]=Je(A[R]*2.55);return A[3]=+A[3],A}if(f=a.match(qr)){var T=f.slice(1,4);T[1]*=.01,T[2]*=.01;var U=jr(T);return U[3]=1,U}if(f=a.match(Pe)){var G=f.slice(1,4);G[1]*=.01,G[2]*=.01;var K=jr(G);return K[3]=+f[4],K}};Qe.test=function(a){return Te.test(a)||Me.test(a)||Fe.test(a)||ge.test(a)||qr.test(a)||Pe.test(a)};var Ze=Qe,dt=M,pe=E,Se=F,yt=d.type,Ke=Ue,Tt=Ze;pe.prototype.css=function(a){return Ke(this._rgb,a)},dt.css=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(pe,[null].concat(a,["css"])))},Se.format.css=Tt,Se.autodetect.push({p:5,test:function(a){for(var f=[],s=arguments.length-1;s-- >0;)f[s]=arguments[s+1];if(!f.length&&yt(a)==="string"&&Tt.test(a))return"css"}});var Dn=E,Ft=M,ln=F,zn=d.unpack;ln.format.gl=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=zn(a,"rgba");return s[0]*=255,s[1]*=255,s[2]*=255,s},Ft.gl=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Dn,[null].concat(a,["gl"])))},Dn.prototype.gl=function(){var a=this._rgb;return[a[0]/255,a[1]/255,a[2]/255,a[3]]};var Gt=d.unpack,Zr=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Gt(a,"rgb"),g=s[0],_=s[1],x=s[2],m=Math.min(g,_,x),S=Math.max(g,_,x),A=S-m,R=A*100/255,T=m/(255-A)*100,U;return A===0?U=Number.NaN:(g===S&&(U=(_-x)/A),_===S&&(U=2+(x-g)/A),x===S&&(U=4+(g-_)/A),U*=60,U<0&&(U+=360)),[U,R,T]},Ba=Zr,Ge=d.unpack,qa=Math.floor,Wn=function(){for(var a,f,s,g,_,x,m=[],S=arguments.length;S--;)m[S]=arguments[S];m=Ge(m,"hcg");var A=m[0],R=m[1],T=m[2],U,G,K;T=T*255;var Z=R*255;if(R===0)U=G=K=T;else{A===360&&(A=0),A>360&&(A-=360),A<0&&(A+=360),A/=60;var ir=qa(A),lr=A-ir,gr=T*(1-R),br=gr+Z*(1-lr),Hr=gr+Z*lr,Yr=gr+Z;switch(ir){case 0:a=[Yr,Hr,gr],U=a[0],G=a[1],K=a[2];break;case 1:f=[br,Yr,gr],U=f[0],G=f[1],K=f[2];break;case 2:s=[gr,Yr,Hr],U=s[0],G=s[1],K=s[2];break;case 3:g=[gr,br,Yr],U=g[0],G=g[1],K=g[2];break;case 4:_=[Hr,gr,Yr],U=_[0],G=_[1],K=_[2];break;case 5:x=[Yr,gr,br],U=x[0],G=x[1],K=x[2];break}}return[U,G,K,m.length>3?m[3]:1]},Hn=Wn,Bt=d.unpack,Un=d.type,Xa=M,cn=E,Jn=F,Qn=Ba;cn.prototype.hcg=function(){return Qn(this._rgb)},Xa.hcg=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(cn,[null].concat(a,["hcg"])))},Jn.format.hcg=Hn,Jn.autodetect.push({p:1,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=Bt(a,"hcg"),Un(a)==="array"&&a.length===3)return"hcg"}});var Ya=d.unpack,Zn=d.last,bt=Math.round,hn=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Ya(a,"rgba"),g=s[0],_=s[1],x=s[2],m=s[3],S=Zn(a)||"auto";m===void 0&&(m=1),S==="auto"&&(S=m<1?"rgba":"rgb"),g=bt(g),_=bt(_),x=bt(x);var A=g<<16|_<<8|x,R="000000"+A.toString(16);R=R.substr(R.length-6);var T="0"+bt(m*255).toString(16);switch(T=T.substr(T.length-2),S.toLowerCase()){case"rgba":return"#"+R+T;case"argb":return"#"+T+R;default:return"#"+R}},Ve=hn,vn=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,gn=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,pn=function(a){if(a.match(vn)){(a.length===4||a.length===7)&&(a=a.substr(1)),a.length===3&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var f=parseInt(a,16),s=f>>16,g=f>>8&255,_=f&255;return[s,g,_,1]}if(a.match(gn)){(a.length===5||a.length===9)&&(a=a.substr(1)),a.length===4&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]);var x=parseInt(a,16),m=x>>24&255,S=x>>16&255,A=x>>8&255,R=Math.round((x&255)/255*100)/100;return[m,S,A,R]}throw new Error("unknown hex color: "+a)},je=pn,Da=M,Kn=E,za=d.type,Vn=F,Wa=Ve;Kn.prototype.hex=function(a){return Wa(this._rgb,a)},Da.hex=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Kn,[null].concat(a,["hex"])))},Vn.format.hex=je,Vn.autodetect.push({p:4,test:function(a){for(var f=[],s=arguments.length-1;s-- >0;)f[s]=arguments[s+1];if(!f.length&&za(a)==="string"&&[3,4,5,6,7,8,9].indexOf(a.length)>=0)return"hex"}});var Ha=d.unpack,mt=d.TWOPI,wt=Math.min,jn=Math.sqrt,fr=Math.acos,Be=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Ha(a,"rgb"),g=s[0],_=s[1],x=s[2];g/=255,_/=255,x/=255;var m,S=wt(g,_,x),A=(g+_+x)/3,R=A>0?1-S/A:0;return R===0?m=NaN:(m=(g-_+(g-x))/2,m/=jn((g-_)*(g-_)+(g-x)*(_-x)),m=fr(m),x>_&&(m=mt-m),m/=mt),[m*360,R,A]},Ua=Be,Ja=d.unpack,dn=d.limit,rt=d.TWOPI,yn=d.PITHIRD,Kr=Math.cos,Qa=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=Ja(a,"hsi");var s=a[0],g=a[1],_=a[2],x,m,S;return isNaN(s)&&(s=0),isNaN(g)&&(g=0),s>360&&(s-=360),s<0&&(s+=360),s/=360,s<1/3?(S=(1-g)/3,x=(1+g*Kr(rt*s)/Kr(yn-rt*s))/3,m=1-(S+x)):s<2/3?(s-=1/3,x=(1-g)/3,m=(1+g*Kr(rt*s)/Kr(yn-rt*s))/3,S=1-(x+m)):(s-=2/3,m=(1-g)/3,S=(1+g*Kr(rt*s)/Kr(yn-rt*s))/3,x=1-(m+S)),x=dn(_*x*3),m=dn(_*m*3),S=dn(_*S*3),[x*255,m*255,S*255,a.length>3?a[3]:1]},Za=Qa,Ka=d.unpack,Va=d.type,ja=M,ce=E,ra=F,ri=Ua;ce.prototype.hsi=function(){return ri(this._rgb)},ja.hsi=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(ce,[null].concat(a,["hsi"])))},ra.format.hsi=Za,ra.autodetect.push({p:2,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=Ka(a,"hsi"),Va(a)==="array"&&a.length===3)return"hsi"}});var ei=d.unpack,ti=d.type,ni=M,_t=E,ea=F,ai=zr;_t.prototype.hsl=function(){return ai(this._rgb)},ni.hsl=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(_t,[null].concat(a,["hsl"])))},ea.format.hsl=Er,ea.autodetect.push({p:2,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=ei(a,"hsl"),ti(a)==="array"&&a.length===3)return"hsl"}});var ae=d.unpack,ii=Math.min,oi=Math.max,ui=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=ae(a,"rgb");var s=a[0],g=a[1],_=a[2],x=ii(s,g,_),m=oi(s,g,_),S=m-x,A,R,T;return T=m/255,m===0?(A=Number.NaN,R=0):(R=S/m,s===m&&(A=(g-_)/S),g===m&&(A=2+(_-s)/S),_===m&&(A=4+(s-g)/S),A*=60,A<0&&(A+=360)),[A,R,T]},fi=ui,si=d.unpack,ta=Math.floor,bn=function(){for(var a,f,s,g,_,x,m=[],S=arguments.length;S--;)m[S]=arguments[S];m=si(m,"hsv");var A=m[0],R=m[1],T=m[2],U,G,K;if(T*=255,R===0)U=G=K=T;else{A===360&&(A=0),A>360&&(A-=360),A<0&&(A+=360),A/=60;var Z=ta(A),ir=A-Z,lr=T*(1-R),gr=T*(1-R*ir),br=T*(1-R*(1-ir));switch(Z){case 0:a=[T,br,lr],U=a[0],G=a[1],K=a[2];break;case 1:f=[gr,T,lr],U=f[0],G=f[1],K=f[2];break;case 2:s=[lr,T,br],U=s[0],G=s[1],K=s[2];break;case 3:g=[lr,gr,T],U=g[0],G=g[1],K=g[2];break;case 4:_=[br,lr,T],U=_[0],G=_[1],K=_[2];break;case 5:x=[T,lr,gr],U=x[0],G=x[1],K=x[2];break}}return[U,G,K,m.length>3?m[3]:1]},na=bn,qt=d.unpack,li=d.type,et=M,aa=E,ia=F,ci=fi;aa.prototype.hsv=function(){return ci(this._rgb)},et.hsv=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(aa,[null].concat(a,["hsv"])))},ia.format.hsv=na,ia.autodetect.push({p:2,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=qt(a,"hsv"),li(a)==="array"&&a.length===3)return"hsv"}});var Xt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},qe=Xt,hi=d.unpack,oa=Math.pow,vi=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=hi(a,"rgb"),g=s[0],_=s[1],x=s[2],m=gi(g,_,x),S=m[0],A=m[1],R=m[2],T=116*A-16;return[T<0?0:T,500*(S-A),200*(A-R)]},xt=function(a){return(a/=255)<=.04045?a/12.92:oa((a+.055)/1.055,2.4)},mn=function(a){return a>qe.t3?oa(a,1/3):a/qe.t2+qe.t0},gi=function(a,f,s){a=xt(a),f=xt(f),s=xt(s);var g=mn((.4124564*a+.3575761*f+.1804375*s)/qe.Xn),_=mn((.2126729*a+.7151522*f+.072175*s)/qe.Yn),x=mn((.0193339*a+.119192*f+.9503041*s)/qe.Zn);return[g,_,x]},ua=vi,tt=Xt,fa=d.unpack,pi=Math.pow,sa=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=fa(a,"lab");var s=a[0],g=a[1],_=a[2],x,m,S,A,R,T;return m=(s+16)/116,x=isNaN(g)?m:m+g/500,S=isNaN(_)?m:m-_/200,m=tt.Yn*_n(m),x=tt.Xn*_n(x),S=tt.Zn*_n(S),A=wn(3.2404542*x-1.5371385*m-.4985314*S),R=wn(-.969266*x+1.8760108*m+.041556*S),T=wn(.0556434*x-.2040259*m+1.0572252*S),[A,R,T,a.length>3?a[3]:1]},wn=function(a){return 255*(a<=.00304?12.92*a:1.055*pi(a,1/2.4)-.055)},_n=function(a){return a>tt.t1?a*a*a:tt.t2*(a-tt.t0)},xn=sa,di=d.unpack,yi=d.type,bi=M,la=E,En=F,mi=ua;la.prototype.lab=function(){return mi(this._rgb)},bi.lab=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(la,[null].concat(a,["lab"])))},En.format.lab=xn,En.autodetect.push({p:2,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=di(a,"lab"),yi(a)==="array"&&a.length===3)return"lab"}});var kn=d.unpack,wi=d.RAD2DEG,_i=Math.sqrt,xi=Math.atan2,Ei=Math.round,ki=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=kn(a,"lab"),g=s[0],_=s[1],x=s[2],m=_i(_*_+x*x),S=(xi(x,_)*wi+360)%360;return Ei(m*1e4)===0&&(S=Number.NaN),[g,m,S]},ca=ki,ha=d.unpack,Mn=ua,Mi=ca,Pi=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=ha(a,"rgb"),g=s[0],_=s[1],x=s[2],m=Mn(g,_,x),S=m[0],A=m[1],R=m[2];return Mi(S,A,R)},Si=Pi,$i=d.unpack,va=d.DEG2RAD,Ai=Math.sin,Oi=Math.cos,Ii=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=$i(a,"lch"),g=s[0],_=s[1],x=s[2];return isNaN(x)&&(x=0),x=x*va,[g,Oi(x)*_,Ai(x)*_]},ga=Ii,Yt=d.unpack,Ri=ga,nt=xn,pa=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=Yt(a,"lch");var s=a[0],g=a[1],_=a[2],x=Ri(s,g,_),m=x[0],S=x[1],A=x[2],R=nt(m,S,A),T=R[0],U=R[1],G=R[2];return[T,U,G,a.length>3?a[3]:1]},ie=pa,Li=d.unpack,Ci=ie,Ni=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Li(a,"hcl").reverse();return Ci.apply(void 0,s)},Ti=Ni,Pn=d.unpack,Fi=d.type,Et=M,Dt=E,Sn=F,kt=Si;Dt.prototype.lch=function(){return kt(this._rgb)},Dt.prototype.hcl=function(){return kt(this._rgb).reverse()},Et.lch=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Dt,[null].concat(a,["lch"])))},Et.hcl=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Dt,[null].concat(a,["hcl"])))},Sn.format.lch=ie,Sn.format.hcl=Ti,["lch","hcl"].forEach(function(a){return Sn.autodetect.push({p:2,test:function(){for(var f=[],s=arguments.length;s--;)f[s]=arguments[s];if(f=Pn(f,a),Fi(f)==="array"&&f.length===3)return a}})});var da={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},$n=da,Gi=E,ya=F,zt=d.type,oe=$n,Bi=je,ba=Ve;Gi.prototype.name=function(){for(var a=ba(this._rgb,"rgb"),f=0,s=Object.keys(oe);f<s.length;f+=1){var g=s[f];if(oe[g]===a)return g.toLowerCase()}return a},ya.format.named=function(a){if(a=a.toLowerCase(),oe[a])return Bi(oe[a]);throw new Error("unknown color name: "+a)},ya.autodetect.push({p:5,test:function(a){for(var f=[],s=arguments.length-1;s-- >0;)f[s]=arguments[s+1];if(!f.length&&zt(a)==="string"&&oe[a.toLowerCase()])return"named"}});var Wt=d.unpack,qi=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Wt(a,"rgb"),g=s[0],_=s[1],x=s[2];return(g<<16)+(_<<8)+x},at=qi,it=d.type,Wr=function(a){if(it(a)=="number"&&a>=0&&a<=16777215){var f=a>>16,s=a>>8&255,g=a&255;return[f,s,g,1]}throw new Error("unknown num color: "+a)},Xe=Wr,An=M,Ht=E,ma=F,Ut=d.type,Jt=at;Ht.prototype.num=function(){return Jt(this._rgb)},An.num=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Ht,[null].concat(a,["num"])))},ma.format.num=Xe,ma.autodetect.push({p:5,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a.length===1&&Ut(a[0])==="number"&&a[0]>=0&&a[0]<=16777215)return"num"}});var ue=M,$e=E,On=F,Mt=d.unpack,Pt=d.type,In=Math.round;$e.prototype.rgb=function(a){return a===void 0&&(a=!0),a===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(In)},$e.prototype.rgba=function(a){return a===void 0&&(a=!0),this._rgb.slice(0,4).map(function(f,s){return s<3?a===!1?f:In(f):f})},ue.rgb=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply($e,[null].concat(a,["rgb"])))},On.format.rgb=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Mt(a,"rgba");return s[3]===void 0&&(s[3]=1),s},On.autodetect.push({p:3,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=Mt(a,"rgba"),Pt(a)==="array"&&(a.length===3||a.length===4&&Pt(a[3])=="number"&&a[3]>=0&&a[3]<=1))return"rgb"}});var St=Math.log,wa=function(a){var f=a/100,s,g,_;return f<66?(s=255,g=f<6?0:-155.25485562709179-.44596950469579133*(g=f-2)+104.49216199393888*St(g),_=f<20?0:-254.76935184120902+.8274096064007395*(_=f-10)+115.67994401066147*St(_)):(s=351.97690566805693+.114206453784165*(s=f-55)-40.25366309332127*St(s),g=325.4494125711974+.07943456536662342*(g=f-50)-28.0852963507957*St(g),_=255),[s,g,_,1]},Rn=wa,Ae=Rn,_a=d.unpack,Xi=Math.round,xa=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];for(var s=_a(a,"rgb"),g=s[0],_=s[2],x=1e3,m=4e4,S=.4,A;m-x>S;){A=(m+x)*.5;var R=Ae(A);R[2]/R[0]>=_/g?m=A:x=A}return Xi(A)},Ln=xa,Qt=M,$t=E,Zt=F,i=Ln;$t.prototype.temp=$t.prototype.kelvin=$t.prototype.temperature=function(){return i(this._rgb)},Qt.temp=Qt.kelvin=Qt.temperature=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply($t,[null].concat(a,["temp"])))},Zt.format.temp=Zt.format.kelvin=Zt.format.temperature=Rn;var c=d.unpack,y=Math.cbrt,O=Math.pow,W=Math.sign,B=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=c(a,"rgb"),g=s[0],_=s[1],x=s[2],m=[Q(g/255),Q(_/255),Q(x/255)],S=m[0],A=m[1],R=m[2],T=y(.4122214708*S+.5363325363*A+.0514459929*R),U=y(.2119034982*S+.6806995451*A+.1073969566*R),G=y(.0883024619*S+.2817188376*A+.6299787005*R);return[.2104542553*T+.793617785*U-.0040720468*G,1.9779984951*T-2.428592205*U+.4505937099*G,.0259040371*T+.7827717662*U-.808675766*G]},J=B;function Q(a){var f=Math.abs(a);return f<.04045?a/12.92:(W(a)||1)*O((f+.055)/1.055,2.4)}var tr=d.unpack,dr=Math.pow,yr=Math.sign,Mr=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=tr(a,"lab");var s=a[0],g=a[1],_=a[2],x=dr(s+.3963377774*g+.2158037573*_,3),m=dr(s-.1055613458*g-.0638541728*_,3),S=dr(s-.0894841775*g-1.291485548*_,3);return[255*Cr(4.0767416621*x-3.3077115913*m+.2309699292*S),255*Cr(-1.2684380046*x+2.6097574011*m-.3413193965*S),255*Cr(-.0041960863*x-.7034186147*m+1.707614701*S),a.length>3?a[3]:1]},Sr=Mr;function Cr(a){var f=Math.abs(a);return f>.0031308?(yr(a)||1)*(1.055*dr(f,1/2.4)-.055):a*12.92}var Fr=d.unpack,Oe=d.type,de=M,Ie=E,Cn=F,Kt=J;Ie.prototype.oklab=function(){return Kt(this._rgb)},de.oklab=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Ie,[null].concat(a,["oklab"])))},Cn.format.oklab=Sr,Cn.autodetect.push({p:3,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=Fr(a,"oklab"),Oe(a)==="array"&&a.length===3)return"oklab"}});var Vt=d.unpack,cf=J,hf=ca,vf=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];var s=Vt(a,"rgb"),g=s[0],_=s[1],x=s[2],m=cf(g,_,x),S=m[0],A=m[1],R=m[2];return hf(S,A,R)},gf=vf,pf=d.unpack,df=ga,yf=Sr,bf=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];a=pf(a,"lch");var s=a[0],g=a[1],_=a[2],x=df(s,g,_),m=x[0],S=x[1],A=x[2],R=yf(m,S,A),T=R[0],U=R[1],G=R[2];return[T,U,G,a.length>3?a[3]:1]},mf=bf,wf=d.unpack,_f=d.type,xf=M,Ao=E,Oo=F,Ef=gf;Ao.prototype.oklch=function(){return Ef(this._rgb)},xf.oklch=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];return new(Function.prototype.bind.apply(Ao,[null].concat(a,["oklch"])))},Oo.format.oklch=mf,Oo.autodetect.push({p:3,test:function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];if(a=wf(a,"oklch"),_f(a)==="array"&&a.length===3)return"oklch"}});var Io=E,kf=d.type;Io.prototype.alpha=function(a,f){return f===void 0&&(f=!1),a!==void 0&&kf(a)==="number"?f?(this._rgb[3]=a,this):new Io([this._rgb[0],this._rgb[1],this._rgb[2],a],"rgb"):this._rgb[3]};var Mf=E;Mf.prototype.clipped=function(){return this._rgb._clipped||!1};var At=E,Pf=Xt;At.prototype.darken=function(a){a===void 0&&(a=1);var f=this,s=f.lab();return s[0]-=Pf.Kn*a,new At(s,"lab").alpha(f.alpha(),!0)},At.prototype.brighten=function(a){return a===void 0&&(a=1),this.darken(-a)},At.prototype.darker=At.prototype.darken,At.prototype.brighter=At.prototype.brighten;var Sf=E;Sf.prototype.get=function(a){var f=a.split("."),s=f[0],g=f[1],_=this[s]();if(g){var x=s.indexOf(g)-(s.substr(0,2)==="ok"?2:0);if(x>-1)return _[x];throw new Error("unknown channel "+g+" in mode "+s)}else return _};var jt=E,$f=d.type,Af=Math.pow,Of=1e-7,If=20;jt.prototype.luminance=function(a){if(a!==void 0&&$f(a)==="number"){if(a===0)return new jt([0,0,0,this._rgb[3]],"rgb");if(a===1)return new jt([255,255,255,this._rgb[3]],"rgb");var f=this.luminance(),s="rgb",g=If,_=function(m,S){var A=m.interpolate(S,.5,s),R=A.luminance();return Math.abs(a-R)<Of||!g--?A:R>a?_(m,A):_(A,S)},x=(f>a?_(new jt([0,0,0]),this):_(this,new jt([255,255,255]))).rgb();return new jt(x.concat([this._rgb[3]]))}return Rf.apply(void 0,this._rgb.slice(0,3))};var Rf=function(a,f,s){return a=Yi(a),f=Yi(f),s=Yi(s),.2126*a+.7152*f+.0722*s},Yi=function(a){return a/=255,a<=.03928?a/12.92:Af((a+.055)/1.055,2.4)},fe={},Ro=E,Lo=d.type,Ea=fe,Co=function(a,f,s){s===void 0&&(s=.5);for(var g=[],_=arguments.length-3;_-- >0;)g[_]=arguments[_+3];var x=g[0]||"lrgb";if(!Ea[x]&&!g.length&&(x=Object.keys(Ea)[0]),!Ea[x])throw new Error("interpolation mode "+x+" is not defined");return Lo(a)!=="object"&&(a=new Ro(a)),Lo(f)!=="object"&&(f=new Ro(f)),Ea[x](a,f,s).alpha(a.alpha()+s*(f.alpha()-a.alpha()))},No=E,Lf=Co;No.prototype.mix=No.prototype.interpolate=function(a,f){f===void 0&&(f=.5);for(var s=[],g=arguments.length-2;g-- >0;)s[g]=arguments[g+2];return Lf.apply(void 0,[this,a,f].concat(s))};var To=E;To.prototype.premultiply=function(a){a===void 0&&(a=!1);var f=this._rgb,s=f[3];return a?(this._rgb=[f[0]*s,f[1]*s,f[2]*s,s],this):new To([f[0]*s,f[1]*s,f[2]*s,s],"rgb")};var Di=E,Cf=Xt;Di.prototype.saturate=function(a){a===void 0&&(a=1);var f=this,s=f.lch();return s[1]+=Cf.Kn*a,s[1]<0&&(s[1]=0),new Di(s,"lch").alpha(f.alpha(),!0)},Di.prototype.desaturate=function(a){return a===void 0&&(a=1),this.saturate(-a)};var Fo=E,Go=d.type;Fo.prototype.set=function(a,f,s){s===void 0&&(s=!1);var g=a.split("."),_=g[0],x=g[1],m=this[_]();if(x){var S=_.indexOf(x)-(_.substr(0,2)==="ok"?2:0);if(S>-1){if(Go(f)=="string")switch(f.charAt(0)){case"+":m[S]+=+f;break;case"-":m[S]+=+f;break;case"*":m[S]*=+f.substr(1);break;case"/":m[S]/=+f.substr(1);break;default:m[S]=+f}else if(Go(f)==="number")m[S]=f;else throw new Error("unsupported value for Color.set");var A=new Fo(m,_);return s?(this._rgb=A._rgb,this):A}throw new Error("unknown channel "+x+" in mode "+_)}else return m};var Nf=E,Tf=function(a,f,s){var g=a._rgb,_=f._rgb;return new Nf(g[0]+s*(_[0]-g[0]),g[1]+s*(_[1]-g[1]),g[2]+s*(_[2]-g[2]),"rgb")};fe.rgb=Tf;var Ff=E,zi=Math.sqrt,rn=Math.pow,Gf=function(a,f,s){var g=a._rgb,_=g[0],x=g[1],m=g[2],S=f._rgb,A=S[0],R=S[1],T=S[2];return new Ff(zi(rn(_,2)*(1-s)+rn(A,2)*s),zi(rn(x,2)*(1-s)+rn(R,2)*s),zi(rn(m,2)*(1-s)+rn(T,2)*s),"rgb")};fe.lrgb=Gf;var Bf=E,qf=function(a,f,s){var g=a.lab(),_=f.lab();return new Bf(g[0]+s*(_[0]-g[0]),g[1]+s*(_[1]-g[1]),g[2]+s*(_[2]-g[2]),"lab")};fe.lab=qf;var Bo=E,en=function(a,f,s,g){var _,x,m,S;g==="hsl"?(m=a.hsl(),S=f.hsl()):g==="hsv"?(m=a.hsv(),S=f.hsv()):g==="hcg"?(m=a.hcg(),S=f.hcg()):g==="hsi"?(m=a.hsi(),S=f.hsi()):g==="lch"||g==="hcl"?(g="hcl",m=a.hcl(),S=f.hcl()):g==="oklch"&&(m=a.oklch().reverse(),S=f.oklch().reverse());var A,R,T,U,G,K;(g.substr(0,1)==="h"||g==="oklch")&&(_=m,A=_[0],T=_[1],G=_[2],x=S,R=x[0],U=x[1],K=x[2]);var Z,ir,lr,gr;return!isNaN(A)&&!isNaN(R)?(R>A&&R-A>180?gr=R-(A+360):R<A&&A-R>180?gr=R+360-A:gr=R-A,ir=A+s*gr):isNaN(A)?isNaN(R)?ir=Number.NaN:(ir=R,(G==1||G==0)&&g!="hsv"&&(Z=U)):(ir=A,(K==1||K==0)&&g!="hsv"&&(Z=T)),Z===void 0&&(Z=T+s*(U-T)),lr=G+s*(K-G),g==="oklch"?new Bo([lr,Z,ir],g):new Bo([ir,Z,lr],g)},Xf=en,qo=function(a,f,s){return Xf(a,f,s,"lch")};fe.lch=qo,fe.hcl=qo;var Yf=E,Df=function(a,f,s){var g=a.num(),_=f.num();return new Yf(g+s*(_-g),"num")};fe.num=Df;var zf=en,Wf=function(a,f,s){return zf(a,f,s,"hcg")};fe.hcg=Wf;var Hf=en,Uf=function(a,f,s){return Hf(a,f,s,"hsi")};fe.hsi=Uf;var Jf=en,Qf=function(a,f,s){return Jf(a,f,s,"hsl")};fe.hsl=Qf;var Zf=en,Kf=function(a,f,s){return Zf(a,f,s,"hsv")};fe.hsv=Kf;var Vf=E,jf=function(a,f,s){var g=a.oklab(),_=f.oklab();return new Vf(g[0]+s*(_[0]-g[0]),g[1]+s*(_[1]-g[1]),g[2]+s*(_[2]-g[2]),"oklab")};fe.oklab=jf;var rs=en,es=function(a,f,s){return rs(a,f,s,"oklch")};fe.oklch=es;var Wi=E,ts=d.clip_rgb,Hi=Math.pow,Ui=Math.sqrt,Ji=Math.PI,Xo=Math.cos,Yo=Math.sin,ns=Math.atan2,as=function(a,f,s){f===void 0&&(f="lrgb"),s===void 0&&(s=null);var g=a.length;s||(s=Array.from(new Array(g)).map(function(){return 1}));var _=g/s.reduce(function(ir,lr){return ir+lr});if(s.forEach(function(ir,lr){s[lr]*=_}),a=a.map(function(ir){return new Wi(ir)}),f==="lrgb")return is(a,s);for(var x=a.shift(),m=x.get(f),S=[],A=0,R=0,T=0;T<m.length;T++)if(m[T]=(m[T]||0)*s[0],S.push(isNaN(m[T])?0:s[0]),f.charAt(T)==="h"&&!isNaN(m[T])){var U=m[T]/180*Ji;A+=Xo(U)*s[0],R+=Yo(U)*s[0]}var G=x.alpha()*s[0];a.forEach(function(ir,lr){var gr=ir.get(f);G+=ir.alpha()*s[lr+1];for(var br=0;br<m.length;br++)if(!isNaN(gr[br]))if(S[br]+=s[lr+1],f.charAt(br)==="h"){var Hr=gr[br]/180*Ji;A+=Xo(Hr)*s[lr+1],R+=Yo(Hr)*s[lr+1]}else m[br]+=gr[br]*s[lr+1]});for(var K=0;K<m.length;K++)if(f.charAt(K)==="h"){for(var Z=ns(R/S[K],A/S[K])/Ji*180;Z<0;)Z+=360;for(;Z>=360;)Z-=360;m[K]=Z}else m[K]=m[K]/S[K];return G/=g,new Wi(m,f).alpha(G>.99999?1:G,!0)},is=function(a,f){for(var s=a.length,g=[0,0,0,0],_=0;_<a.length;_++){var x=a[_],m=f[_]/s,S=x._rgb;g[0]+=Hi(S[0],2)*m,g[1]+=Hi(S[1],2)*m,g[2]+=Hi(S[2],2)*m,g[3]+=S[3]*m}return g[0]=Ui(g[0]),g[1]=Ui(g[1]),g[2]=Ui(g[2]),g[3]>.9999999&&(g[3]=1),new Wi(ts(g))},ye=M,tn=d.type,os=Math.pow,Qi=function(a){var f="rgb",s=ye("#ccc"),g=0,_=[0,1],x=[],m=[0,0],S=!1,A=[],R=!1,T=0,U=1,G=!1,K={},Z=!0,ir=1,lr=function(q){if(q=q||["#fff","#000"],q&&tn(q)==="string"&&ye.brewer&&ye.brewer[q.toLowerCase()]&&(q=ye.brewer[q.toLowerCase()]),tn(q)==="array"){q.length===1&&(q=[q[0],q[0]]),q=q.slice(0);for(var er=0;er<q.length;er++)q[er]=ye(q[er]);x.length=0;for(var sr=0;sr<q.length;sr++)x.push(sr/(q.length-1))}return te(),A=q},gr=function(q){if(S!=null){for(var er=S.length-1,sr=0;sr<er&&q>=S[sr];)sr++;return sr-1}return 0},br=function(q){return q},Hr=function(q){return q},Yr=function(q,er){var sr,or;if(er==null&&(er=!1),isNaN(q)||q===null)return s;if(er)or=q;else if(S&&S.length>2){var Ur=gr(q);or=Ur/(S.length-2)}else U!==T?or=(q-T)/(U-T):or=1;or=Hr(or),er||(or=br(or)),ir!==1&&(or=os(or,ir)),or=m[0]+or*(1-m[0]-m[1]),or=Math.min(1,Math.max(0,or));var kr=Math.floor(or*1e4);if(Z&&K[kr])sr=K[kr];else{if(tn(A)==="array")for(var pr=0;pr<x.length;pr++){var mr=x[pr];if(or<=mr){sr=A[pr];break}if(or>=mr&&pr===x.length-1){sr=A[pr];break}if(or>mr&&or<x[pr+1]){or=(or-mr)/(x[pr+1]-mr),sr=ye.interpolate(A[pr],A[pr+1],or,f);break}}else tn(A)==="function"&&(sr=A(or));Z&&(K[kr]=sr)}return sr},te=function(){return K={}};lr(a);var vr=function(q){var er=ye(Yr(q));return R&&er[R]?er[R]():er};return vr.classes=function(q){if(q!=null){if(tn(q)==="array")S=q,_=[q[0],q[q.length-1]];else{var er=ye.analyze(_);q===0?S=[er.min,er.max]:S=ye.limits(er,"e",q)}return vr}return S},vr.domain=function(q){if(!arguments.length)return _;T=q[0],U=q[q.length-1],x=[];var er=A.length;if(q.length===er&&T!==U)for(var sr=0,or=Array.from(q);sr<or.length;sr+=1){var Ur=or[sr];x.push((Ur-T)/(U-T))}else{for(var kr=0;kr<er;kr++)x.push(kr/(er-1));if(q.length>2){var pr=q.map(function(wr,_r){return _r/(q.length-1)}),mr=q.map(function(wr){return(wr-T)/(U-T)});mr.every(function(wr,_r){return pr[_r]===wr})||(Hr=function(wr){if(wr<=0||wr>=1)return wr;for(var _r=0;wr>=mr[_r+1];)_r++;var me=(wr-mr[_r])/(mr[_r+1]-mr[_r]),ft=pr[_r]+me*(pr[_r+1]-pr[_r]);return ft})}}return _=[T,U],vr},vr.mode=function(q){return arguments.length?(f=q,te(),vr):f},vr.range=function(q,er){return lr(q),vr},vr.out=function(q){return R=q,vr},vr.spread=function(q){return arguments.length?(g=q,vr):g},vr.correctLightness=function(q){return q==null&&(q=!0),G=q,te(),G?br=function(er){for(var sr=Yr(0,!0).lab()[0],or=Yr(1,!0).lab()[0],Ur=sr>or,kr=Yr(er,!0).lab()[0],pr=sr+(or-sr)*er,mr=kr-pr,wr=0,_r=1,me=20;Math.abs(mr)>.01&&me-- >0;)(function(){return Ur&&(mr*=-1),mr<0?(wr=er,er+=(_r-er)*.5):(_r=er,er+=(wr-er)*.5),kr=Yr(er,!0).lab()[0],mr=kr-pr})();return er}:br=function(er){return er},vr},vr.padding=function(q){return q!=null?(tn(q)==="number"&&(q=[q,q]),m=q,vr):m},vr.colors=function(q,er){arguments.length<2&&(er="hex");var sr=[];if(arguments.length===0)sr=A.slice(0);else if(q===1)sr=[vr(.5)];else if(q>1){var or=_[0],Ur=_[1]-or;sr=us(0,q,!1).map(function(_r){return vr(or+_r/(q-1)*Ur)})}else{a=[];var kr=[];if(S&&S.length>2)for(var pr=1,mr=S.length,wr=1<=mr;wr?pr<mr:pr>mr;wr?pr++:pr--)kr.push((S[pr-1]+S[pr])*.5);else kr=_;sr=kr.map(function(_r){return vr(_r)})}return ye[er]&&(sr=sr.map(function(_r){return _r[er]()})),sr},vr.cache=function(q){return q!=null?(Z=q,vr):Z},vr.gamma=function(q){return q!=null?(ir=q,vr):ir},vr.nodata=function(q){return q!=null?(s=ye(q),vr):s},vr};function us(a,f,s){for(var g=[],_=a<f,x=s?_?f+1:f-1:f,m=a;_?m<x:m>x;_?m++:m--)g.push(m);return g}var Nn=E,fs=Qi,ss=function(a){for(var f=[1,1],s=1;s<a;s++){for(var g=[1],_=1;_<=f.length;_++)g[_]=(f[_]||0)+f[_-1];f=g}return f},ls=function(a){var f,s,g,_,x,m,S;if(a=a.map(function(G){return new Nn(G)}),a.length===2)f=a.map(function(G){return G.lab()}),x=f[0],m=f[1],_=function(G){var K=[0,1,2].map(function(Z){return x[Z]+G*(m[Z]-x[Z])});return new Nn(K,"lab")};else if(a.length===3)s=a.map(function(G){return G.lab()}),x=s[0],m=s[1],S=s[2],_=function(G){var K=[0,1,2].map(function(Z){return(1-G)*(1-G)*x[Z]+2*(1-G)*G*m[Z]+G*G*S[Z]});return new Nn(K,"lab")};else if(a.length===4){var A;g=a.map(function(G){return G.lab()}),x=g[0],m=g[1],S=g[2],A=g[3],_=function(G){var K=[0,1,2].map(function(Z){return(1-G)*(1-G)*(1-G)*x[Z]+3*(1-G)*(1-G)*G*m[Z]+3*(1-G)*G*G*S[Z]+G*G*G*A[Z]});return new Nn(K,"lab")}}else if(a.length>=5){var R,T,U;R=a.map(function(G){return G.lab()}),U=a.length-1,T=ss(U),_=function(G){var K=1-G,Z=[0,1,2].map(function(ir){return R.reduce(function(lr,gr,br){return lr+T[br]*Math.pow(K,U-br)*Math.pow(G,br)*gr[ir]},0)});return new Nn(Z,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return _},cs=function(a){var f=ls(a);return f.scale=function(){return fs(f)},f},Zi=M,be=function(a,f,s){if(!be[s])throw new Error("unknown blend mode "+s);return be[s](a,f)},ot=function(a){return function(f,s){var g=Zi(s).rgb(),_=Zi(f).rgb();return Zi.rgb(a(g,_))}},ut=function(a){return function(f,s){var g=[];return g[0]=a(f[0],s[0]),g[1]=a(f[1],s[1]),g[2]=a(f[2],s[2]),g}},hs=function(a){return a},vs=function(a,f){return a*f/255},gs=function(a,f){return a>f?f:a},ps=function(a,f){return a>f?a:f},ds=function(a,f){return 255*(1-(1-a/255)*(1-f/255))},ys=function(a,f){return f<128?2*a*f/255:255*(1-2*(1-a/255)*(1-f/255))},bs=function(a,f){return 255*(1-(1-f/255)/(a/255))},ms=function(a,f){return a===255?255:(a=255*(f/255)/(1-a/255),a>255?255:a)};be.normal=ot(ut(hs)),be.multiply=ot(ut(vs)),be.screen=ot(ut(ds)),be.overlay=ot(ut(ys)),be.darken=ot(ut(gs)),be.lighten=ot(ut(ps)),be.dodge=ot(ut(ms)),be.burn=ot(ut(bs));for(var ws=be,Ki=d.type,_s=d.clip_rgb,xs=d.TWOPI,Es=Math.pow,ks=Math.sin,Ms=Math.cos,Do=M,Ps=function(a,f,s,g,_){a===void 0&&(a=300),f===void 0&&(f=-1.5),s===void 0&&(s=1),g===void 0&&(g=1),_===void 0&&(_=[0,1]);var x=0,m;Ki(_)==="array"?m=_[1]-_[0]:(m=0,_=[_,_]);var S=function(A){var R=xs*((a+120)/360+f*A),T=Es(_[0]+m*A,g),U=x!==0?s[0]+A*x:s,G=U*T*(1-T)/2,K=Ms(R),Z=ks(R),ir=T+G*(-.14861*K+1.78277*Z),lr=T+G*(-.29227*K-.90649*Z),gr=T+G*(1.97294*K);return Do(_s([ir*255,lr*255,gr*255,1]))};return S.start=function(A){return A==null?a:(a=A,S)},S.rotations=function(A){return A==null?f:(f=A,S)},S.gamma=function(A){return A==null?g:(g=A,S)},S.hue=function(A){return A==null?s:(s=A,Ki(s)==="array"?(x=s[1]-s[0],x===0&&(s=s[1])):x=0,S)},S.lightness=function(A){return A==null?_:(Ki(A)==="array"?(_=A,m=A[1]-A[0]):(_=[A,A],m=0),S)},S.scale=function(){return Do.scale(S)},S.hue(s),S},Ss=E,$s="0123456789abcdef",As=Math.floor,Os=Math.random,Is=function(){for(var a="#",f=0;f<6;f++)a+=$s.charAt(As(Os()*16));return new Ss(a,"hex")},Vi=p,zo=Math.log,Rs=Math.pow,Ls=Math.floor,Cs=Math.abs,Wo=function(a,f){f===void 0&&(f=null);var s={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Vi(a)==="object"&&(a=Object.values(a)),a.forEach(function(g){f&&Vi(g)==="object"&&(g=g[f]),g!=null&&!isNaN(g)&&(s.values.push(g),s.sum+=g,g<s.min&&(s.min=g),g>s.max&&(s.max=g),s.count+=1)}),s.domain=[s.min,s.max],s.limits=function(g,_){return Ho(s,g,_)},s},Ho=function(a,f,s){f===void 0&&(f="equal"),s===void 0&&(s=7),Vi(a)=="array"&&(a=Wo(a));var g=a.min,_=a.max,x=a.values.sort(function(ro,eo){return ro-eo});if(s===1)return[g,_];var m=[];if(f.substr(0,1)==="c"&&(m.push(g),m.push(_)),f.substr(0,1)==="e"){m.push(g);for(var S=1;S<s;S++)m.push(g+S/s*(_-g));m.push(_)}else if(f.substr(0,1)==="l"){if(g<=0)throw new Error("Logarithmic scales are only possible for values > 0");var A=Math.LOG10E*zo(g),R=Math.LOG10E*zo(_);m.push(g);for(var T=1;T<s;T++)m.push(Rs(10,A+T/s*(R-A)));m.push(_)}else if(f.substr(0,1)==="q"){m.push(g);for(var U=1;U<s;U++){var G=(x.length-1)*U/s,K=Ls(G);if(K===G)m.push(x[K]);else{var Z=G-K;m.push(x[K]*(1-Z)+x[K+1]*Z)}}m.push(_)}else if(f.substr(0,1)==="k"){var ir,lr=x.length,gr=new Array(lr),br=new Array(s),Hr=!0,Yr=0,te=null;te=[],te.push(g);for(var vr=1;vr<s;vr++)te.push(g+vr/s*(_-g));for(te.push(_);Hr;){for(var q=0;q<s;q++)br[q]=0;for(var er=0;er<lr;er++)for(var sr=x[er],or=Number.MAX_VALUE,Ur=void 0,kr=0;kr<s;kr++){var pr=Cs(te[kr]-sr);pr<or&&(or=pr,Ur=kr),br[Ur]++,gr[er]=Ur}for(var mr=new Array(s),wr=0;wr<s;wr++)mr[wr]=null;for(var _r=0;_r<lr;_r++)ir=gr[_r],mr[ir]===null?mr[ir]=x[_r]:mr[ir]+=x[_r];for(var me=0;me<s;me++)mr[me]*=1/br[me];Hr=!1;for(var ft=0;ft<s;ft++)if(mr[ft]!==te[ft]){Hr=!0;break}te=mr,Yr++,Yr>200&&(Hr=!1)}for(var st={},nn=0;nn<s;nn++)st[nn]=[];for(var an=0;an<lr;an++)ir=gr[an],st[ir].push(x[an]);for(var De=[],Ot=0;Ot<s;Ot++)De.push(st[Ot][0]),De.push(st[Ot][st[Ot].length-1]);De=De.sort(function(ro,eo){return ro-eo}),m.push(De[0]);for(var Tn=1;Tn<De.length;Tn+=2){var It=De[Tn];!isNaN(It)&&m.indexOf(It)===-1&&m.push(It)}}return m},Uo={analyze:Wo,limits:Ho},Jo=E,Ns=function(a,f){a=new Jo(a),f=new Jo(f);var s=a.luminance(),g=f.luminance();return s>g?(s+.05)/(g+.05):(g+.05)/(s+.05)},Qo=E,Ye=Math.sqrt,Nr=Math.pow,Ts=Math.min,Fs=Math.max,Zo=Math.atan2,Ko=Math.abs,ka=Math.cos,Vo=Math.sin,Gs=Math.exp,jo=Math.PI,Bs=function(a,f,s,g,_){s===void 0&&(s=1),g===void 0&&(g=1),_===void 0&&(_=1);var x=function(It){return 360*It/(2*jo)},m=function(It){return 2*jo*It/360};a=new Qo(a),f=new Qo(f);var S=Array.from(a.lab()),A=S[0],R=S[1],T=S[2],U=Array.from(f.lab()),G=U[0],K=U[1],Z=U[2],ir=(A+G)/2,lr=Ye(Nr(R,2)+Nr(T,2)),gr=Ye(Nr(K,2)+Nr(Z,2)),br=(lr+gr)/2,Hr=.5*(1-Ye(Nr(br,7)/(Nr(br,7)+Nr(25,7)))),Yr=R*(1+Hr),te=K*(1+Hr),vr=Ye(Nr(Yr,2)+Nr(T,2)),q=Ye(Nr(te,2)+Nr(Z,2)),er=(vr+q)/2,sr=x(Zo(T,Yr)),or=x(Zo(Z,te)),Ur=sr>=0?sr:sr+360,kr=or>=0?or:or+360,pr=Ko(Ur-kr)>180?(Ur+kr+360)/2:(Ur+kr)/2,mr=1-.17*ka(m(pr-30))+.24*ka(m(2*pr))+.32*ka(m(3*pr+6))-.2*ka(m(4*pr-63)),wr=kr-Ur;wr=Ko(wr)<=180?wr:kr<=Ur?wr+360:wr-360,wr=2*Ye(vr*q)*Vo(m(wr)/2);var _r=G-A,me=q-vr,ft=1+.015*Nr(ir-50,2)/Ye(20+Nr(ir-50,2)),st=1+.045*er,nn=1+.015*er*mr,an=30*Gs(-Nr((pr-275)/25,2)),De=2*Ye(Nr(er,7)/(Nr(er,7)+Nr(25,7))),Ot=-De*Vo(2*m(an)),Tn=Ye(Nr(_r/(s*ft),2)+Nr(me/(g*st),2)+Nr(wr/(_*nn),2)+Ot*(me/(g*st))*(wr/(_*nn)));return Fs(0,Ts(100,Tn))},ru=E,qs=function(a,f,s){s===void 0&&(s="lab"),a=new ru(a),f=new ru(f);var g=a.get(s),_=f.get(s),x=0;for(var m in g){var S=(g[m]||0)-(_[m]||0);x+=S*S}return Math.sqrt(x)},Xs=E,Ys=function(){for(var a=[],f=arguments.length;f--;)a[f]=arguments[f];try{return new(Function.prototype.bind.apply(Xs,[null].concat(a))),!0}catch{return!1}},eu=M,tu=Qi,Ds={cool:function(){return tu([eu.hsl(180,1,.9),eu.hsl(250,.7,.4)])},hot:function(){return tu(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Ma={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ji=0,nu=Object.keys(Ma);ji<nu.length;ji+=1){var au=nu[ji];Ma[au.toLowerCase()]=Ma[au]}var zs=Ma,Xr=M;Xr.average=as,Xr.bezier=cs,Xr.blend=ws,Xr.cubehelix=Ps,Xr.mix=Xr.interpolate=Co,Xr.random=Is,Xr.scale=Qi,Xr.analyze=Uo.analyze,Xr.contrast=Ns,Xr.deltaE=Bs,Xr.distance=qs,Xr.limits=Uo.limits,Xr.valid=Ys,Xr.scales=Ds,Xr.colors=$n,Xr.brewer=zs;var Ws=Xr;return Ws})})(Vu);var Cc=Vu.exports;const nh=go(Cc);var La={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */La.exports;(function(t,e){(function(){var r,n="4.15.0",o=200,u="Expected a function",l="__lodash_hash_undefined__",v=1,h=2,p=1/0,k=9007199254740991,L="[object Arguments]",C="[object Array]",X="[object Boolean]",Y="[object Date]",d="[object Error]",F="[object Function]",D="[object GeneratorFunction]",w="[object Map]",b="[object Number]",$="[object Object]",P="[object Promise]",E="[object RegExp]",I="[object Set]",M="[object String]",N="[object Symbol]",z="[object WeakMap]",H="[object ArrayBuffer]",V="[object DataView]",rr="[object Float32Array]",j="[object Float64Array]",Pr="[object Int8Array]",$r="[object Int16Array]",Ar="[object Int32Array]",Rr="[object Uint8Array]",Gr="[object Uint8ClampedArray]",Lr="[object Uint16Array]",Tr="[object Uint32Array]",cr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jr=/^\w*$/,ur=/^\./,xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ke=/\\(\\)?/g,Br=/\w*$/,zr=/^\[object .+?Constructor\]$/,Or=/^(?:0|[1-9]\d*)$/,ar={};ar[rr]=ar[j]=ar[Pr]=ar[$r]=ar[Ar]=ar[Rr]=ar[Gr]=ar[Lr]=ar[Tr]=!0,ar[L]=ar[C]=ar[H]=ar[X]=ar[V]=ar[Y]=ar[d]=ar[F]=ar[w]=ar[b]=ar[$]=ar[E]=ar[I]=ar[M]=ar[z]=!1;var hr={};hr[L]=hr[C]=hr[H]=hr[V]=hr[X]=hr[Y]=hr[rr]=hr[j]=hr[Pr]=hr[$r]=hr[Ar]=hr[w]=hr[b]=hr[$]=hr[E]=hr[I]=hr[M]=hr[N]=hr[Rr]=hr[Gr]=hr[Lr]=hr[Tr]=!0,hr[d]=hr[F]=hr[z]=!1;var He=typeof Rt=="object"&&Rt&&Rt.Object===Object&&Rt,gt=typeof self=="object"&&self&&self.Object===Object&&self,Qr=He||gt||Function("return this")(),Ue=e&&!e.nodeType&&e,ne=Ue&&!0&&t&&!t.nodeType&&t,Ne=ne&&ne.exports===Ue,pt=Ne&&He.process,Er=function(){try{return pt&&pt.binding("util")}catch{}}(),jr=Er&&Er.isTypedArray;function le(i,c){return i.set(c[0],c[1]),i}function Te(i,c){return i.add(c),i}function Me(i,c,y){switch(y.length){case 0:return i.call(c);case 1:return i.call(c,y[0]);case 2:return i.call(c,y[0],y[1]);case 3:return i.call(c,y[0],y[1],y[2])}return i.apply(c,y)}function Fe(i,c){for(var y=-1,O=i?i.length:0;++y<O&&c(i[y],y,i)!==!1;);return i}function ge(i,c){for(var y=-1,O=c.length,W=i.length;++y<O;)i[W+y]=c[y];return i}function qr(i,c,y,O){var W=-1,B=i?i.length:0;for(O&&B&&(y=i[++W]);++W<B;)y=c(y,i[W],W,i);return y}function Pe(i,c){for(var y=-1,O=i?i.length:0;++y<O;)if(c(i[y],y,i))return!0;return!1}function Je(i){return function(c){return c==null?r:c[i]}}function Qe(i,c){for(var y=-1,O=Array(i);++y<i;)O[y]=c(y);return O}function Ze(i){return function(c){return i(c)}}function dt(i,c){return i==null?r:i[c]}function pe(i){var c=!1;if(i!=null&&typeof i.toString!="function")try{c=!!(i+"")}catch{}return c}function Se(i){var c=-1,y=Array(i.size);return i.forEach(function(O,W){y[++c]=[W,O]}),y}function yt(i,c){return function(y){return i(c(y))}}function Ke(i){var c=-1,y=Array(i.size);return i.forEach(function(O){y[++c]=O}),y}var Tt=Array.prototype,Dn=Function.prototype,Ft=Object.prototype,ln=Qr["__core-js_shared__"],zn=function(){var i=/[^.]+$/.exec(ln&&ln.keys&&ln.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Gt=Dn.toString,Zr=Ft.hasOwnProperty,Ba=Gt.call(Object),Ge=Ft.toString,qa=RegExp("^"+Gt.call(Zr).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wn=Ne?Qr.Buffer:r,Hn=Qr.Symbol,Bt=Qr.Uint8Array,Un=yt(Object.getPrototypeOf,Object),Xa=Object.create,cn=Ft.propertyIsEnumerable,Jn=Tt.splice,Qn=Object.getOwnPropertySymbols,Ya=Wn?Wn.isBuffer:r,Zn=yt(Object.keys,Object),bt=Math.max,hn=nt(Qr,"DataView"),Ve=nt(Qr,"Map"),vn=nt(Qr,"Promise"),gn=nt(Qr,"Set"),pn=nt(Qr,"WeakMap"),je=nt(Object,"create"),Da=!cn.call({valueOf:1},"valueOf"),Kn=oe(hn),za=oe(Ve),Vn=oe(vn),Wa=oe(gn),Ha=oe(pn),mt=Hn?Hn.prototype:r,wt=mt?mt.valueOf:r,jn=mt?mt.toString:r;function fr(){}function Be(i){var c=-1,y=i?i.length:0;for(this.clear();++c<y;){var O=i[c];this.set(O[0],O[1])}}function Ua(){this.__data__=je?je(null):{}}function Ja(i){return this.has(i)&&delete this.__data__[i]}function dn(i){var c=this.__data__;if(je){var y=c[i];return y===l?r:y}return Zr.call(c,i)?c[i]:r}function rt(i){var c=this.__data__;return je?c[i]!==r:Zr.call(c,i)}function yn(i,c){var y=this.__data__;return y[i]=je&&c===r?l:c,this}Be.prototype.clear=Ua,Be.prototype.delete=Ja,Be.prototype.get=dn,Be.prototype.has=rt,Be.prototype.set=yn;function Kr(i){var c=-1,y=i?i.length:0;for(this.clear();++c<y;){var O=i[c];this.set(O[0],O[1])}}function Qa(){this.__data__=[]}function Za(i){var c=this.__data__,y=qt(c,i);if(y<0)return!1;var O=c.length-1;return y==O?c.pop():Jn.call(c,y,1),!0}function Ka(i){var c=this.__data__,y=qt(c,i);return y<0?r:c[y][1]}function Va(i){return qt(this.__data__,i)>-1}function ja(i,c){var y=this.__data__,O=qt(y,i);return O<0?y.push([i,c]):y[O][1]=c,this}Kr.prototype.clear=Qa,Kr.prototype.delete=Za,Kr.prototype.get=Ka,Kr.prototype.has=Va,Kr.prototype.set=ja;function ce(i){var c=-1,y=i?i.length:0;for(this.clear();++c<y;){var O=i[c];this.set(O[0],O[1])}}function ra(){this.__data__={hash:new Be,map:new(Ve||Kr),string:new Be}}function ri(i){return Yt(this,i).delete(i)}function ei(i){return Yt(this,i).get(i)}function ti(i){return Yt(this,i).has(i)}function ni(i,c){return Yt(this,i).set(i,c),this}ce.prototype.clear=ra,ce.prototype.delete=ri,ce.prototype.get=ei,ce.prototype.has=ti,ce.prototype.set=ni;function _t(i){var c=-1,y=i?i.length:0;for(this.__data__=new ce;++c<y;)this.add(i[c])}function ea(i){return this.__data__.set(i,l),this}function ai(i){return this.__data__.has(i)}_t.prototype.add=_t.prototype.push=ea,_t.prototype.has=ai;function ae(i){this.__data__=new Kr(i)}function ii(){this.__data__=new Kr}function oi(i){return this.__data__.delete(i)}function ui(i){return this.__data__.get(i)}function fi(i){return this.__data__.has(i)}function si(i,c){var y=this.__data__;if(y instanceof Kr){var O=y.__data__;if(!Ve||O.length<o-1)return O.push([i,c]),this;y=this.__data__=new ce(O)}return y.set(i,c),this}ae.prototype.clear=ii,ae.prototype.delete=oi,ae.prototype.get=ui,ae.prototype.has=fi,ae.prototype.set=si;function ta(i,c){var y=Wr(i)||it(i)?Qe(i.length,String):[],O=y.length,W=!!O;for(var B in i)(c||Zr.call(i,B))&&!(W&&(B=="length"||Pn(B,O)))&&y.push(B);return y}function bn(i,c,y){(y!==r&&!at(i[c],y)||typeof c=="number"&&y===r&&!(c in i))&&(i[c]=y)}function na(i,c,y){var O=i[c];(!(Zr.call(i,c)&&at(O,y))||y===r&&!(c in i))&&(i[c]=y)}function qt(i,c){for(var y=i.length;y--;)if(at(i[y][0],c))return y;return-1}function li(i,c){return i&&Mn(c,Ae(c),i)}function et(i,c,y,O,W,B,J){var Q;if(O&&(Q=B?O(i,W,B,J):O(i)),Q!==r)return Q;if(!ue(i))return i;var tr=Wr(i);if(tr){if(Q=Ci(i),!c)return ha(i,Q)}else{var dr=ie(i),yr=dr==F||dr==D;if(Ht(i))return mi(i,c);if(dr==$||dr==L||yr&&!B){if(pe(i))return B?i:{};if(Q=Ni(yr?{}:i),!c)return Mi(i,li(Q,i))}else{if(!hr[dr])return B?i:{};Q=Ti(i,dr,et,c)}}J||(J=new ae);var Mr=J.get(i);if(Mr)return Mr;if(J.set(i,Q),!tr)var Sr=y?Ii(i):Ae(i);return Fe(Sr||i,function(Cr,Fr){Sr&&(Fr=Cr,Cr=i[Fr]),na(Q,Fr,et(Cr,c,y,O,Fr,i,J))}),Q}function aa(i){return ue(i)?Xa(i):{}}var ia=Si(Xt),ci=$i();function Xt(i,c){return i&&ci(i,c,Ae)}function qe(i,c){c=Et(c,i)?[c]:En(c);for(var y=0,O=c.length;i!=null&&y<O;)i=i[zt(c[y++])];return y&&y==O?i:r}function hi(i,c,y){var O=c(i);return Wr(i)?O:ge(O,y(i))}function oa(i){return Ge.call(i)}function vi(i,c){return i!=null&&c in Object(i)}function xt(i,c,y,O,W){return i===c?!0:i==null||c==null||!ue(i)&&!$e(c)?i!==i&&c!==c:mn(i,c,xt,y,O,W)}function mn(i,c,y,O,W,B){var J=Wr(i),Q=Wr(c),tr=C,dr=C;J||(tr=ie(i),tr=tr==L?$:tr),Q||(dr=ie(c),dr=dr==L?$:dr);var yr=tr==$&&!pe(i),Mr=dr==$&&!pe(c),Sr=tr==dr;if(Sr&&!yr)return B||(B=new ae),J||Pt(i)?va(i,c,y,O,W,B):Ai(i,c,tr,y,O,W,B);if(!(W&h)){var Cr=yr&&Zr.call(i,"__wrapped__"),Fr=Mr&&Zr.call(c,"__wrapped__");if(Cr||Fr){var Oe=Cr?i.value():i,de=Fr?c.value():c;return B||(B=new ae),y(Oe,de,O,W,B)}}return Sr?(B||(B=new ae),Oi(i,c,y,O,W,B)):!1}function gi(i,c,y,O){var W=y.length,B=W,J=!O;if(i==null)return!B;for(i=Object(i);W--;){var Q=y[W];if(J&&Q[2]?Q[1]!==i[Q[0]]:!(Q[0]in i))return!1}for(;++W<B;){Q=y[W];var tr=Q[0],dr=i[tr],yr=Q[1];if(J&&Q[2]){if(dr===r&&!(tr in i))return!1}else{var Mr=new ae;if(O)var Sr=O(dr,yr,tr,i,c,Mr);if(!(Sr===r?xt(yr,dr,O,v|h,Mr):Sr))return!1}}return!0}function ua(i){if(!ue(i)||Sn(i))return!1;var c=Ut(i)||pe(i)?qa:zr;return c.test(oe(i))}function tt(i){return $e(i)&&Jt(i.length)&&!!ar[Ge.call(i)]}function fa(i){return typeof i=="function"?i:i==null?xa:typeof i=="object"?Wr(i)?_n(i[0],i[1]):wn(i):Qt(i)}function pi(i){if(!kt(i))return Zn(i);var c=[];for(var y in Object(i))Zr.call(i,y)&&y!="constructor"&&c.push(y);return c}function sa(i){if(!ue(i))return Gi(i);var c=kt(i),y=[];for(var O in i)O=="constructor"&&(c||!Zr.call(i,O))||y.push(O);return y}function wn(i){var c=Ri(i);return c.length==1&&c[0][2]?$n(c[0][0],c[0][1]):function(y){return y===i||gi(y,i,c)}}function _n(i,c){return Et(i)&&da(c)?$n(zt(i),c):function(y){var O=wa(y,i);return O===r&&O===c?Rn(y,i):xt(c,O,r,v|h)}}function xn(i,c,y,O,W){if(i!==c){if(!(Wr(c)||Pt(c)))var B=sa(c);Fe(B||c,function(J,Q){if(B&&(Q=J,J=c[Q]),ue(J))W||(W=new ae),di(i,c,Q,y,xn,O,W);else{var tr=O?O(i[Q],J,Q+"",i,c,W):r;tr===r&&(tr=J),bn(i,Q,tr)}})}}function di(i,c,y,O,W,B,J){var Q=i[y],tr=c[y],dr=J.get(tr);if(dr){bn(i,y,dr);return}var yr=B?B(Q,tr,y+"",i,c,J):r,Mr=yr===r;Mr&&(yr=tr,Wr(tr)||Pt(tr)?Wr(Q)?yr=Q:An(Q)?yr=ha(Q):(Mr=!1,yr=et(tr,!0)):On(tr)||it(tr)?it(Q)?yr=In(Q):!ue(Q)||O&&Ut(Q)?(Mr=!1,yr=et(tr,!0)):yr=Q:Mr=!1),Mr&&(J.set(tr,yr),W(yr,tr,O,B,J),J.delete(tr)),bn(i,y,yr)}function yi(i){return function(c){return qe(c,i)}}function bi(i,c){return c=bt(c===r?i.length-1:c,0),function(){for(var y=arguments,O=-1,W=bt(y.length-c,0),B=Array(W);++O<W;)B[O]=y[c+O];O=-1;for(var J=Array(c+1);++O<c;)J[O]=y[O];return J[c]=B,Me(i,this,J)}}function la(i){if(typeof i=="string")return i;if(Mt(i))return jn?jn.call(i):"";var c=i+"";return c=="0"&&1/i==-p?"-0":c}function En(i){return Wr(i)?i:ya(i)}function mi(i,c){if(c)return i.slice();var y=new i.constructor(i.length);return i.copy(y),y}function kn(i){var c=new i.constructor(i.byteLength);return new Bt(c).set(new Bt(i)),c}function wi(i,c){var y=c?kn(i.buffer):i.buffer;return new i.constructor(y,i.byteOffset,i.byteLength)}function _i(i,c,y){var O=c?y(Se(i),!0):Se(i);return qr(O,le,new i.constructor)}function xi(i){var c=new i.constructor(i.source,Br.exec(i));return c.lastIndex=i.lastIndex,c}function Ei(i,c,y){var O=c?y(Ke(i),!0):Ke(i);return qr(O,Te,new i.constructor)}function ki(i){return wt?Object(wt.call(i)):{}}function ca(i,c){var y=c?kn(i.buffer):i.buffer;return new i.constructor(y,i.byteOffset,i.length)}function ha(i,c){var y=-1,O=i.length;for(c||(c=Array(O));++y<O;)c[y]=i[y];return c}function Mn(i,c,y,O){y||(y={});for(var W=-1,B=c.length;++W<B;){var J=c[W],Q=O?O(y[J],i[J],J,y,i):r;na(y,J,Q===r?i[J]:Q)}return y}function Mi(i,c){return Mn(i,pa(i),c)}function Pi(i){return bi(function(c,y){var O=-1,W=y.length,B=W>1?y[W-1]:r,J=W>2?y[2]:r;for(B=i.length>3&&typeof B=="function"?(W--,B):r,J&&Fi(y[0],y[1],J)&&(B=W<3?r:B,W=1),c=Object(c);++O<W;){var Q=y[O];Q&&i(c,Q,O,B)}return c})}function Si(i,c){return function(y,O){if(y==null)return y;if(!Xe(y))return i(y,O);for(var W=y.length,B=c?W:-1,J=Object(y);(c?B--:++B<W)&&O(J[B],B,J)!==!1;);return y}}function $i(i){return function(c,y,O){for(var W=-1,B=Object(c),J=O(c),Q=J.length;Q--;){var tr=J[i?Q:++W];if(y(B[tr],tr,B)===!1)break}return c}}function va(i,c,y,O,W,B){var J=W&h,Q=i.length,tr=c.length;if(Q!=tr&&!(J&&tr>Q))return!1;var dr=B.get(i);if(dr&&B.get(c))return dr==c;var yr=-1,Mr=!0,Sr=W&v?new _t:r;for(B.set(i,c),B.set(c,i);++yr<Q;){var Cr=i[yr],Fr=c[yr];if(O)var Oe=J?O(Fr,Cr,yr,c,i,B):O(Cr,Fr,yr,i,c,B);if(Oe!==r){if(Oe)continue;Mr=!1;break}if(Sr){if(!Pe(c,function(de,Ie){if(!Sr.has(Ie)&&(Cr===de||y(Cr,de,O,W,B)))return Sr.add(Ie)})){Mr=!1;break}}else if(!(Cr===Fr||y(Cr,Fr,O,W,B))){Mr=!1;break}}return B.delete(i),B.delete(c),Mr}function Ai(i,c,y,O,W,B,J){switch(y){case V:if(i.byteLength!=c.byteLength||i.byteOffset!=c.byteOffset)return!1;i=i.buffer,c=c.buffer;case H:return!(i.byteLength!=c.byteLength||!O(new Bt(i),new Bt(c)));case X:case Y:case b:return at(+i,+c);case d:return i.name==c.name&&i.message==c.message;case E:case M:return i==c+"";case w:var Q=Se;case I:var tr=B&h;if(Q||(Q=Ke),i.size!=c.size&&!tr)return!1;var dr=J.get(i);if(dr)return dr==c;B|=v,J.set(i,c);var yr=va(Q(i),Q(c),O,W,B,J);return J.delete(i),yr;case N:if(wt)return wt.call(i)==wt.call(c)}return!1}function Oi(i,c,y,O,W,B){var J=W&h,Q=Ae(i),tr=Q.length,dr=Ae(c),yr=dr.length;if(tr!=yr&&!J)return!1;for(var Mr=tr;Mr--;){var Sr=Q[Mr];if(!(J?Sr in c:Zr.call(c,Sr)))return!1}var Cr=B.get(i);if(Cr&&B.get(c))return Cr==c;var Fr=!0;B.set(i,c),B.set(c,i);for(var Oe=J;++Mr<tr;){Sr=Q[Mr];var de=i[Sr],Ie=c[Sr];if(O)var Cn=J?O(Ie,de,Sr,c,i,B):O(de,Ie,Sr,i,c,B);if(!(Cn===r?de===Ie||y(de,Ie,O,W,B):Cn)){Fr=!1;break}Oe||(Oe=Sr=="constructor")}if(Fr&&!Oe){var Kt=i.constructor,Vt=c.constructor;Kt!=Vt&&"constructor"in i&&"constructor"in c&&!(typeof Kt=="function"&&Kt instanceof Kt&&typeof Vt=="function"&&Vt instanceof Vt)&&(Fr=!1)}return B.delete(i),B.delete(c),Fr}function Ii(i){return hi(i,Ae,pa)}function ga(){var i=fr.iteratee||Ln;return i=i===Ln?fa:i,arguments.length?i(arguments[0],arguments[1]):i}function Yt(i,c){var y=i.__data__;return Dt(c)?y[typeof c=="string"?"string":"hash"]:y.map}function Ri(i){for(var c=Ae(i),y=c.length;y--;){var O=c[y],W=i[O];c[y]=[O,W,da(W)]}return c}function nt(i,c){var y=dt(i,c);return ua(y)?y:r}var pa=Qn?yt(Qn,Object):$t,ie=oa;(hn&&ie(new hn(new ArrayBuffer(1)))!=V||Ve&&ie(new Ve)!=w||vn&&ie(vn.resolve())!=P||gn&&ie(new gn)!=I||pn&&ie(new pn)!=z)&&(ie=function(i){var c=Ge.call(i),y=c==$?i.constructor:r,O=y?oe(y):r;if(O)switch(O){case Kn:return V;case za:return w;case Vn:return P;case Wa:return I;case Ha:return z}return c});function Li(i,c,y){c=Et(c,i)?[c]:En(c);for(var O,W=-1,J=c.length;++W<J;){var B=zt(c[W]);if(!(O=i!=null&&y(i,B)))break;i=i[B]}if(O)return O;var J=i?i.length:0;return!!J&&Jt(J)&&Pn(B,J)&&(Wr(i)||it(i))}function Ci(i){var c=i.length,y=i.constructor(c);return c&&typeof i[0]=="string"&&Zr.call(i,"index")&&(y.index=i.index,y.input=i.input),y}function Ni(i){return typeof i.constructor=="function"&&!kt(i)?aa(Un(i)):{}}function Ti(i,c,y,O){var W=i.constructor;switch(c){case H:return kn(i);case X:case Y:return new W(+i);case V:return wi(i,O);case rr:case j:case Pr:case $r:case Ar:case Rr:case Gr:case Lr:case Tr:return ca(i,O);case w:return _i(i,O,y);case b:case M:return new W(i);case E:return xi(i);case I:return Ei(i,O,y);case N:return ki(i)}}function Pn(i,c){return c=c??k,!!c&&(typeof i=="number"||Or.test(i))&&i>-1&&i%1==0&&i<c}function Fi(i,c,y){if(!ue(y))return!1;var O=typeof c;return(O=="number"?Xe(y)&&Pn(c,y.length):O=="string"&&c in y)?at(y[c],i):!1}function Et(i,c){if(Wr(i))return!1;var y=typeof i;return y=="number"||y=="symbol"||y=="boolean"||i==null||Mt(i)?!0:Jr.test(i)||!cr.test(i)||c!=null&&i in Object(c)}function Dt(i){var c=typeof i;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?i!=="__proto__":i===null}function Sn(i){return!!zn&&zn in i}function kt(i){var c=i&&i.constructor,y=typeof c=="function"&&c.prototype||Ft;return i===y}function da(i){return i===i&&!ue(i)}function $n(i,c){return function(y){return y==null?!1:y[i]===c&&(c!==r||i in Object(y))}}function Gi(i){var c=[];if(i!=null)for(var y in Object(i))c.push(y);return c}var ya=Wt(function(i){i=St(i);var c=[];return ur.test(i)&&c.push(""),i.replace(xr,function(y,O,W,B){c.push(W?B.replace(ke,"$1"):O||y)}),c});function zt(i){if(typeof i=="string"||Mt(i))return i;var c=i+"";return c=="0"&&1/i==-p?"-0":c}function oe(i){if(i!=null){try{return Gt.call(i)}catch{}try{return i+""}catch{}}return""}function Bi(i){for(var c=-1,y=i?i.length:0,O=0,W=[];++c<y;){var B=i[c];B&&(W[O++]=B)}return W}function ba(i,c){var y=Wr(i)?Fe:ia;return y(i,ga(c,3))}function Wt(i,c){if(typeof i!="function"||c&&typeof c!="function")throw new TypeError(u);var y=function(){var O=arguments,W=c?c.apply(this,O):O[0],B=y.cache;if(B.has(W))return B.get(W);var J=i.apply(this,O);return y.cache=B.set(W,J),J};return y.cache=new(Wt.Cache||ce),y}Wt.Cache=ce;function qi(i){return et(i,!1,!0)}function at(i,c){return i===c||i!==i&&c!==c}function it(i){return An(i)&&Zr.call(i,"callee")&&(!cn.call(i,"callee")||Ge.call(i)==L)}var Wr=Array.isArray;function Xe(i){return i!=null&&Jt(i.length)&&!Ut(i)}function An(i){return $e(i)&&Xe(i)}var Ht=Ya||Zt;function ma(i){if(Xe(i)&&(Wr(i)||typeof i=="string"||typeof i.splice=="function"||Ht(i)||it(i)))return!i.length;var c=ie(i);if(c==w||c==I)return!i.size;if(Da||kt(i))return!Zn(i).length;for(var y in i)if(Zr.call(i,y))return!1;return!0}function Ut(i){var c=ue(i)?Ge.call(i):"";return c==F||c==D}function Jt(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=k}function ue(i){var c=typeof i;return!!i&&(c=="object"||c=="function")}function $e(i){return!!i&&typeof i=="object"}function On(i){if(!$e(i)||Ge.call(i)!=$||pe(i))return!1;var c=Un(i);if(c===null)return!0;var y=Zr.call(c,"constructor")&&c.constructor;return typeof y=="function"&&y instanceof y&&Gt.call(y)==Ba}function Mt(i){return typeof i=="symbol"||$e(i)&&Ge.call(i)==N}var Pt=jr?Ze(jr):tt;function In(i){return Mn(i,_a(i))}function St(i){return i==null?"":la(i)}function wa(i,c,y){var O=i==null?r:qe(i,c);return O===r?y:O}function Rn(i,c){return i!=null&&Li(i,c,vi)}function Ae(i){return Xe(i)?ta(i):pi(i)}function _a(i){return Xe(i)?ta(i,!0):sa(i)}var Xi=Pi(function(i,c,y){xn(i,c,y)});function xa(i){return i}function Ln(i){return fa(typeof i=="function"?i:et(i,!0))}function Qt(i){return Et(i)?Je(zt(i)):yi(i)}function $t(){return[]}function Zt(){return!1}fr.compact=Bi,fr.iteratee=Ln,fr.keys=Ae,fr.keysIn=_a,fr.memoize=Wt,fr.merge=Xi,fr.property=Qt,fr.toPlainObject=In,fr.clone=qi,fr.eq=at,fr.forEach=ba,fr.get=wa,fr.hasIn=Rn,fr.identity=xa,fr.isArguments=it,fr.isArray=Wr,fr.isArrayLike=Xe,fr.isArrayLikeObject=An,fr.isBuffer=Ht,fr.isEmpty=ma,fr.isFunction=Ut,fr.isLength=Jt,fr.isObject=ue,fr.isObjectLike=$e,fr.isPlainObject=On,fr.isSymbol=Mt,fr.isTypedArray=Pt,fr.stubArray=$t,fr.stubFalse=Zt,fr.toString=St,fr.each=ba,fr.VERSION=n,ne&&((ne.exports=fr)._=fr,Ue._=fr)}).call(Rt)})(La,La.exports);var Nc=La.exports,Tc=Sa;function Sa(t,e){var r=t&&t.type,n;if(r==="FeatureCollection")for(n=0;n<t.features.length;n++)Sa(t.features[n],e);else if(r==="GeometryCollection")for(n=0;n<t.geometries.length;n++)Sa(t.geometries[n],e);else if(r==="Feature")Sa(t.geometry,e);else if(r==="Polygon")Mu(t.coordinates,e);else if(r==="MultiPolygon")for(n=0;n<t.coordinates.length;n++)Mu(t.coordinates[n],e);return t}function Mu(t,e){if(t.length!==0){Pu(t[0],e);for(var r=1;r<t.length;r++)Pu(t[r],!e)}}function Pu(t,e){for(var r=0,n=0,o=0,u=t.length,l=u-1;o<u;l=o++){var v=(t[o][0]-t[l][0])*(t[l][1]+t[o][1]),h=r+v;n+=Math.abs(r)>=Math.abs(v)?r-h+v:v-h+r,r=h}r+n>=0!=!!e&&t.reverse()}const Fc=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var Gc=Fc,nr=Nc,Pa=Tc,$a={};Gc.forEach(function(t){if(t.polygon==="all")$a[t.key]=!0;else{var e=t.polygon==="whitelist"?"included_values":"excluded_values",r={};t.values.forEach(function(n){r[n]=!0}),$a[t.key]={},$a[t.key][e]=r}});function Bc(t,e){return(t.version||e.version)&&t.version!==e.version?(+t.version||0)>(+e.version||0)?t:e:nr.merge(t,e)}var Ca={};Ca=function(t,e,r){e=nr.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:$a,deduplicator:Bc},e);var n;return typeof XMLDocument<"u"&&t instanceof XMLDocument||typeof XMLDocument>"u"&&t.childNodes?n=u(t):n=o(t),n;function o(h){var p=new Array,k=new Array,L=new Array;function C(P){var E=nr.clone(P);E.lat=P.center.lat,E.lon=P.center.lon,E.__is_center_placeholder=!0,p.push(E)}function X(P){var E=nr.clone(P);E.nodes=[];function I(M,N,z){var H={type:"node",id:"_"+E.type+"/"+E.id+"bounds"+z,lat:M,lon:N};E.nodes.push(H.id),p.push(H)}I(E.bounds.minlat,E.bounds.minlon,1),I(E.bounds.maxlat,E.bounds.minlon,2),I(E.bounds.maxlat,E.bounds.maxlon,3),I(E.bounds.minlat,E.bounds.maxlon,4),E.nodes.push(E.nodes[0]),E.__is_bounds_placeholder=!0,k.push(E)}function Y(P){function E(I,M,N){var z={type:"node",id:N,lat:I,lon:M};p.push(z)}nr.isArray(P.nodes)||(P.nodes=P.geometry.map(function(I){return I!==null?"_anonymous@"+I.lat+"/"+I.lon:"_anonymous@unknown_location"})),P.geometry.forEach(function(I,M){I&&E(I.lat,I.lon,P.nodes[M])})}function d(P){function E(M,N,z){var H={type:"node",id:z,lat:M,lon:N};p.push(H)}function I(M,N){if(k.some(function(V){return V.type=="way"&&V.id==N}))return;var z={type:"way",id:N,nodes:[]};function H(V,rr){var j={type:"node",id:"_anonymous@"+V+"/"+rr,lat:V,lon:rr};z.nodes.push(j.id),p.push(j)}M.forEach(function(V){V?H(V.lat,V.lon):z.nodes.push(void 0)}),k.push(z)}P.members.forEach(function(M,N){M.type=="node"?M.lat&&E(M.lat,M.lon,M.ref):M.type=="way"&&M.geometry&&(M.ref="_fullGeom"+M.ref,I(M.geometry,M.ref))})}for(var F=0;F<h.elements.length;F++)switch(h.elements[F].type){case"node":var D=h.elements[F];p.push(D);break;case"way":var w=nr.clone(h.elements[F]);w.nodes=nr.clone(w.nodes),k.push(w),w.center&&C(w),w.geometry?Y(w):w.bounds&&X(w);break;case"relation":var b=nr.clone(h.elements[F]);b.members=nr.clone(b.members),L.push(b);var $=b.members&&b.members.some(function(P){return P.type=="node"&&P.lat||P.type=="way"&&P.geometry&&P.geometry.length>0});b.center&&C(b),$?d(b):b.bounds&&X(b);break}return l(p,k,L)}function u(h){var p=new Array,k=new Array,L=new Array;function C(b,$,P){b.hasAttribute(P)&&($[P]=b.getAttribute(P))}function X(b,$){var P=nr.clone(b);C($,P,"lat"),C($,P,"lon"),P.__is_center_placeholder=!0,p.push(P)}function Y(b,$){var P=nr.clone(b);P.nodes=[];function E(I,M,N){var z={type:"node",id:"_"+P.type+"/"+P.id+"bounds"+N,lat:I,lon:M};P.nodes.push(z.id),p.push(z)}E($.getAttribute("minlat"),$.getAttribute("minlon"),1),E($.getAttribute("maxlat"),$.getAttribute("minlon"),2),E($.getAttribute("maxlat"),$.getAttribute("maxlon"),3),E($.getAttribute("minlat"),$.getAttribute("maxlon"),4),P.nodes.push(P.nodes[0]),P.__is_bounds_placeholder=!0,k.push(P)}function d(b,$){function P(E,I,M){var N={type:"node",id:M,lat:E,lon:I};return p.push(N),N.id}nr.isArray(b.nodes)||(b.nodes=[],nr.each($,function(E,I){b.nodes.push("_anonymous@"+E.getAttribute("lat")+"/"+E.getAttribute("lon"))})),nr.each($,function(E,I){E.getAttribute("lat")&&P(E.getAttribute("lat"),E.getAttribute("lon"),b.nodes[I])})}function F(b,$){function P(I,M,N){var z={type:"node",id:N,lat:I,lon:M};p.push(z)}function E(I,M){if(k.some(function(H){return H.type=="way"&&H.id==M}))return;var N={type:"way",id:M,nodes:[]};function z(H,V){var rr={type:"node",id:"_anonymous@"+H+"/"+V,lat:H,lon:V};N.nodes.push(rr.id),p.push(rr)}nr.each(I,function(H){H.getAttribute("lat")?z(H.getAttribute("lat"),H.getAttribute("lon")):N.nodes.push(void 0)}),k.push(N)}nr.each($,function(I,M){b.members[M].type=="node"?I.getAttribute("lat")&&P(I.getAttribute("lat"),I.getAttribute("lon"),b.members[M].ref):b.members[M].type=="way"&&I.getElementsByTagName("nd").length>0&&(b.members[M].ref="_fullGeom"+b.members[M].ref,E(I.getElementsByTagName("nd"),b.members[M].ref))})}nr.each(h.getElementsByTagName("node"),function(b,$){var P={};nr.each(b.getElementsByTagName("tag"),function(I){P[I.getAttribute("k")]=I.getAttribute("v")});var E={type:"node"};C(b,E,"id"),C(b,E,"lat"),C(b,E,"lon"),C(b,E,"version"),C(b,E,"timestamp"),C(b,E,"changeset"),C(b,E,"uid"),C(b,E,"user"),nr.isEmpty(P)||(E.tags=P),p.push(E)});var D,w;return nr.each(h.getElementsByTagName("way"),function(b,$){var P={},E=[];nr.each(b.getElementsByTagName("tag"),function(N){P[N.getAttribute("k")]=N.getAttribute("v")});var I=!1;nr.each(b.getElementsByTagName("nd"),function(N,z){var H;(H=N.getAttribute("ref"))&&(E[z]=H),!I&&N.getAttribute("lat")&&(I=!0)});var M={type:"way"};C(b,M,"id"),C(b,M,"version"),C(b,M,"timestamp"),C(b,M,"changeset"),C(b,M,"uid"),C(b,M,"user"),E.length>0&&(M.nodes=E),nr.isEmpty(P)||(M.tags=P),(D=b.getElementsByTagName("center")[0])&&X(M,D),I?d(M,b.getElementsByTagName("nd")):(w=b.getElementsByTagName("bounds")[0])&&Y(M,w),k.push(M)}),nr.each(h.getElementsByTagName("relation"),function(b,$){var P={},E=[];nr.each(b.getElementsByTagName("tag"),function(N){P[N.getAttribute("k")]=N.getAttribute("v")});var I=!1;nr.each(b.getElementsByTagName("member"),function(N,z){E[z]={},C(N,E[z],"ref"),C(N,E[z],"role"),C(N,E[z],"type"),(!I&&E[z].type=="node"&&N.getAttribute("lat")||E[z].type=="way"&&N.getElementsByTagName("nd").length>0)&&(I=!0)});var M={type:"relation"};C(b,M,"id"),C(b,M,"version"),C(b,M,"timestamp"),C(b,M,"changeset"),C(b,M,"uid"),C(b,M,"user"),E.length>0&&(M.members=E),nr.isEmpty(P)||(M.tags=P),(D=b.getElementsByTagName("center")[0])&&X(M,D),I?F(M,b.getElementsByTagName("member")):(w=b.getElementsByTagName("bounds")[0])&&Y(M,w),L.push(M)}),l(p,k,L)}function l(h,p,k){function L(cr,Jr){if(typeof Jr!="object"&&(Jr={}),typeof e.uninterestingTags=="function")return!e.uninterestingTags(cr,Jr);for(var ur in cr)if(e.uninterestingTags[ur]!==!0&&!(Jr[ur]===!0||Jr[ur]===cr[ur]))return!0;return!1}function C(cr){var Jr={timestamp:cr.timestamp,version:cr.version,changeset:cr.changeset,user:cr.user,uid:cr.uid};for(var ur in Jr)Jr[ur]===void 0&&delete Jr[ur];return Jr}for(var X=new Object,Y=new Object,d=0;d<h.length;d++){var F=h[d];X[F.id]!==void 0&&(F=e.deduplicator(F,X[F.id])),X[F.id]=F,typeof F.tags<"u"&&L(F.tags)&&(Y[F.id]=!0)}for(var d=0;d<k.length;d++)if(nr.isArray(k[d].members))for(var D=0;D<k[d].members.length;D++)k[d].members[D].type=="node"&&(Y[k[d].members[D].ref]=!0);for(var w=new Object,b=new Object,d=0;d<p.length;d++){var $=p[d];if(w[$.id]&&($=e.deduplicator($,w[$.id])),w[$.id]=$,nr.isArray($.nodes))for(var D=0;D<$.nodes.length;D++)typeof $.nodes[D]!="object"&&(b[$.nodes[D]]=!0,$.nodes[D]=X[$.nodes[D]])}var P=new Array;for(var E in X){var F=X[E];(!b[E]||Y[E])&&P.push(F)}for(var I=new Array,d=0;d<k.length;d++){var M=k[d];I[M.id]&&(M=e.deduplicator(M,I[M.id])),I[M.id]=M}var N={node:{},way:{},relation:{}};for(var E in I){var M=I[E];if(!nr.isArray(M.members)){e.verbose&&console.warn("Relation",M.type+"/"+M.id,"ignored because it has no members");continue}for(var D=0;D<M.members.length;D++){var z=M.members[D].type,H=M.members[D].ref;if(typeof H!="number"&&(H=H.replace("_fullGeom","")),!N[z]){e.verbose&&console.warn("Relation",M.type+"/"+M.id,"member",z+"/"+H,"ignored because it has an invalid type");continue}typeof N[z][H]>"u"&&(N[z][H]=[]),N[z][H].push({role:M.members[D].role,rel:M.id,reltags:M.tags})}}var V,rr=[];for(d=0;d<P.length;d++){if(typeof P[d].lon>"u"||typeof P[d].lat>"u"){e.verbose&&console.warn("POI",P[d].type+"/"+P[d].id,"ignored because it lacks coordinates");continue}var j={type:"Feature",id:P[d].type+"/"+P[d].id,properties:{type:P[d].type,id:P[d].id,tags:P[d].tags||{},relations:N.node[P[d].id]||[],meta:C(P[d])},geometry:{type:"Point",coordinates:[+P[d].lon,+P[d].lat]}};P[d].__is_center_placeholder&&(j.properties.geometry="center"),r?r(j):rr.push(j)}for(var Pr=[],$r=[],d=0;d<k.length;d++)if(I[k[d].id]===k[d]){if(typeof k[d].tags<"u"&&(k[d].tags.type=="route"||k[d].tags.type=="waterway")){let Jr=function(ur){var xr=!1,se;se=ur.members.filter(function(Or){return Or.type==="way"}),se=se.map(function(Or){var ar=w[Or.ref];if(ar===void 0||ar.nodes===void 0){e.verbose&&console.warn("Route "+ur.type+"/"+ur.id,"tainted by a missing or incomplete  way",Or.type+"/"+Or.ref),xr=!0;return}return{id:Or.ref,role:Or.role,way:ar,nodes:ar.nodes.filter(function(hr){return hr!==void 0?!0:(xr=!0,e.verbose&&console.warn("Route",ur.type+"/"+ur.id,"tainted by a way",Or.type+"/"+Or.ref,"with a missing node"),!1)})}}),se=nr.compact(se);var ke;ke=ao(se);var Br=[];if(Br=nr.compact(ke.map(function(Or){return nr.compact(Or.map(function(ar){return[+ar.lon,+ar.lat]}))})),Br.length==0)return e.verbose&&console.warn("Route",ur.type+"/"+ur.id,"contains no coordinates"),!1;var zr={type:"Feature",id:ur.type+"/"+ur.id,properties:{type:ur.type,id:ur.id,tags:ur.tags||{},relations:N[ur.type][ur.id]||[],meta:C(ur)},geometry:{type:Br.length===1?"LineString":"MultiLineString",coordinates:Br.length===1?Br[0]:Br}};return xr&&(e.verbose&&console.warn("Route",ur.type+"/"+ur.id,"is tainted"),zr.properties.tainted=!0),zr};if(!nr.isArray(k[d].members)){e.verbose&&console.warn("Route",k[d].type+"/"+k[d].id,"ignored because it has no members");continue}if(k[d].members.forEach(function(ur){w[ur.ref]&&!L(w[ur.ref].tags)&&(w[ur.ref].is_skippablerelationmember=!0)}),j=Jr(k[d]),j===!1){e.verbose&&console.warn("Route relation",k[d].type+"/"+k[d].id,"ignored because it has invalid geometry");continue}r?r(Pa(j)):$r.push(j)}if(typeof k[d].tags<"u"&&(k[d].tags.type=="multipolygon"||k[d].tags.type=="boundary")){let ur=function(xr,se){var ke=!1,Br=Rr?"way":"relation",zr=typeof xr.id=="number"?xr.id:+xr.id.replace("_fullGeom",""),Or;Or=se.members.filter(function(Er){return Er.type==="way"}),Or=Or.map(function(Er){var jr=w[Er.ref];if(jr===void 0||jr.nodes===void 0){e.verbose&&console.warn("Multipolygon",Br+"/"+zr,"tainted by a missing or incomplete way",Er.type+"/"+Er.ref),ke=!0;return}return{id:Er.ref,role:Er.role||"outer",way:jr,nodes:jr.nodes.filter(function(le){return le!==void 0?!0:(ke=!0,e.verbose&&console.warn("Multipolygon",Br+"/"+zr,"tainted by a way",Er.type+"/"+Er.ref,"with a missing node"),!1)})}}),Or=nr.compact(Or);var ar,hr;ar=ao(Or.filter(function(Er){return Er.role==="outer"})),hr=ao(Or.filter(function(Er){return Er.role==="inner"}));var He;function gt(Er){var jr=function(ge,qr){for(var Pe=0;Pe<qr.length;Pe++)if(Te(qr[Pe],ge))return!0;return!1},le=function(ge){return ge.map(function(qr){return[+qr.lat,+qr.lon]})},Te=function(ge,qr){for(var Pe=ge[0],Je=ge[1],Qe=!1,Ze=0,dt=qr.length-1;Ze<qr.length;dt=Ze++){var pe=qr[Ze][0],Se=qr[Ze][1],yt=qr[dt][0],Ke=qr[dt][1],Tt=Se>Je!=Ke>Je&&Pe<(yt-pe)*(Je-Se)/(Ke-Se)+pe;Tt&&(Qe=!Qe)}return Qe},Me,Fe;for(Er=le(Er),Me=0;Me<ar.length;Me++)if(Fe=le(ar[Me]),jr(Fe,Er))return Me}He=ar.map(function(Er){return[Er]});for(var Qr=0;Qr<hr.length;Qr++){var Ue=gt(hr[Qr]);Ue!==void 0?He[Ue].push(hr[Qr]):e.verbose&&console.warn("Multipolygon",Br+"/"+zr,"contains an inner ring with no containing outer")}var ne=[];if(ne=nr.compact(He.map(function(Er){var jr=nr.compact(Er.map(function(le){if(le.length<4){e.verbose&&console.warn("Multipolygon",Br+"/"+zr,"contains a ring with less than four nodes");return}return nr.compact(le.map(function(Te){return[+Te.lon,+Te.lat]}))}));if(jr.length==0){e.verbose&&console.warn("Multipolygon",Br+"/"+zr,"contains an empty ring cluster");return}return jr})),ne.length==0)return e.verbose&&console.warn("Multipolygon",Br+"/"+zr,"contains no coordinates"),!1;var Ne="MultiPolygon";ne.length===1&&(Ne="Polygon",ne=ne[0]);var pt={type:"Feature",id:xr.type+"/"+zr,properties:{type:xr.type,id:zr,tags:xr.tags||{},relations:N[xr.type][xr.id]||[],meta:C(xr)},geometry:{type:Ne,coordinates:ne}};return ke&&(e.verbose&&console.warn("Multipolygon",Br+"/"+zr,"is tainted"),pt.properties.tainted=!0),pt};if(!nr.isArray(k[d].members)){e.verbose&&console.warn("Multipolygon",k[d].type+"/"+k[d].id,"ignored because it has no members");continue}for(var Ar=0,D=0;D<k[d].members.length;D++)k[d].members[D].role=="outer"?Ar++:e.verbose&&k[d].members[D].role!="inner"&&console.warn("Multipolygon",k[d].type+"/"+k[d].id,"member",k[d].members[D].type+"/"+k[d].members[D].ref,'ignored because it has an invalid role: "'+k[d].members[D].role+'"');if(k[d].members.forEach(function(xr){w[xr.ref]&&(xr.role==="outer"&&!L(w[xr.ref].tags,k[d].tags)&&(w[xr.ref].is_skippablerelationmember=!0),xr.role==="inner"&&!L(w[xr.ref].tags)&&(w[xr.ref].is_skippablerelationmember=!0))}),Ar==0){e.verbose&&console.warn("Multipolygon relation",k[d].type+"/"+k[d].id,"ignored because it has no outer ways");continue}var Rr=!1;Ar==1&&!L(k[d].tags,{type:!0})&&(Rr=!0);var j=null;if(!Rr)j=ur(k[d],k[d]);else{var Gr=k[d].members.filter(function(xr){return xr.role==="outer"})[0];if(Gr=w[Gr.ref],Gr===void 0){e.verbose&&console.warn("Multipolygon relation",k[d].type+"/"+k[d].id,"ignored because outer way",Gr.type+"/"+Gr.ref,"is missing");continue}Gr.is_skippablerelationmember=!0,j=ur(Gr,k[d])}if(j===!1){e.verbose&&console.warn("Multipolygon relation",k[d].type+"/"+k[d].id,"ignored because it has invalid geometry");continue}r?r(Pa(j)):$r.push(j)}}for(var d=0;d<p.length;d++)if(w[p[d].id]===p[d]){if(!nr.isArray(p[d].nodes)){e.verbose&&console.warn("Way",p[d].type+"/"+p[d].id,"ignored because it has no nodes");continue}if(!p[d].is_skippablerelationmember){typeof p[d].id!="number"&&(p[d].id=+p[d].id.replace("_fullGeom","")),p[d].tainted=!1,p[d].hidden=!1;var Lr=new Array;for(D=0;D<p[d].nodes.length;D++)typeof p[d].nodes[D]=="object"?Lr.push([+p[d].nodes[D].lon,+p[d].nodes[D].lat]):(e.verbose&&console.warn("Way",p[d].type+"/"+p[d].id,"is tainted by an invalid node"),p[d].tainted=!0);if(Lr.length<=1){e.verbose&&console.warn("Way",p[d].type+"/"+p[d].id,"ignored because it contains too few nodes");continue}var Tr="LineString";typeof p[d].nodes[0]<"u"&&typeof p[d].nodes[p[d].nodes.length-1]<"u"&&p[d].nodes[0].id===p[d].nodes[p[d].nodes.length-1].id&&(typeof p[d].tags<"u"&&v(p[d].tags)||p[d].__is_bounds_placeholder)&&(Tr="Polygon",Lr=[Lr]);var j={type:"Feature",id:p[d].type+"/"+p[d].id,properties:{type:p[d].type,id:p[d].id,tags:p[d].tags||{},relations:N.way[p[d].id]||[],meta:C(p[d])},geometry:{type:Tr,coordinates:Lr}};p[d].tainted&&(e.verbose&&console.warn("Way",p[d].type+"/"+p[d].id,"is tainted"),j.properties.tainted=!0),p[d].__is_bounds_placeholder&&(j.properties.geometry="bounds"),r?r(Pa(j)):Tr=="LineString"?Pr.push(j):$r.push(j)}}return r?!0:(V={type:"FeatureCollection",features:[]},V.features=V.features.concat($r),V.features=V.features.concat(Pr),V.features=V.features.concat(rr),e.flatProperties&&V.features.forEach(function(cr){cr.properties=nr.merge(cr.properties.meta,cr.properties.tags,{id:cr.properties.type+"/"+cr.properties.id})}),V=Pa(V),V)}function v(h){var p=e.polygonFeatures;if(typeof p=="function")return p(h);if(h.area==="no")return!1;for(var k in h){var L=h[k],C=p[k];if(!(typeof C>"u")&&L!=="no"&&(C===!0||C.included_values&&C.included_values[L]===!0||C.excluded_values&&C.excluded_values[L]!==!0))return!0}return!1}};function ao(t){for(var e=function(L){return L[0]},r=function(L){return L[L.length-1]},n=function(L,C){return L!==void 0&&C!==void 0&&L.id===C.id},o=[],u,l,v,h,p,k;t.length;)for(u=t.pop().nodes.slice(),o.push(u);t.length&&!n(e(u),r(u));){for(l=e(u),v=r(u),h=0;h<t.length;h++)if(k=t[h].nodes,n(v,e(k))){p=u.push,k=k.slice(1);break}else if(n(v,r(k))){p=u.push,k=k.slice(0,-1).reverse();break}else if(n(l,r(k))){p=u.unshift,k=k.slice(0,-1);break}else if(n(l,e(k))){p=u.unshift,k=k.slice(1).reverse();break}else k=p=null;if(!k)break;t.splice(h,1),p.apply(u,k)}return o}Ca.toGeojson=Ca;var qc=Ca;const Xc=go(qc),vo={green:[.8986078196513652,.29469765981888985,-.032029867458429805,.0018551701773920994,-5886489790163256e-20,1070962065384032e-21,-11166446779717697e-24,6207738674465262e-26,-14267436581703006e-29],fairway:[1.7584282877168174,.04250904605668524,-.0007423764507829129,6569707153764233e-21,-30977756632711525e-24,8367957576883257e-26,-13050071116108684e-29,10972673814800688e-32,-38663295195090656e-36],rough:[1.8916873419240754,.04627672970406796,-.0008446903788844877,8018411520958444e-21,-41372650027143274e-24,12324504918216484e-26,-21202021781645599e-29,19583437507064683e-32,-7525901826011706e-35],bunker:[2.220352744173441,.018980154368388916,-9437083112133279e-20,-36850669792042787e-23,6611615157465972e-24,-30244113540371936e-27,6619732255619124e-29,-713238060773297e-31,30311272989590774e-36],recovery:[3.307362086547302,.010609031555978476,-2560678610039765e-20,-8095622682925617e-22,7504655372784836e-24,-2721007124468904e-26,49428875618964227e-30,-44627338757642523e-33,15865514824311754e-36],tee:[-3.5788887026946,.18058363894139925,-.001891979789983763,9130820506854418e-21,-1745801357834769e-23,-11014332225511787e-27,10006598437385122e-29,-14956128989260208e-32,7418617737686934e-35],penalty:[2.758428287716816,.042509046056685255,-.0007423764507829126,6569707153764227e-21,-30977756632711486e-24,8367957576883243e-26,-13050071116108656e-29,10972673814800659e-32,-3866329519509051e-35],out_of_bounds:[3.7584282877168107,.042509046056685505,-.0007423764507829175,6569707153764276e-21,-3097775663271175e-23,8367957576883327e-26,-13050071116108808e-29,10972673814800805e-32,-386632951950911e-34]},Su={water_hazard:"penalty",lateral_water_hazard:"penalty",driving_range:"penalty",clubhouse:"penalty"},$u={green:{coeffs:[[1.000201369198856,-.017643532744055317,.09303020226131234,-.13693668008804696],[1.4244133445617677,-.5917358227287367,.10764472109007754,-.008596453203824841,21470729177791603e-22,5127337399940156e-20,-37894361127000674e-22,11604473386399543e-23,-13396353394714865e-25],[.05946821424580236,-.002121942064388387]],domains:[[0,.88],[.88,22.78],[15.87,22.78]]}},ju={STROKES_GAINED:"Strokes Gained",TARGET:"Best Aim"},Yc="https://overpass-api.de/api/interpreter",Dc="https://nominatim.openstreetmap.org/search?q=";function ah(t){return new Promise(e=>setTimeout(e,t))}function zc(t,e){localStorage.setItem(t,JSON.stringify({...e}))}function rf(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch{return}}function Wc(t){localStorage.removeItem(t)}function $o(t){return`courseData-${t.name}-${t.id}`}function ih(t){return fetch(`${Dc}${encodeURIComponent(t)}&format=json&namedetails=1`).then(function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>e.filter(r=>r.type=="golf_course")).catch(function(e){console.error("Error:",e)})}function Au(t,e){let r={method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"*"},body:`data=${encodeURIComponent(t)}`};return console.debug("Querying for data from OSM under key "+e),fetch(Yc,r).then(n=>n.ok?n.json():Promise.reject(new Error("Request failed: HTTP "+n.status))).then(n=>(console.debug("Succesfully downloaded OSM polys, starting processing"),n=Xc(n),n=Jc(n),n.features.length>0?(console.debug("Succesfully processed OSM polys, caching as "+e),zc(e,n),n):Promise.reject(new Error("No polygons returned")))).catch(n=>console.error(n))}function oh(t,e){if(t){if(!(t.name||t.id))throw console.error("Cannot fetch from OSM with no course identifiers"),new Error("Must provide either name or id")}else throw console.error("Cannot fetch from OSM with no course"),new Error("Must provide a courseParams");let r=t.name,n=t.id,o=$o(t),u=rf(o);if(!e&&u)return Promise.resolve(u);let l="";if(n){let v=n.split("-"),h=v[1],p=v[2];return l=`[out:json];
        (${h}(${p});)-> .bound;
        (.bound;map_to_area;)->.golf_area;
        (way(area.golf_area)[golf];
        relation(area.golf_area)[golf];
        way(area.golf_area)[leisure=golf_course];
        relation(area.golf_area)[leisure=golf_course];
        .bound;
        );
        out geom;`,Au(l,o)}else r&&(l=`[out:json];
        area[name="${r}"][leisure=golf_course]->.golf_area;
        (way(area.golf_area)[golf];
        relation(area.golf_area)[golf];
        way[name="${r}"][leisure=golf_course];
        relation[name="${r}"][leisure=golf_course];
        );
        out geom;`);return Au(l,o)}function sn(t){let e=$o(t),r=rf(e);return r||(console.warn("Course has no polys or not found"),Error("No data available"))}function ef(t,e){let r=sn(t);return r instanceof Error?r:Po(r,{golf:"hole",ref:e+1}).features[0]}function Hc(t,e){let r=sn(t);if(r instanceof Error)return r;let n=ef(t,e);if(n instanceof Error){let o="Bad data set from OSM";throw console.error(o),Wc($o(t)),new Error(o)}if(!n){let u=`No hole line found for course ${t.name} hole ${e}`;throw console.warn(u),new Error(u)}return Vc(r,n)}function Uc(t,e){let r=Hc(t,e);return r instanceof Error?r:Po(r,{terrainType:"green"})}function uh(t,e){const r=Uc(t,e);return Yn(r).geometry.coordinates}function Jc(t){for(let e of t.features){let r=e.properties;r.golf&&r.golf in Su?r.terrainType=Su[r.golf]:r.golf&&(r.terrainType=r.golf in vo?r.golf:"rough"),typeof r.par=="string"&&(r.par=Number(r.par)),typeof r.ref=="string"&&(r.ref=Number(r.ref)),typeof r.handicap=="string"&&(r.handicap=Number(r.handicap))}return Qc(t),t}function Qc(t){const e=["green","tee","bunker","fairway","hazard","penalty"];return t.features.sort((r,n)=>{let o=e.indexOf(r.properties.terrainType),u=e.indexOf(n.properties.terrainType);return o===-1&&(o=e.length),u===-1&&(u=e.length),o-u}),t}function tf(t){return Po(t,{leisure:"golf_course"})}function nf(t){let e=[...t];return e.reverse(),[e.slice(0,2),e.slice(2)]}function fh(t){let e=sn(t);if(!(e instanceof Error))return nf(re(e))}function sh(t,e){let r=ef(t,e);if(!(r instanceof Error)&&r)return nf(re(r))}function Fa(t,e,r){if(r||(r=tf(e)),r.features.every(n=>!Dr(t,n)))return"out_of_bounds";for(let n of e.features)if(dl(n)==="Polygon"&&Dr(t,n)&&n.properties.terrainType)return n.properties.terrainType;return"rough"}function af(t,e){let r=2e3;e!=null&&e.maximum_cells&&(r=e.maximum_cells);const n=re(t),o=Math.sqrt(Ol(t)/(r*(3*Math.sqrt(3)/2)))/1e3,u=.16/1e3,l=10/1e3,v=Math.min(Math.max(u,o),l);return Ic(n,v,{units:"kilometers",mask:t})}function Zc(t,e,r=0){const n=1/(t*Math.sqrt(2*Math.PI)),o=-((e-r)**2)/(2*t**2);return n*Math.exp(o)}function of(t,e,r){let n=0;t.features.forEach(o=>{const u=Ce(Yn(o),e,{units:"kilometers"})*1e3;let l=Zc(r,u);o.properties.probability=l,o.properties.distanceToAim=u,n+=l}),t.features.forEach(o=>{o.properties.probability=o.properties.probability/n})}function Kc(t,e){if(!(e in $u))return console.debug("Skip: No holeout polynomial for terrainType "+e),0;const r=$u[e];let n;for(let l=0;l<r.domains.length;l++)if(t>=r.domains[l][0]&&t<=r.domains[l][1]){n=l;break}if(n===void 0)return console.error("Distance to hole is outside the supported range."),0;let u=r.coeffs[n].reduce((l,v,h)=>l+v*Math.pow(t,h),0);return u=Math.max(0,Math.min(1,u)),u}function uf(t,e,r,n){console.debug(`Accomodating hole outs from ${e}m on ${r}`);const o=Kc(e,r);if(o==0)return console.debug("0% chance, skip"),t;console.debug(`${(100*o).toFixed(1)}% from ${e}m on ${r}`),t.features.forEach(l=>l.properties.probability*=1-o);const u=Gn(n,2e-4,{units:"kilometers"});return u.properties={distanceToHole:0,terrainType:"hole",probability:o,strokesRemaining:0},t.features.push(u),t}function Ga(t,e){e in vo||(console.error("No strokes remaining polynomial for terrainType"+e+", defaulting to rough"),e="rough");let r=vo[e].reduce((o,u,l)=>o+u*Math.pow(t,l),0);return Math.min(Math.max(r,-7),7)}function lh(t,e,r){let n=sn(r);if(n instanceof Error)return;const o=Yn(t),u=Ce(o,e,{units:"kilometers"})*1e3,l=Fa(o,n);return Ga(u,l)}function ff(t,e,r,n){let o=tf(n);t.features.forEach(u=>{let l=u.properties;if(l.strokesRemaining===void 0){const v=Yn(u);l.distanceToHole=Ce(v,e,{units:"kilometers"})*1e3,l.terrainType=Fa(v,n,o),l.strokesRemaining=Ga(l.distanceToHole,l.terrainType)}l.strokesGained=r-l.strokesRemaining-1})}function sf(t){Lt(t,e=>{let r=e.properties;r.weightedStrokesGained=r.strokesGained*r.probability})}function ch(t,e,r,n,o,u){const l=sn(o);if(l instanceof Error)return l;const v=un(Ir(t)),h=un(Ir(e)),p=un(Ir(r));if(n<0){const D=Ce(v,h,{units:"kilometers"})*1e3;n=-n*D,n=Math.max(.5,n)}const k=Gn(h,3*n/1e3,{units:"kilometers"}),L=u||Fa(v,l),C=Ce(v,p,{units:"kilometers"})*1e3,X=Ga(C,L);let Y=af(k);of(Y,h,n),uf(Y,C,L,p),ff(Y,p,X,l),sf(Y);const d=Y.features.reduce((D,w)=>D+w.properties.weightedStrokesGained,0);console.log("Total Weighted Strokes Gained:",d);const F={type:ju.STROKES_GAINED,strokesRemainingStart:X,distanceToHole:C,weightedStrokesGained:d,terrain:L};return Y.properties=F,Y}function hh(t,e,r,n,o,u){const l=sn(o);if(l instanceof Error)return l;const v=un(Ir(t)),h=un(Ir(e)),p=un(Ir(r));if(n<0){const P=Ce(v,h,{units:"kilometers"})*1e3;n=-n*P,n=Math.max(.5,n)}const k=u||Fa(v,l),L=Ce(v,p,{units:"kilometers"})*1e3,C=Ga(L,k),X=Gn(h,2*3*n/1e3,{units:"kilometers"});let Y=af(X,{maximum_cells:8e3});ff(Y,p,C,l);const d=Gn(h,n/1e3,{units:"kilometers"}),F=Gu(Ou(Y,d));F.features.forEach(P=>P.properties={}),console.log(`Iterating through aim grid of ${F.features.length} cells`);let D=0;for(let P of F.features){const E=Yn(P),I=Gn(E,3*n/1e3,{units:"kilometers"}),M=Ou(Y,I);of(M,E,n),uf(M,L,k,p),sf(M);const N=M.features.reduce((z,H)=>z+H.properties.weightedStrokesGained,0);P.properties.weightedStrokesGained=N,console.log(`Processed cell ${D}, wsg = ${N}`),D++}const w=F.features.filter(P=>Zl(P,h)),b=w.reduce((P,E)=>P+E.properties.weightedStrokesGained,0)/w.length;Lt(F,P=>{let E=P.properties;E.relativeStrokesGained=E.weightedStrokesGained-b});const $={type:ju.TARGET,strokesRemainingStart:C,distanceToHole:L,weightedStrokesGained:b};return F.properties=$,F}function lf(t,e){return xe(Cu(t,(n,o)=>(e(o)&&n.push(o),n),[]))}function Vc(t,e){return lf(t,r=>ic(e,r))}function Ou(t,e){return lf(t,r=>Ll(r,e))}function jc(t,e,r){const n=(t-e)/(r*Math.sqrt(2)),o=1/(1+.3275911*Math.abs(n)),u=.254829592,l=-.284496736,v=1.421413741,h=-1.453152027;return 1-((((1.061405429*o+h)*o+v)*o+l)*o+u)*o*Math.exp(-n*n)}function vh(t,e,r){const n=jc(t,e,r),o=(t-e)/(r*Math.sqrt(2));return .5*(1+Math.sign(o)*n)}const Iu={meters:1,yards:1.1,kilometers:.001,miles:621371e-9,feet:3.3},rh={meters:"m",yards:"yd",feet:"ft",kilometers:"km",miles:"mi"};function eh(t,e){let r={from_unit:"meters",to_unit:"meters",precision:1,with_unit:!1};e&&(r={...r,...e}),typeof t=="string"&&(t=parseFloat(t));const o=(t/Iu[r.from_unit]*Iu[r.to_unit]).toFixed(r.precision);if(r.include_unit){const u=th(e.to_unit);return o+u}return o}function gh(t,e){return parseFloat(eh(t,e))}function th(t){return rh[t]}function ph(t,e){if(!t||!e)return 0;const r=Ir([t.x,t.y]),n=Ir([e.x,e.y]);return Ce(r,n,{units:"meters"})}function dh(t){return Ir([t.x,t.y])}export{vo as S,ih as a,gh as b,Rt as c,eh as d,ju as e,oh as f,ph as g,nh as h,jc as i,uh as j,fh as k,sh as l,lh as m,ef as n,qn as o,Ir as p,ct as q,Aa as r,ch as s,hh as t,dh as u,Cc as v,ah as w,Ce as x,vh as y};
